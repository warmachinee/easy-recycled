(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{588:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(26),s=a.n(o),i=a(22),r=a(40),c=a(104),u=a(31),p=a(103),d=a(162),m=a(142),b=a(149),f=a(39),y=a(37),E=a(377),g=a(282);const h=s()({loader:()=>Promise.all([a.e(1),a.e(15)]).then(a.bind(null,125)),loading:()=>null}),v=s()({loader:()=>Promise.all([a.e(77),a.e(59)]).then(a.bind(null,528)),loading:()=>null}),j=s()({loader:()=>Promise.all([a.e(74),a.e(43)]).then(a.bind(null,530)),loading:()=>null}),C=s()({loader:()=>Promise.all([a.e(75),a.e(44)]).then(a.bind(null,254)),loading:()=>null}),O=s()({loader:()=>a.e(29).then(a.bind(null,531)),loading:()=>null}),S=s()({loader:()=>Promise.all([a.e(78),a.e(64)]).then(a.bind(null,532)),loading:()=>null}),x=s()({loader:()=>Promise.all([a.e(0),a.e(35)]).then(a.bind(null,134)),loading:()=>null}),w=s()({loader:()=>Promise.all([a.e(0),a.e(6),a.e(24)]).then(a.bind(null,135)),loading:()=>null}),k=s()({loader:()=>a.e(62).then(a.bind(null,255)),loading:()=>null}),I=Object(i.f)(e=>l.a.createElement(v,Object.assign({},e))),D=Object(c.a)(e=>({paper:{padding:16,margin:"8px 16px",borderRadius:8}})),P=e=>{const t=D(),{csrf:a,setCsrf:o,profileData:s,_xhrPost:i,handleLogout:c,_thousandSeperater:b}=Object(n.useContext)(u.a),{userInfo:y,booleanDispatch:v}=e;return l.a.createElement(p.a,{elevation:3,className:t.paper},l.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},l.a.createElement(d.a,{variant:"h6",style:{marginRight:16}},"เงินคงเหลือ"),l.a.createElement("div",{style:{width:16}}),l.a.createElement(d.a,{variant:"h6",style:{marginRight:8,fontWeight:700}},y&&y.info&&"number"==typeof y.info.balance?`${b(y.info.balance)}`:"-"),l.a.createElement(E.a,null)),l.a.createElement(m.a,{style:{marginTop:12}}),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(h,{startIcon:l.a.createElement(g.a,null),variant:"text",buttonColor:f.a,onClick:()=>v({type:"true",key:"addTopup"})},"เติมเงิน"),l.a.createElement(r.b,{to:"/#topup_list",style:{textDecoration:"none",color:"inherit"}},l.a.createElement(h,{variant:"text",buttonColor:f.a},"ประวัติการเติมเงิน"))))},T=({value:e,topup:t,setTopup:a})=>l.a.createElement(h,Object.assign({style:{flex:1},variant:"contained"},t===e&&{buttonColor:y.a},{onClick:()=>a(e)}),e),_=e=>{const{topupEtc:t,topup:a,setTopup:n,setTopupEtc:o,onCreate:s,slip:i,setSlip:r,bankDetail:c}=e;return l.a.createElement("div",null,c&&l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{variant:"h6"},"รายละเอียด"),l.a.createElement(d.a,{style:{whiteSpace:"pre-line"}},c.topup)),l.a.createElement(m.a,{style:{margin:"16px 0"}}),l.a.createElement("div",{style:{display:"flex",marginBottom:16}},l.a.createElement(T,Object.assign({value:50},e)),l.a.createElement("div",{style:{width:16}}),l.a.createElement(T,Object.assign({value:100},e))),l.a.createElement("div",{style:{display:"flex",marginBottom:16}},l.a.createElement(T,Object.assign({value:150},e)),l.a.createElement("div",{style:{width:16}}),l.a.createElement(T,Object.assign({value:200},e))),l.a.createElement("div",{style:{display:"flex",marginBottom:16}},l.a.createElement(T,Object.assign({value:300},e)),l.a.createElement("div",{style:{width:16}}),l.a.createElement(T,Object.assign({value:500},e))),l.a.createElement("div",{style:{display:"flex",marginBottom:16}},l.a.createElement(T,Object.assign({value:1e3},e)),l.a.createElement("div",{style:{width:16}}),l.a.createElement(T,Object.assign({value:"เลือกจำนวนเงิน"},e))),"เลือกจำนวนเงิน"===a&&l.a.createElement(b.a,{fullWidth:!0,value:`${t}`,variant:"outlined",size:"small",type:"number",label:"จำนวนเงิน",onChange:e=>o(parseInt(e.target.value))}),l.a.createElement(m.a,{style:{margin:"16px 0"}}),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(k,Object.assign({fullWidth:!0,label:"อัพโหลดสลิป"},{slip:i,setSlip:r})),i&&l.a.createElement(h,{onClick:()=>r(null)},"รีเซ็ต")),i&&l.a.createElement(d.a,{variant:"caption"},i.name),l.a.createElement(m.a,{style:{margin:"24px 0"}}),l.a.createElement(h,{style:{width:"100%"},variant:"contained",buttonColor:f.a,onClick:()=>s({action:"delete"}),disabled:null===i},"เติมเงิน"))},L=({history:e,location:t})=>{D();const{csrf:a,setCsrf:o,profileData:s,_xhrPost:i,_fetchFile:r,handleLogout:c,booleanReducer:p,useConfirmDeleteItem:m,checkSession:b,_onLocalhost:y,realtimeAccess:g}=Object(n.useContext)(u.a),[v,k]=Object(n.useState)(null),[{addTopup:T,topupList:L,noti:U,userProfile:B},R]=Object(n.useReducer)(p,{forgot:!1,topupList:"#topup_list"===t.hash,noti:!1,userProfile:!1}),[W,A]=Object(n.useState)(50),[z,F]=Object(n.useState)(0),[J,N]=Object(n.useState)(null),[$,q]=Object(n.useState)(null),[{confirmState:K,item:V},X]=m();async function Y(){const e=await i({csrf:a,url:"loadusersystem",body:{action:"info",linetoken:s.userId,type:"customer"}});o(e.csrf),"status"in e.data&&"this is not user account or have been delete account"===e.data.status?b():(k(e.data),async function(){const e=await i({csrf:a,url:"loadusersystem",body:{action:"howtotopup",linetoken:s.userId,type:"customer"}});o(e.csrf),q(e.data)}())}return Object(n.useEffect)(()=>{/localhost/.test(window.location.href)&&k({info:{displayname:"P.R.E.M.I.O.R",fullname:"Sippakorn",lastname:"Suphapinyo",tel:80670057,statusmassage:"UI/UX Developer at PDS Co.,Ltd.",picture:"https://profile.line-scdn.net/0hPyKQa5SXD1Z2KCciVYpwAUptATsBBgkeDh0UNVooWDJcT05USkhFY1F9AW9dEU8CShsUN1N7UmUJ",business_name:"PDS Co.,Ltd.",business_type:"รถรับซื้อของเก่า/ซาเล้ง",location:"นนทบุรี",org_size:"พนักงาน 6-20 คน",document:{document:["บิลเงินสด","etc","ภพ.20","ใบอนุญาตค้าของเก่า","หนังสือรับรองบริษัท"],etc:"Transcript"},transport:{transport:["etc"],etc:"Taxi"},balance:0},docs:["log.txt","topup"]}),s&&Y()},[]),Object(n.useEffect)(()=>{R({type:`${"#topup_list"===t.hash}`,key:"topupList"})},[t]),l.a.createElement("div",null,l.a.createElement(O,Object.assign({},{userInfo:v,handleLogout:c,booleanDispatch:R})),l.a.createElement(P,Object.assign({},{userInfo:v,booleanDispatch:R})),l.a.createElement(h,{buttonColor:f.a,variant:"contained",size:"large",style:{margin:16,width:"calc(100% - 32px)",fontSize:24,letterSpacing:4,padding:24},onClick:()=>e.replace("/market")},"บอร์ดสินค้า"),l.a.createElement(j,null),l.a.createElement(w,{type:"delete",open:K,onClose:()=>X({action:"cancel"}),onCancel:()=>X({action:"cancel"}),onSubmit:async function(){const e={action:"createtopup",linetoken:s.userId,type:"customer",value:"เลือกจำนวนเงิน"===W?parseInt(z):W},t=await i({csrf:a,url:"usersystem",body:e});if(o(t.csrf),g(),"success"===t.data.status){const e=await r({url:"usersystem",csrf:a,headers:{action:"receipt",type:"customer",requestid:t.data.requestid},body:{receiptimage:J}});N(null),A(50),F(0),o(e.csrf),Y(),R({type:"falseAll"}),X({action:"cancel"}),g()}},title:"คุณแน่ใจหรือไม่ว่าต้องการจะเติมเงิน ?",headIcon:E.a,headIconColor:f.a,submitButtonColor:f.a,submitText:"เติมเงิน"},l.a.createElement(d.a,{variant:"h6",style:{fontWeight:400},align:"center"},V&&V.business_name)),l.a.createElement(x,{open:L,onClose:()=>e.replace("/"),title:"ประวัติการเติมเงิน",fullScreen:!0,dividers:!1,contentStyle:{padding:0}},l.a.createElement(I,Object.assign({},{userInfo:v,booleanDispatch:R}))),l.a.createElement(x,{open:T,onClose:()=>R({type:"false",key:"addTopup"}),title:"เลือกจำนวนเงิน"},l.a.createElement(_,Object.assign({},{topup:W,setTopup:A,topupEtc:z,setTopupEtc:F,onCreate:X,slip:J,setSlip:N,bankDetail:$}))),l.a.createElement(x,{open:U,onClose:()=>R({type:"false",key:"noti"}),title:"การแจ้งเตือน",fullScreen:!0,dividers:!1,contentStyle:{padding:0}},l.a.createElement(C,null)),l.a.createElement(x,{open:B,fullScreen:!0,onClose:()=>R({type:"false",key:"userProfile"}),title:"โปรไฟล์"},l.a.createElement(S,Object.assign({},{userInfo:v,booleanDispatch:R,getInfo:Y}))))};t.default=Object(i.f)(e=>l.a.createElement(L,Object.assign({},e)))}}]);