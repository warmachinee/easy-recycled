(window.webpackJsonp=window.webpackJsonp||[]).push([[39,49],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(10),r=a(20),c=a(145);t.default=({children:e,variant:t,buttonColor:a,light:n=!1,...s})=>{const i=Object(r.a)();function m(e){switch(e){case"text":return{color:a?a[600]:i.palette.text.primary,"&:hover":{backgroundColor:a?a[n?100:50]:i.palette.action.hover}};case"contained":return{color:a?i.palette.getContrastText(a[n?700:600]):i.palette.text.primary,backgroundColor:a?a[n?600:500]:i.palette.background.default,"&:hover":{backgroundColor:a?a[n?800:700]:i.palette.action.hover}};case"outlined":return{color:a?a[600]:i.palette.text.primary,border:`1px solid ${a?a[600]:i.palette.text.primary}`,"&:hover":{backgroundColor:a?a[n?100:50]:i.palette.action.hover}};default:return{color:i.palette.text.primary,"&:hover":{backgroundColor:i.palette.action.hover}}}}const d=Object(o.a)(e=>({root:{...m(t)}}))(c.a);return l.a.createElement(d,Object.assign({},s,{variant:t}),e)}},131:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(60),r=a(189),c=a(168),s=a(139),i=a(190),m=a(161),d=a(176),u=a(191),f=a(145),y=a(166),E=a(177),p=a(38),b=a(124);const g=Object(o.a)(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},avatar:{width:"auto",height:"auto",padding:12,marginBottom:8},deleteIcon:{fontSize:56,color:"white"}}));t.default=e=>{const t=g(),{open:a=!1,onClose:n,children:o,title:v,type:h,headIcon:C=y.a,headIconColor:x=p.a,maxWidth:k="xs",dividers:j=!1,submitButtonColor:O=p.a,submitText:S="ลบ",cancelText:_="ยกเลิก",onCancel:w=n,onSubmit:B,other:P}=e;return l.a.createElement(r.a,Object.assign({scroll:"body",open:a,onClose:n,maxWidth:k,fullWidth:!0},P),l.a.createElement(c.a,null,l.a.createElement(s.a,{className:t.closeButton,onClick:n},l.a.createElement(E.a,null))),l.a.createElement(i.a,{dividers:j},l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement(m.a,{className:t.avatar,style:{backgroundColor:x[500]}},l.a.createElement(C,{className:t.deleteIcon}))),l.a.createElement(d.a,{variant:"h6",align:"center"},v),l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o)),l.a.createElement(u.a,{style:{justifyContent:"center",margin:"16px 0"}},l.a.createElement(f.a,{size:"large",style:{marginRight:8},color:"primary",onClick:w},_),l.a.createElement(b.default,{size:"large",variant:"contained",buttonColor:O,onClick:B},S)))}},160:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o=a(123);t.a=Object(o.a)(l.a.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Create")},169:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o=a(104),r=a(28),c=a(377),s=a(149);const i=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=i(),{province:a,setProvince:o,setDistrict:m,setSubdistrict:d}=e,{csrf:u,setCsrf:f,_xhrGetP:y}=Object(n.useContext)(r.a),[E,p]=l.a.useState(!1),[b,g]=l.a.useState([]),v=E&&0===b.length;return l.a.useEffect(()=>{let e=!0;if(v)return(async()=>{const t=await y("https://easyrecycle.ml/user/location?type=provinces");f(t.csrf),e&&g(t.data)})(),()=>{e=!1}},[v]),l.a.useEffect(()=>{E||g([])},[E]),l.a.createElement(c.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:E,onOpen:()=>{p(!0)},onClose:()=>{p(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:b,loading:v,onChange:function(e,t){o(t),m(null),d(null)},noOptionsText:"ไม่มีจังหวัดที่คุณค้นหา",renderInput:e=>l.a.createElement(s.a,Object.assign({},e,{label:"จังหวัด",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},170:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o=a(104),r=a(28),c=a(377),s=a(149);const i=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=i(),{district:a,province:o,setDistrict:m,setSubdistrict:d}=e,{csrf:u,setCsrf:f,_xhrGetP:y}=Object(n.useContext)(r.a),[E,p]=l.a.useState(!1),[b,g]=l.a.useState([]),v=E&&0===b.length;return l.a.useEffect(()=>{let e=!0;if(v)return(async()=>{const t=await y(`https://easyrecycle.ml/user/location?type=districts&provincesid=${o.id}`);f(t.csrf),e&&g(t.data)})(),()=>{e=!1}},[v,o]),l.a.useEffect(()=>{E||g([])},[E]),l.a.createElement(c.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:E,onOpen:()=>{p(!0)},onClose:()=>{p(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:b,loading:v,onChange:function(e,t){m(t),d(null)},noOptionsText:"ไม่มีเขต/อำเภอที่คุณค้นหา",renderInput:e=>l.a.createElement(s.a,Object.assign({},e,{label:"เขต/อำเภอ",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},171:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o=a(104),r=a(28),c=a(377),s=a(149);const i=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=i(),{subdistrict:a,district:o,setSubdistrict:m}=e,{csrf:d,setCsrf:u,_xhrGetP:f}=Object(n.useContext)(r.a),[y,E]=l.a.useState(!1),[p,b]=l.a.useState([]),g=y&&0===p.length;return l.a.useEffect(()=>{let e=!0;if(g)return(async()=>{const t=await f(`https://easyrecycle.ml/user/location?type=subdistricts&districtsid=${o.id}`);u(t.csrf),e&&b(t.data)})(),()=>{e=!1}},[g,o]),l.a.useEffect(()=>{y||b([])},[y]),l.a.createElement(c.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:y,onOpen:()=>{E(!0)},onClose:()=>{E(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:p,loading:g,onChange:function(e,t){m(t)},noOptionsText:"ไม่มีตำบลที่คุณค้นหา",renderInput:e=>l.a.createElement(s.a,Object.assign({},e,{label:"ตำบล",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},181:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(60),r=a(189),c=a(168),s=a(139),i=a(190),m=a(191),d=a(177);const u=Object(o.a)(e=>({closeButton:{position:"absolute",right:0,top:0,color:e.palette.grey[500],zIndex:1500}}));t.default=e=>{const t=u(),{open:a=!1,onClose:n,children:o,title:f,actions:y,maxWidth:E="xs",fullScreen:p=!1,dividers:b=!1,contentStyle:g,other:v}=e;return l.a.createElement(r.a,Object.assign({scroll:"paper",open:a,onClose:n,maxWidth:E,fullWidth:!0,fullScreen:p},v),l.a.createElement(c.a,{style:{...!f&&{backgroundColor:"black"}}},f,l.a.createElement(s.a,{className:t.closeButton,onClick:n},l.a.createElement(d.a,null))),l.a.createElement(i.a,{dividers:b,style:{...g,padding:0,display:"flex",flexDirection:"column",justifyContent:"space-around",backgroundColor:"black"}},o),y&&l.a.createElement(m.a,null,y))}},186:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(207),r=a.n(o),c=a(104),s=a(139),i=a(275),m=a(428),d=a(28),u=a(181),f=a(37),y=a(38),E=a(124),p=a(131);const b=Object(c.a)(e=>({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,margin:"16px 0"},slider:{position:"relative",width:"100%"},itemGrid:{height:300,backgroundColor:f.a[900],backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",display:"flex",flexDirection:"column",justifyContent:"center"},item:{maxHeight:300,width:"100%",display:"block",objectFit:"contain"}}));t.default=({files:e,editting:t,rawAlbum:a,loadBusinessForm:o,thisFormId:c})=>{const f=b(),{csrf:g,setCsrf:v,_xhrPost:h,addSnackbar:C,_openFullScreen:x,_closeFullscreen:k,profileData:j}=Object(n.useContext)(d.a),[O,S]=Object(n.useState)(!1),[_,w]=Object(n.useState)(0),B=[...t?e:Array.from(e)],[P,z]=Object(n.useState)(!1);function N(){w(e=>e-1>=0?(e-1)%B.length:(e-1+B.length)%B.length)}function D(){w(e=>(e+1)%B.length)}function F(){z(!1)}return l.a.createElement("div",{className:f.root},l.a.createElement("div",{className:f.slider},l.a.createElement(r.a,{index:_,className:f.item},B.map((e,t)=>l.a.createElement("div",{key:t,className:f.itemGrid},l.a.createElement("img",{className:f.item,src:e,alt:`${t}`,onClick:()=>function(e){S(!0),w(e)}(t)})))),B.length>1&&l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{style:{position:"absolute",left:0,top:"calc(50% - 12px)",backgroundColor:"white",opacity:.8},onClick:N},l.a.createElement(i.a,null)),l.a.createElement(s.a,{style:{position:"absolute",right:0,top:"calc(50% - 12px)",backgroundColor:"white",opacity:.8},onClick:D},l.a.createElement(m.a,null))),a&&j&&l.a.createElement(E.default,{buttonColor:y.a,variant:"contained",size:"small",style:{position:"absolute",right:4,bottom:4},onClick:function(){z(!0)}},"ลบรูป")),l.a.createElement(u.default,{open:O,onClose:function(){S(!1)},fullScreen:!0},l.a.createElement("div",{className:f.slider,style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},l.a.createElement(r.a,{index:_},B.map((e,t)=>l.a.createElement("div",{key:t,style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"}},l.a.createElement("img",{style:{width:"100%",maxHeight:window.innerHeight-48,objectFit:"contain"},src:e,alt:`${t}`})))),B.length>1&&l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{style:{position:"absolute",left:0,top:"calc(50% - 12px)",backgroundColor:"white",opacity:.8},onClick:N},l.a.createElement(i.a,null)),l.a.createElement(s.a,{style:{position:"absolute",right:0,top:"calc(50% - 12px)",backgroundColor:"white",opacity:.8},onClick:D},l.a.createElement(m.a,null))))),a&&j&&l.a.createElement(p.default,{type:"delete",open:P,onClose:F,onCancel:F,onSubmit:async function(){const e={action:"delpic",formid:c,linetoken:j.userId,picpath:a[_]};console.log(e);const t=await h({csrf:g,url:"formsystem",body:e});v(t.csrf),"success"===t.data.status?(C({message:"ลบรูปสำเร็จ",variant:"success"}),o(),F(),N()):C({message:"ลบรูปไม่สำเร็จ",variant:"error"})},title:"คุณแน่ใจหรือไม่ว่าต้องการจะลบรูป ?"},l.a.createElement("img",{style:{width:"100%"},src:B[_],alt:a[_]})))}},301:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(26),r=a.n(o),c=a(104),s=a(28),i=a(176),m=a(139),d=a(216),u=a(149),f=a(629),y=a(147),E=a(379),p=a(257),b=a(378),g=a(608),v=a(151),h=a(160),C=a(124),x=a(38),k=a(39),j=a(607),O=a(170),S=a(171),_=a(169),w=a(186);const B=Object(c.a)(e=>({editButton:{padding:6,marginBottom:6,marginLeft:8},dateText:{width:"50%"}})),P=r()({loader:()=>Promise.all([a.e(0),a.e(37)]).then(a.bind(null,134)),loading:()=>null}),z=({value:e})=>{const t=B(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:u,realtimeEndOfSale:f}=Object(n.useContext)(s.a),[y,E]=Object(n.useState)(!1),[p,b]=Object(n.useState)({status:e.status,boarddisplay:e.boarddisplay,endofsale:e.endofsale,formcode_sector:e.formcode?e.formcode.sector:"",formcode_province:e.formcode?e.formcode.province:"",formcode_number:e.formcode?e.formcode.number:""});async function g({thisValue:t,keys:n}){const l=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:u.formid,[n]:t}});o(l.csrf),c(),"endofsale"===n&&f(e)}return l.a.createElement("div",null,l.a.createElement(i.a,{style:{marginBottom:12},variant:"h6"},"ตั้งค่า",!y&&l.a.createElement(m.a,{className:t.editButton,onClick:()=>{E(!0),b({status:e.status,boarddisplay:e.boarddisplay,endofsale:e.endofsale,formcode_sector:e.formcode?e.formcode.sector:"",formcode_province:e.formcode?e.formcode.province:"",formcode_number:e.formcode?e.formcode.number:""})}},l.a.createElement(h.a,{fontSize:"small"}))),l.a.createElement("div",{style:{display:"flex",marginBottom:12,alignItems:"baseline"}},l.a.createElement(i.a,{style:{width:100}},"ร้านค้า"),y?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(d.a,Object.assign({label:"ขายบนร้านค้า",style:{marginRight:4,...1===p.boarddisplay&&{color:"white"}}},0===p.boarddisplay&&{variant:"outlined"},1===p.boarddisplay&&{color:"primary"},{onClick:()=>{b({...p,boarddisplay:1}),g({thisValue:1,keys:"boarddisplay"})}})),l.a.createElement(d.a,Object.assign({label:"ไม่ได้ขายบนร้านค้า",style:{...0===p.boarddisplay&&{color:"white"}}},1===p.boarddisplay&&{variant:"outlined"},0===p.boarddisplay&&{color:"primary"},{onClick:()=>{b({...p,boarddisplay:0}),g({thisValue:0,keys:"boarddisplay"})}}))):l.a.createElement(d.a,Object.assign({label:1===e.boarddisplay?"แสดงบนร้านค้า":"ไม่แสดงบนร้านค้า"},0===e.boarddisplay&&{variant:"outlined"},1===e.boarddisplay&&{color:"primary",style:{color:"white"}}))),l.a.createElement("div",{style:{display:"flex",marginBottom:12,alignItems:"baseline"}},l.a.createElement(i.a,{style:{width:100}},"การขาย"),y?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(d.a,Object.assign({label:"ขายต่อ",style:{marginRight:4,...0===p.endofsale&&{color:"white"}}},1===p.endofsale&&{variant:"outlined"},0===p.endofsale&&{color:"primary"},{onClick:()=>{b({...p,endofsale:0}),g({thisValue:0,keys:"endofsale"})}})),l.a.createElement(d.a,Object.assign({label:"จบการขาย",style:{...1===p.endofsale&&{color:"white"}}},0===p.endofsale&&{variant:"outlined"},1===p.endofsale&&{color:"primary"},{onClick:()=>{b({...p,endofsale:1}),g({thisValue:1,keys:"endofsale"})}}))):l.a.createElement(d.a,Object.assign({label:1===e.endofsale?"จบการขายแล้ว":"กำลังขาย"},1===e.endofsale&&{variant:"outlined"},0===e.endofsale&&{color:"primary",style:{color:"white"}}))),y&&l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(C.default,{buttonColor:x.a,variant:"contained",onClick:()=>{E(!1),b({status:e.status,boarddisplay:e.boarddisplay,endofsale:e.endofsale,formcode_sector:e.formcode?e.formcode.sector:"",formcode_province:e.formcode?e.formcode.province:"",formcode_number:e.formcode?e.formcode.number:""})}},"จบการแก้ไข")))},N=({value:e})=>{const t=B(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,_onEnter:f,realtimeAccess:y}=Object(n.useContext)(s.a),[E,p]=Object(n.useState)(!1),[b,g]=Object(n.useState)(e);async function v(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,business_name:b}});o(e.csrf),p(!1),c(),y()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"ชิ่อบริษัท",l.a.createElement(m.a,{className:t.editButton,onClick:()=>p(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),E?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(u.a,{style:{marginRight:16},fullWidth:!0,autoFocus:E,value:b,onChange:e=>g(e.target.value),onKeyPress:f(v)}),l.a.createElement(C.default,{disabled:b===e,variant:"contained",buttonColor:k.a,onClick:v},"บันทึก"),l.a.createElement(C.default,{variant:"text",buttonColor:k.a,onClick:()=>{p(!1),g(e)}},"ยกเลิก")):l.a.createElement(i.a,null,e))},D=({remain:e,total:t})=>{const a=B(),{csrf:o,setCsrf:r,_xhrPost:c,getGoodsDetail:d,detail:f,_onEnter:y,realtimeAccess:E}=Object(n.useContext)(s.a),[p,b]=Object(n.useState)(!1),[g,v]=Object(n.useState)("0");async function x(){const e=await c({csrf:o,url:"abusinesssystem",body:{action:"form_edit",formid:f.formid,accessremain:parseInt(g)}});b(!1),r(e.csrf),d(),E()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},l.a.createElement(i.a,{variant:"h6",style:{marginRight:16}},"สิทธิการเข้าชม"),l.a.createElement(i.a,{variant:"h6",style:{marginRight:16}},`${e}/${t}`,l.a.createElement(m.a,{className:a.editButton,onClick:()=>b(e=>!e)},l.a.createElement(h.a,{fontSize:"small"})))),l.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},l.a.createElement(i.a,{variant:"h6",style:{marginRight:16}},p?"เพิ่มจำนวน":"เหลือ"),p?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(u.a,{style:{marginRight:16},fullWidth:!0,autoFocus:p,value:g,type:"number",onChange:e=>v(e.target.value),onKeyPress:y(x)}),l.a.createElement(C.default,{disabled:g===e,variant:"contained",buttonColor:k.a,onClick:x},"บันทึก"),l.a.createElement(C.default,{variant:"text",buttonColor:k.a,onClick:()=>{b(!1),v(e)}},"ยกเลิก")):l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{style:{marginRight:24}},e),l.a.createElement(i.a,{variant:"h6",style:{marginRight:16}},"ทั้งหมด"),l.a.createElement(i.a,null,t))))},F=({value:e})=>{const t=B(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,_onEnter:f,realtimeAccess:y}=Object(n.useContext)(s.a),[E,p]=Object(n.useState)(!1),[b,g]=Object(n.useState)(e);async function v(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,price:b}});p(!1),o(e.csrf),c(),y()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},l.a.createElement(i.a,{variant:"h6",style:{marginRight:48}},"ราคาเข้าชม"),E?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(u.a,{style:{marginRight:16},fullWidth:!0,autoFocus:E,value:b,type:"number",onChange:e=>g(e.target.value),onKeyPress:f(v)}),l.a.createElement(C.default,{disabled:b===e,variant:"contained",buttonColor:k.a,onClick:v},"บันทึก"),l.a.createElement(C.default,{variant:"text",buttonColor:k.a,onClick:()=>{p(!1),g(e)}},"ยกเลิก")):l.a.createElement(i.a,null,""===e?"-":e," บาท",l.a.createElement(m.a,{className:t.editButton,onClick:()=>p(e=>!e)},l.a.createElement(h.a,{fontSize:"small"})))))},I=({value:e})=>{const t=B(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,_onEnter:u,realtimeAccess:f,_parseLocation:y}=Object(n.useContext)(s.a),[E,p]=Object(n.useState)(!1),[b,g]=Object(n.useState)(e),[v,x]=Object(n.useState)(y(e).province),[j,w]=Object(n.useState)(y(e).district),[P,z]=Object(n.useState)(y(e).subdistrict),N={province:v,setProvince:x,district:j,setDistrict:w,subdistrict:P,setSubdistrict:z};return l.a.useEffect(()=>{(v||j||P)&&g(JSON.stringify({province:v,district:j,subdistrict:P}))},[v,j,P]),l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"เขตพื้นที่รับเศษวัสดุเหลือใช้",l.a.createElement(m.a,{className:t.editButton,onClick:()=>{p(e=>!e),g(e),x(y(e).province),w(y(e).district),z(y(e).subdistrict)}},l.a.createElement(h.a,{fontSize:"small"}))),(v||j||P)&&l.a.createElement(i.a,null,v.name,j?` > ${j.name}`:"",P?` > ${P.name} (${P.zip_code})`:""),E&&l.a.createElement("div",{style:{display:"flex",marginTop:12}},l.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},l.a.createElement(_.a,Object.assign({},N)),v&&l.a.createElement(O.a,Object.assign({},N)),v&&j&&l.a.createElement(S.a,Object.assign({},N))),l.a.createElement("div",{style:{marginLeft:16,marginBottom:"auto"}},l.a.createElement(C.default,{disabled:b===e,variant:"contained",buttonColor:k.a,onClick:async function(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,location:b}});p(!1),o(e.csrf),c(),f()}},"บันทึก"),l.a.createElement(C.default,{variant:"text",buttonColor:k.a,onClick:function(){p(!1),g(e),x(y(e).province),w(y(e).district),z(y(e).subdistrict)}},"ยกเลิก"))))},R=({appointment:e,auctiondate:t})=>{const a=B(),{csrf:o,setCsrf:r,_xhrPost:c,getGoodsDetail:d,detail:u,_dateToString:f,_dateToAPI:y,realtimeAccess:E}=Object(n.useContext)(s.a),[p,b]=Object(n.useState)({appointment:!1,auctiondate:!1});async function g({date:e,keys:t}){const a=await c({csrf:o,url:"abusinesssystem",body:{action:"form_edit",formid:u.formid,[t]:y(e)}});r(a.csrf),d(),b({...p,[t]:!1}),E()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(i.a,{className:a.dateText,variant:"h6"},"วันนัดดูสินค้า",l.a.createElement(m.a,{className:a.editButton,onClick:()=>b(e=>({...e,appointment:!e.appointment}))},l.a.createElement(h.a,{fontSize:"small"}))),l.a.createElement("div",{style:{width:16}}),l.a.createElement(i.a,{className:a.dateText,variant:"h6"},"วันประมูล",l.a.createElement(m.a,{className:a.editButton,onClick:()=>b(e=>({...e,auctiondate:!e.auctiondate}))},l.a.createElement(h.a,{fontSize:"small"})))),l.a.createElement("div",{style:{display:"flex"}},p.appointment?l.a.createElement(j.a,{className:a.dateText,clearable:!0,size:"small",fullWidth:!0,inputVariant:"outlined",clearLabel:"รีเซ็ต",okLabel:"ตกลง",cancelLabel:"ยกเลิก",value:e,minDateMessage:"",onChange:e=>g({date:e,keys:"appointment"}),labelFunc:()=>e?f(new Date(e)):"เลือกวันที่"}):l.a.createElement(i.a,{className:a.dateText},f(new Date(e))),l.a.createElement("div",{style:{width:16}}),p.auctiondate?l.a.createElement(j.a,{className:a.dateText,clearable:!0,size:"small",fullWidth:!0,inputVariant:"outlined",clearLabel:"รีเซ็ต",okLabel:"ตกลง",cancelLabel:"ยกเลิก",value:t,minDateMessage:"",onChange:e=>g({date:e,keys:"auctiondate"}),labelFunc:()=>t?f(new Date(t)):"เลือกวันที่"}):l.a.createElement(i.a,{className:a.dateText},f(new Date(t)))))},W=({value:e})=>{const t=B(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,businessForm:u,realtimeAccess:g}=Object(n.useContext)(s.a),[v,x]=Object(n.useState)(!1),[j,O]=Object(n.useState)(e);return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"ผู้ให้ข้อมูล",l.a.createElement(m.a,{className:t.editButton,onClick:()=>x(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),l.a.createElement(i.a,null,e),l.a.createElement(P,{open:v,onClose:()=>{x(!1),O(e)},title:"แก้ไขผู้ให้ข้อมูล"},l.a.createElement(f.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},l.a.createElement(y.a,{component:"legend"},"ผู้ให้ข้อมูล"),l.a.createElement(E.a,{value:j,onChange:e=>O(e.target.value)},u.position.map((e,t)=>l.a.createElement(p.a,{key:e,value:e,control:l.a.createElement(b.a,{color:"primary"}),label:e})))),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(C.default,{variant:"text",buttonColor:k.a,onClick:()=>{x(!1),O(e)},style:{margin:8}},"ยกเลิก"),l.a.createElement(C.default,{disabled:j===e,variant:"contained",buttonColor:k.a,onClick:async function(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,position:j}});x(!1),o(e.csrf),c(),g()},style:{margin:8}},"บันทึก"))))},T=({value:e})=>{const t=B(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,businessForm:E,_onEnter:b,realtimeAccess:v}=Object(n.useContext)(s.a),[x,j]=Object(n.useState)(!1),[O,S]=Object(n.useState)(e.transport),[_,w]=Object(n.useState)("none"===e.etc?"":e.etc),z=e=>{const t=[...O];e.target.checked?(t.push(e.target.value),S(t),w(_)):(S(t.filter(t=>t!==(""===e.target.value?"etc":e.target.value))),w(_))};function N(){j(!1),S(e.transport),w("none"===e.etc?"":e.etc)}async function D(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,transport:O,...O.some(e=>"etc"===e)&&{transetc:_}}});j(!1),o(e.csrf),c(),v()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"รถที่ใช้ขนส่ง",l.a.createElement(m.a,{className:t.editButton,onClick:()=>j(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),e.transport.filter(e=>"etc"!==e).map(e=>l.a.createElement(i.a,{key:e},e)),"none"!==e.etc&&l.a.createElement(i.a,null,e.etc),0===e.transport.filter(e=>"etc"!==e).length&&"none"===e.etc&&l.a.createElement(i.a,null,"ไม่มีรถที่ใช้ขนส่ง"),l.a.createElement(P,{open:x,onClose:N,title:"แก้ไขรถที่ใช้ขนส่ง"},l.a.createElement(f.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},l.a.createElement(y.a,{component:"legend"},"รถที่ต้องการใช้ขนส่ง"),E.transport.map((e,t)=>l.a.createElement(p.a,{key:e,value:e,control:l.a.createElement(g.a,{checked:O.some(t=>t===e),color:"primary",onChange:z}),label:e})),O.some(e=>"etc"===e)?l.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},l.a.createElement(g.a,{checked:O.some(e=>"etc"===e),color:"primary",onChange:z}),l.a.createElement(u.a,{fullWidth:!0,autoFocus:"none"!==_,name:"transetc",label:"อื่นๆ",size:"small",value:_,onChange:e=>w(e.target.value),onKeyPress:b(D)})):l.a.createElement(p.a,{value:"etc",control:l.a.createElement(g.a,{checked:O.some(e=>"etc"===e),color:"primary",onChange:z}),label:"อื่นๆ"})),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(C.default,{variant:"text",buttonColor:k.a,onClick:N,style:{margin:8}},"ยกเลิก"),l.a.createElement(C.default,{variant:"contained",buttonColor:k.a,onClick:D,style:{margin:8}},"บันทึก"))))},G=({value:e})=>{const t=B(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,businessForm:E,_onEnter:b,realtimeAccess:v}=Object(n.useContext)(s.a),[x,j]=Object(n.useState)(!1),[O,S]=Object(n.useState)(e.document),[_,w]=Object(n.useState)("none"===e.etc?"":e.etc),z=e=>{const t=[...O];e.target.checked?(t.push(e.target.value),S(t),w(_)):(S(t.filter(t=>t!==(""===e.target.value?"etc":e.target.value))),w(_))};function N(){j(!1),S(e.document),w("none"===e.etc?"":e.etc)}async function D(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,document:O,...O.some(e=>"etc"===e)&&{docsetc:_}}});j(!1),o(e.csrf),c(),v()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"เอกสาร",l.a.createElement(m.a,{className:t.editButton,onClick:()=>j(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),e.document.filter(e=>"etc"!==e).map(e=>l.a.createElement(i.a,{key:e},e)),"none"!==e.etc&&l.a.createElement(i.a,null,e.etc),0===e.document.filter(e=>"etc"!==e).length&&"none"===e.etc&&l.a.createElement(i.a,null,"ไม่มีเอกสาร"),l.a.createElement(P,{open:x,onClose:N,title:"แก้ไขรถที่ใช้ขนส่ง"},l.a.createElement(f.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},l.a.createElement(y.a,{component:"legend"},"รถที่ต้องการใช้ขนส่ง"),E.document.map((e,t)=>l.a.createElement(p.a,{key:e,value:e,control:l.a.createElement(g.a,{checked:O.some(t=>t===e),color:"primary",onChange:z}),label:e})),O.some(e=>"etc"===e)?l.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},l.a.createElement(g.a,{checked:O.some(e=>"etc"===e),color:"primary",onChange:z}),l.a.createElement(u.a,{fullWidth:!0,autoFocus:"none"!==_,name:"docsetc",label:"อื่นๆ",size:"small",value:_,onChange:e=>w(e.target.value),onKeyPress:b(D)})):l.a.createElement(p.a,{value:"etc",control:l.a.createElement(g.a,{checked:O.some(e=>"etc"===e),color:"primary",onChange:z}),label:"อื่นๆ"})),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(C.default,{variant:"text",buttonColor:k.a,onClick:N,style:{margin:8}},"ยกเลิก"),l.a.createElement(C.default,{variant:"contained",buttonColor:k.a,onClick:D,style:{margin:8}},"บันทึก"))))},L=({value:e})=>{const t=B(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,_onEnter:u,realtimeAccess:y}=Object(n.useContext)(s.a),[g,v]=Object(n.useState)(!1),[x,j]=Object(n.useState)(e);return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"เงื่อนไขการขาย Scarp",l.a.createElement(m.a,{className:t.editButton,onClick:()=>v(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),l.a.createElement(i.a,{style:{whiteSpace:"pre-line"}},e),l.a.createElement(P,{open:g,onClose:()=>{v(!1),j(e)},title:"เงื่อนไขการขาย Scarp"},l.a.createElement(f.a,{component:"fieldset",fullWidth:!0,style:{marginBottom:16,marginTop:16}},l.a.createElement(E.a,{value:x,onChange:e=>j(e.target.value)},l.a.createElement(p.a,{value:"เช็คราคา Scarp",control:l.a.createElement(b.a,{color:"primary"}),label:"เช็คราคา Scarp"}),l.a.createElement(p.a,{value:"ขายด่วน",control:l.a.createElement(b.a,{color:"primary"}),label:"ขายด่วน"}),l.a.createElement(p.a,{value:"ขาย (เฉพาะครั้งนี้)",control:l.a.createElement(b.a,{color:"primary"}),label:"ขาย (เฉพาะครั้งนี้)"}),l.a.createElement(p.a,{value:"ขาย (สัญญา 3 เดือน)",control:l.a.createElement(b.a,{color:"primary"}),label:"ขาย (สัญญา 3 เดือน)"}),l.a.createElement(p.a,{value:"ขาย (สัญญา 6 เดือน)",control:l.a.createElement(b.a,{color:"primary"}),label:"ขาย (สัญญา 6 เดือน)"}),l.a.createElement(p.a,{value:"ขาย (สัญญา 1 ปี)",control:l.a.createElement(b.a,{color:"primary"}),label:"ขาย (สัญญา 1 ปี)"}))),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(C.default,{disabled:x===e,variant:"contained",buttonColor:k.a,onClick:async function(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,sale_condition:x}});o(e.csrf),v(!1),c(),y()},style:{marginBottom:"auto"}},"บันทึก"),l.a.createElement(C.default,{variant:"text",buttonColor:k.a,onClick:()=>{v(!1),j(e)},style:{marginBottom:"auto"}},"ยกเลิก"))))};t.default=({detail:e})=>{B();const{csrf:t,setCsrf:a,_xhrPost:o,getFormImg:r}=Object(n.useContext)(s.a),[c,m]=Object(n.useState)(null),[d,u]=Object(n.useState)(null),f={...Object(n.useContext)(s.a),getGoodsDetail:y,detail:e,businessForm:d};async function y(){const n=await o({csrf:t,url:"aloadbusiness",body:{action:"form_detail",formid:e.formid}});m(n.data);const l=await o({csrf:n.csrf,url:"aloadbusiness",body:{action:"business_form"}});a(l.csrf),u(l.data)}return Object(n.useEffect)(()=>{e&&y()},[e]),c&&d?l.a.createElement(s.a.Provider,{value:f},"status"in c&&"wrong formid"!==c.status?l.a.createElement("div",null,l.a.createElement(z,{value:c}),l.a.createElement(v.a,{style:{margin:"16px 0"}}),c.filelist&&c.filelist.length>0&&l.a.createElement(w.default,{thisFormId:e.formid,files:c.filelist.map(t=>r({userid:c.userid,formid:e.formid,file:t}))}),l.a.createElement(N,{value:c.business_name}),l.a.createElement(D,{remain:c.accessremain,total:c.accesstotal}),l.a.createElement(F,{value:c.price}),l.a.createElement(I,{value:c.location}),l.a.createElement(R,{appointment:c.appointment,auctiondate:c.auctiondate}),l.a.createElement(W,{value:c.position}),l.a.createElement(T,{value:c.transport}),l.a.createElement(G,{value:c.document}),l.a.createElement(L,{value:c.sale_condition})):l.a.createElement(i.a,{style:{margin:"24px 0"},align:"center",variant:"h4",color:"textSecondary"},"ไม่มีสินค้า")):l.a.createElement("div",null)}},606:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(26),r=a.n(o),c=a(104),s=a(28),i=a(176),m=a(139),d=a(216),u=a(149),f=a(629),y=a(147),E=a(379),p=a(257),b=a(378),g=a(608),v=a(151),h=a(160),C=a(38),x=a(39),k=a(607),j=a(171),O=a(169),S=a(170),_=a(186);const w=r()({loader:()=>Promise.resolve().then(a.bind(null,124)),loading:()=>null}),B=r()({loader:()=>Promise.all([a.e(0),a.e(37)]).then(a.bind(null,134)),loading:()=>null}),P=Object(c.a)(e=>({editButton:{padding:6,marginBottom:6,marginLeft:8},dateText:{width:"50%"}})),z=({value:e})=>{const t=P(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:u}=Object(n.useContext)(s.a),[f,y]=Object(n.useState)(!1),[E,p]=Object(n.useState)({status:e.status,boarddisplay:e.boarddisplay,endofsale:e.endofsale,formcode_sector:e.formcode?e.formcode.sector:"",formcode_province:e.formcode?e.formcode.province:"",formcode_number:e.formcode?e.formcode.number:""});async function b({value:e,keys:t}){const n=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:u.formid,[t]:e}});o(n.csrf),c()}return l.a.createElement("div",null,l.a.createElement(i.a,{style:{marginBottom:12},variant:"h6"},"ตั้งค่า",!f&&l.a.createElement(m.a,{className:t.editButton,onClick:()=>{y(!0),p({status:e.status,boarddisplay:e.boarddisplay,endofsale:e.endofsale,formcode_sector:e.formcode?e.formcode.sector:"",formcode_province:e.formcode?e.formcode.province:"",formcode_number:e.formcode?e.formcode.number:""})}},l.a.createElement(h.a,{fontSize:"small"}))),l.a.createElement("div",{style:{display:"flex",marginBottom:12,alignItems:"baseline"}},l.a.createElement(i.a,{style:{width:100}},"ร้านค้า"),f?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(d.a,Object.assign({label:"ขายบนร้านค้า",style:{marginRight:4,...1===E.boarddisplay&&{color:"white"}}},0===E.boarddisplay&&{variant:"outlined"},1===E.boarddisplay&&{color:"primary"},{onClick:()=>{p({...E,boarddisplay:1}),b({value:1,keys:"boarddisplay"})}})),l.a.createElement(d.a,Object.assign({label:"ไม่ได้ขายบนร้านค้า",style:{...0===E.boarddisplay&&{color:"white"}}},1===E.boarddisplay&&{variant:"outlined"},0===E.boarddisplay&&{color:"primary"},{onClick:()=>{p({...E,boarddisplay:0}),b({value:0,keys:"boarddisplay"})}}))):l.a.createElement(d.a,Object.assign({label:1===e.boarddisplay?"แสดงบนร้านค้า":"ไม่แสดงบนร้านค้า"},0===e.boarddisplay&&{variant:"outlined"},1===e.boarddisplay&&{color:"primary",style:{color:"white"}}))),l.a.createElement("div",{style:{display:"flex",marginBottom:12,alignItems:"baseline"}},l.a.createElement(i.a,{style:{width:100}},"การขาย"),f?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(d.a,Object.assign({label:"ขายต่อ",style:{marginRight:4,...0===E.endofsale&&{color:"white"}}},1===E.endofsale&&{variant:"outlined"},0===E.endofsale&&{color:"primary"},{onClick:()=>{p({...E,endofsale:0}),b({value:0,keys:"endofsale"})}})),l.a.createElement(d.a,Object.assign({label:"จบการขาย",style:{...1===E.endofsale&&{color:"white"}}},0===E.endofsale&&{variant:"outlined"},1===E.endofsale&&{color:"primary"},{onClick:()=>{p({...E,endofsale:1}),b({value:1,keys:"endofsale"})}}))):l.a.createElement(d.a,Object.assign({label:1===e.endofsale?"จบการขายแล้ว":"กำลังขาย"},1===e.endofsale&&{variant:"outlined"},0===e.endofsale&&{color:"primary",style:{color:"white"}}))),f&&l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(w,{buttonColor:C.a,variant:"contained",onClick:()=>{y(!1),p({status:e.status,boarddisplay:e.boarddisplay,endofsale:e.endofsale,formcode_sector:e.formcode?e.formcode.sector:"",formcode_province:e.formcode?e.formcode.province:"",formcode_number:e.formcode?e.formcode.number:""})}},"จบการแก้ไข")))},N=({value:e})=>{const t=P(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,_onEnter:f}=Object(n.useContext)(s.a),[y,E]=Object(n.useState)(!1),[p,b]=Object(n.useState)(e);async function g(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,business_name:p}});o(e.csrf),E(!1),c()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"ชิ่อบริษัท",l.a.createElement(m.a,{className:t.editButton,onClick:()=>E(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),y?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(u.a,{style:{marginRight:16},fullWidth:!0,autoFocus:y,value:p,onChange:e=>b(e.target.value),onKeyPress:f(g)}),l.a.createElement(w,{disabled:p===e,variant:"contained",buttonColor:x.a,onClick:g},"บันทึก"),l.a.createElement(w,{variant:"text",buttonColor:x.a,onClick:()=>{E(!1),b(e)}},"ยกเลิก")):l.a.createElement(i.a,null,e))},D=({remain:e,total:t})=>{const a=P(),{csrf:o,setCsrf:r,_xhrPost:c,getGoodsDetail:d,detail:f,_onEnter:y}=Object(n.useContext)(s.a),[E,p]=Object(n.useState)(!1),[b,g]=Object(n.useState)("0");async function v(){const e=await c({csrf:o,url:"abusinesssystem",body:{action:"form_edit",formid:f.formid,accessremain:parseInt(b)}});p(!1),r(e.csrf),d()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},l.a.createElement(i.a,{variant:"h6",style:{marginRight:16}},"สิทธิการเข้าชม"),l.a.createElement(i.a,{variant:"h6",style:{marginRight:16}},`${e}/${t}`,l.a.createElement(m.a,{className:a.editButton,onClick:()=>p(e=>!e)},l.a.createElement(h.a,{fontSize:"small"})))),l.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},l.a.createElement(i.a,{variant:"h6",style:{marginRight:16}},E?"เพิ่มจำนวน":"เหลือ"),E?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(u.a,{style:{marginRight:16},fullWidth:!0,autoFocus:E,value:b,type:"number",onChange:e=>g(e.target.value),onKeyPress:y(v)}),l.a.createElement(w,{disabled:b===e,variant:"contained",buttonColor:x.a,onClick:v},"บันทึก"),l.a.createElement(w,{variant:"text",buttonColor:x.a,onClick:()=>{p(!1),g(e)}},"ยกเลิก")):l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{style:{marginRight:24}},e),l.a.createElement(i.a,{variant:"h6",style:{marginRight:16}},"ทั้งหมด"),l.a.createElement(i.a,null,t))))},F=({value:e})=>{const t=P(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,_onEnter:f}=Object(n.useContext)(s.a),[y,E]=Object(n.useState)(!1),[p,b]=Object(n.useState)(e);async function g(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,price:p}});E(!1),o(e.csrf),c()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},l.a.createElement(i.a,{variant:"h6",style:{marginRight:48}},"ราคาเข้าชม"),y?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(u.a,{style:{marginRight:16},fullWidth:!0,autoFocus:y,value:p,type:"number",onChange:e=>b(e.target.value),onKeyPress:f(g)}),l.a.createElement(w,{disabled:p===e,variant:"contained",buttonColor:x.a,onClick:g},"บันทึก"),l.a.createElement(w,{variant:"text",buttonColor:x.a,onClick:()=>{E(!1),b(e)}},"ยกเลิก")):l.a.createElement(i.a,null,""===e?"-":e," บาท",l.a.createElement(m.a,{className:t.editButton,onClick:()=>E(e=>!e)},l.a.createElement(h.a,{fontSize:"small"})))))},I=({value:e})=>{const t=P(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,_onEnter:u,_parseLocation:f}=Object(n.useContext)(s.a),[y,E]=Object(n.useState)(!1),[p,b]=Object(n.useState)(e),[g,v]=Object(n.useState)(f(e).province),[C,k]=Object(n.useState)(f(e).district),[_,B]=Object(n.useState)(f(e).subdistrict),z={province:g,setProvince:v,district:C,setDistrict:k,subdistrict:_,setSubdistrict:B};return l.a.useEffect(()=>{(g||C||_)&&b(JSON.stringify({province:g,district:C,subdistrict:_}))},[g,C,_]),l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"เขตพื้นที่รับเศษวัสดุเหลือใช้",l.a.createElement(m.a,{className:t.editButton,onClick:()=>{E(e=>!e),b(e),v(f(e).province),k(f(e).district),B(f(e).subdistrict)}},l.a.createElement(h.a,{fontSize:"small"}))),(g||C||_)&&l.a.createElement(i.a,null,g.name,C?` > ${C.name}`:"",_?` > ${_.name} (${_.zip_code})`:""),y&&l.a.createElement("div",{style:{display:"flex",marginTop:12}},l.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},l.a.createElement(O.a,Object.assign({},z)),g&&l.a.createElement(S.a,Object.assign({},z)),g&&C&&l.a.createElement(j.a,Object.assign({},z))),l.a.createElement("div",{style:{marginLeft:16,marginBottom:"auto"}},l.a.createElement(w,{disabled:p===e,variant:"contained",buttonColor:x.a,onClick:async function(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,location:p}});E(!1),o(e.csrf),c()}},"บันทึก"),l.a.createElement(w,{variant:"text",buttonColor:x.a,onClick:function(){E(!1),b(e),v(f(e).province),k(f(e).district),B(f(e).subdistrict)}},"ยกเลิก"))))},R=({appointment:e,auctiondate:t})=>{const a=P(),{csrf:o,setCsrf:r,_xhrPost:c,getGoodsDetail:d,detail:u,_dateToString:f,_dateToAPI:y}=Object(n.useContext)(s.a),[E,p]=Object(n.useState)({appointment:!1,auctiondate:!1});async function b({date:e,keys:t}){const a=await c({csrf:o,url:"abusinesssystem",body:{action:"form_edit",formid:u.formid,[t]:y(e)}});r(a.csrf),d(),p({...E,[t]:!1})}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(i.a,{className:a.dateText,variant:"h6"},"วันนัดดูสินค้า",l.a.createElement(m.a,{className:a.editButton,onClick:()=>p(e=>({...e,appointment:!e.appointment}))},l.a.createElement(h.a,{fontSize:"small"}))),l.a.createElement("div",{style:{width:16}}),l.a.createElement(i.a,{className:a.dateText,variant:"h6"},"วันประมูล",l.a.createElement(m.a,{className:a.editButton,onClick:()=>p(e=>({...e,auctiondate:!e.auctiondate}))},l.a.createElement(h.a,{fontSize:"small"})))),l.a.createElement("div",{style:{display:"flex"}},E.appointment?l.a.createElement(k.a,{className:a.dateText,clearable:!0,size:"small",fullWidth:!0,inputVariant:"outlined",clearLabel:"รีเซ็ต",okLabel:"ตกลง",cancelLabel:"ยกเลิก",value:e,minDateMessage:"",onChange:e=>b({date:e,keys:"appointment"}),labelFunc:()=>e?f(new Date(e)):"เลือกวันที่"}):l.a.createElement(i.a,{className:a.dateText},f(new Date(e))),l.a.createElement("div",{style:{width:16}}),E.auctiondate?l.a.createElement(k.a,{className:a.dateText,clearable:!0,size:"small",fullWidth:!0,inputVariant:"outlined",clearLabel:"รีเซ็ต",okLabel:"ตกลง",cancelLabel:"ยกเลิก",value:t,minDateMessage:"",onChange:e=>b({date:e,keys:"auctiondate"}),labelFunc:()=>t?f(new Date(t)):"เลือกวันที่"}):l.a.createElement(i.a,{className:a.dateText},f(new Date(t)))))},W=({value:e})=>{const t=P(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,businessForm:u}=Object(n.useContext)(s.a),[g,v]=Object(n.useState)(!1),[C,k]=Object(n.useState)(e);return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"ผู้ให้ข้อมูล",l.a.createElement(m.a,{className:t.editButton,onClick:()=>v(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),l.a.createElement(i.a,null,e),l.a.createElement(B,{open:g,onClose:()=>{v(!1),k(e)},title:"แก้ไขผู้ให้ข้อมูล"},l.a.createElement(f.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},l.a.createElement(y.a,{component:"legend"},"ผู้ให้ข้อมูล"),l.a.createElement(E.a,{value:C,onChange:e=>k(e.target.value)},u.position.map((e,t)=>l.a.createElement(p.a,{key:e,value:e,control:l.a.createElement(b.a,{color:"primary"}),label:e})))),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(w,{variant:"text",buttonColor:x.a,onClick:()=>{v(!1),k(e)},style:{margin:8}},"ยกเลิก"),l.a.createElement(w,{disabled:C===e,variant:"contained",buttonColor:x.a,onClick:async function(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,position:C}});v(!1),o(e.csrf),c()},style:{margin:8}},"บันทึก"))))},T=({value:e})=>{const t=P(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,businessForm:E,_onEnter:b}=Object(n.useContext)(s.a),[v,C]=Object(n.useState)(!1),[k,j]=Object(n.useState)(e.transport),[O,S]=Object(n.useState)("none"===e.etc?"":e.etc),_=e=>{const t=[...k];e.target.checked?(t.push(e.target.value),j(t),S(O)):(j(t.filter(t=>t!==(""===e.target.value?"etc":e.target.value))),S(O))};function z(){C(!1),j(e.transport),S("none"===e.etc?"":e.etc)}async function N(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,transport:k,...k.some(e=>"etc"===e)&&{transetc:O}}});C(!1),o(e.csrf),c()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"รถที่ใช้ขนส่ง",l.a.createElement(m.a,{className:t.editButton,onClick:()=>C(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),e.transport.filter(e=>"etc"!==e).map(e=>l.a.createElement(i.a,{key:e},e)),"none"!==e.etc&&l.a.createElement(i.a,null,e.etc),0===e.transport.filter(e=>"etc"!==e).length&&"none"===e.etc&&l.a.createElement(i.a,null,"ไม่มีรถที่ใช้ขนส่ง"),l.a.createElement(B,{open:v,onClose:z,title:"แก้ไขรถที่ใช้ขนส่ง"},l.a.createElement(f.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},l.a.createElement(y.a,{component:"legend"},"รถที่ต้องการใช้ขนส่ง"),E.transport.map((e,t)=>l.a.createElement(p.a,{key:e,value:e,control:l.a.createElement(g.a,{checked:k.some(t=>t===e),color:"primary",onChange:_}),label:e})),k.some(e=>"etc"===e)?l.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},l.a.createElement(g.a,{checked:k.some(e=>"etc"===e),color:"primary",onChange:_}),l.a.createElement(u.a,{fullWidth:!0,autoFocus:"none"!==O,name:"transetc",label:"อื่นๆ",size:"small",value:O,onChange:e=>S(e.target.value),onKeyPress:b(N)})):l.a.createElement(p.a,{value:"etc",control:l.a.createElement(g.a,{checked:k.some(e=>"etc"===e),color:"primary",onChange:_}),label:"อื่นๆ"})),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(w,{variant:"text",buttonColor:x.a,onClick:z,style:{margin:8}},"ยกเลิก"),l.a.createElement(w,{variant:"contained",buttonColor:x.a,onClick:N,style:{margin:8}},"บันทึก"))))},G=({value:e})=>{const t=P(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,businessForm:E,_onEnter:b}=Object(n.useContext)(s.a),[v,C]=Object(n.useState)(!1),[k,j]=Object(n.useState)(e.document),[O,S]=Object(n.useState)("none"===e.etc?"":e.etc),_=e=>{const t=[...k];e.target.checked?(t.push(e.target.value),j(t),S(O)):(j(t.filter(t=>t!==(""===e.target.value?"etc":e.target.value))),S(O))};function z(){C(!1),j(e.document),S("none"===e.etc?"":e.etc)}async function N(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,document:k,...k.some(e=>"etc"===e)&&{docsetc:O}}});C(!1),o(e.csrf),c()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"เอกสาร",l.a.createElement(m.a,{className:t.editButton,onClick:()=>C(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),e.document.filter(e=>"etc"!==e).map(e=>l.a.createElement(i.a,{key:e},e)),"none"!==e.etc&&l.a.createElement(i.a,null,e.etc),0===e.document.filter(e=>"etc"!==e).length&&"none"===e.etc&&l.a.createElement(i.a,null,"ไม่มีเอกสาร"),l.a.createElement(B,{open:v,onClose:z,title:"แก้ไขรถที่ใช้ขนส่ง"},l.a.createElement(f.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},l.a.createElement(y.a,{component:"legend"},"รถที่ต้องการใช้ขนส่ง"),E.document.map((e,t)=>l.a.createElement(p.a,{key:e,value:e,control:l.a.createElement(g.a,{checked:k.some(t=>t===e),color:"primary",onChange:_}),label:e})),k.some(e=>"etc"===e)?l.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},l.a.createElement(g.a,{checked:k.some(e=>"etc"===e),color:"primary",onChange:_}),l.a.createElement(u.a,{fullWidth:!0,autoFocus:"none"!==O,name:"docsetc",label:"อื่นๆ",size:"small",value:O,onChange:e=>S(e.target.value),onKeyPress:b(N)})):l.a.createElement(p.a,{value:"etc",control:l.a.createElement(g.a,{checked:k.some(e=>"etc"===e),color:"primary",onChange:_}),label:"อื่นๆ"})),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(w,{variant:"text",buttonColor:x.a,onClick:z,style:{margin:8}},"ยกเลิก"),l.a.createElement(w,{variant:"contained",buttonColor:x.a,onClick:N,style:{margin:8}},"บันทึก"))))},L=({value:e})=>{const t=P(),{csrf:a,setCsrf:o,_xhrPost:r,getGoodsDetail:c,detail:d,_onEnter:u}=Object(n.useContext)(s.a),[y,g]=Object(n.useState)(!1),[v,C]=Object(n.useState)(e);return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(i.a,{variant:"h6"},"เงื่อนไขการขาย Scarp",l.a.createElement(m.a,{className:t.editButton,onClick:()=>g(e=>!e)},l.a.createElement(h.a,{fontSize:"small"}))),l.a.createElement(i.a,{style:{whiteSpace:"pre-line"}},e),l.a.createElement(B,{open:y,onClose:()=>{g(!1),C(e)},title:"เงื่อนไขการขาย Scarp"},l.a.createElement(f.a,{component:"fieldset",fullWidth:!0,style:{marginBottom:16,marginTop:16}},l.a.createElement(E.a,{value:v,onChange:e=>C(e.target.value)},l.a.createElement(p.a,{value:"เช็คราคา Scarp",control:l.a.createElement(b.a,{color:"primary"}),label:"เช็คราคา Scarp"}),l.a.createElement(p.a,{value:"ขายด่วน",control:l.a.createElement(b.a,{color:"primary"}),label:"ขายด่วน"}),l.a.createElement(p.a,{value:"ขาย (เฉพาะครั้งนี้)",control:l.a.createElement(b.a,{color:"primary"}),label:"ขาย (เฉพาะครั้งนี้)"}),l.a.createElement(p.a,{value:"ขาย (สัญญา 3 เดือน)",control:l.a.createElement(b.a,{color:"primary"}),label:"ขาย (สัญญา 3 เดือน)"}),l.a.createElement(p.a,{value:"ขาย (สัญญา 6 เดือน)",control:l.a.createElement(b.a,{color:"primary"}),label:"ขาย (สัญญา 6 เดือน)"}),l.a.createElement(p.a,{value:"ขาย (สัญญา 1 ปี)",control:l.a.createElement(b.a,{color:"primary"}),label:"ขาย (สัญญา 1 ปี)"}))),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(w,{disabled:v===e,variant:"contained",buttonColor:x.a,onClick:async function(){const e=await r({csrf:a,url:"abusinesssystem",body:{action:"form_edit",formid:d.formid,sale_condition:v}});o(e.csrf),g(!1),c()},style:{marginBottom:"auto"}},"บันทึก"),l.a.createElement(w,{variant:"text",buttonColor:x.a,onClick:()=>{g(!1),C(e)},style:{marginBottom:"auto"}},"ยกเลิก"))))};t.default=({detail:e})=>{P();const{csrf:t,setCsrf:a,_xhrPost:o,getFormImg:r}=Object(n.useContext)(s.a),[c,m]=Object(n.useState)(null),[d,u]=Object(n.useState)(null),f={...Object(n.useContext)(s.a),getGoodsDetail:y,detail:e,businessForm:d};async function y(){const n=await o({csrf:t,url:"aloadbusiness",body:{action:"form_detail",formid:e.formid}});m(n.data);const l=await o({csrf:n.csrf,url:"aloadbusiness",body:{action:"business_form"}});a(l.csrf),u(l.data)}return Object(n.useEffect)(()=>{e&&y()},[e]),c&&d?l.a.createElement(s.a.Provider,{value:f},l.a.createElement(l.a.Fragment,null,"status"in c&&"wrong formid"!==c.status?l.a.createElement("div",null,l.a.createElement(z,{value:c}),l.a.createElement(v.a,{style:{margin:"16px 0"}}),c.filelist&&c.filelist.length>0&&l.a.createElement(_.default,{thisFormId:e.formid,files:c.filelist.map(t=>r({userid:c.userid,formid:e.formid,file:t}))}),l.a.createElement(N,{value:c.business_name}),l.a.createElement(D,{remain:c.accessremain,total:c.accesstotal}),l.a.createElement(F,{value:c.price}),l.a.createElement(I,{value:c.location}),l.a.createElement(R,{appointment:c.appointment,auctiondate:c.auctiondate}),l.a.createElement(W,{value:c.position}),l.a.createElement(T,{value:c.transport}),l.a.createElement(G,{value:c.document}),l.a.createElement(L,{value:c.sale_condition})):l.a.createElement(i.a,{style:{margin:"24px 0"},align:"center",variant:"h4",color:"textSecondary"},"ไม่มีสินค้า"))):l.a.createElement("div",null)}}}]);