(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{125:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(10),i=a(20),o=a(133);t.default=({children:e,variant:t,buttonColor:a,light:l=!1,...s})=>{const c=Object(i.a)();function m(e){switch(e){case"text":return{color:a?a[600]:c.palette.text.primary,"&:hover":{backgroundColor:a?a[l?100:50]:c.palette.action.hover}};case"contained":return{color:a?c.palette.getContrastText(a[l?700:600]):c.palette.text.primary,backgroundColor:a?a[l?600:500]:c.palette.background.default,"&:hover":{backgroundColor:a?a[l?800:700]:c.palette.action.hover}};case"outlined":return{color:a?a[600]:c.palette.text.primary,border:`1px solid ${a?a[600]:c.palette.text.primary}`,"&:hover":{backgroundColor:a?a[l?100:50]:c.palette.action.hover}};default:return{color:c.palette.text.primary,"&:hover":{backgroundColor:c.palette.action.hover}}}}const d=Object(r.a)(e=>({root:{...m(t)}}))(o.a);return n.a.createElement(d,Object.assign({},s,{variant:t}),e)}},553:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(26),i=a.n(r),o=a(104),s=a(31),c=a(103),m=a(137),d=a(163),u=a(162),g=a(142),y=a(260),f=a(149),p=a(257),h=a(229),E=a(38),b=a(39),v=a(157),x=a.n(v),C=a(125);const w=i()({loader:()=>Promise.all([a.e(0),a.e(35)]).then(a.bind(null,134)),loading:()=>null}),W=Object(o.a)(e=>({paper:{padding:8},itemGrid:{margin:e.spacing(1,0),minWidth:800,padding:12},itemPaper:{position:"relative",padding:16,display:"flex",alignItems:"center"},avatar:{width:72,height:72,marginRight:16},textField:{marginBottom:12},itemDescription:{display:"flex",marginBottom:8}}));function j(e){const{inputRef:t,...a}=e;return n.a.createElement(x.a,Object.assign({},a,{ref:e=>{t(e?e.inputElement:null)},mask:["(",/[0-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],placeholderChar:" "}))}const k=e=>{const t=W(),{_dateToString:a,stringToPhone:r,_thousandSeperater:i}=Object(l.useContext)(s.a),{detail:o,setEditing:y}=e,f=o.info;return n.a.createElement(c.a,{elevation:1===f.status?3:0,style:{...0===f.status&&{backgroundColor:"inherit",opacity:.7}}},n.a.createElement("div",{className:t.itemPaper},n.a.createElement(m.a,{style:{position:"absolute",top:0,right:0},onClick:()=>y(!0)},n.a.createElement(p.a,null)),n.a.createElement(d.a,{className:t.avatar,src:f.picture}),n.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},n.a.createElement(u.a,{style:{flex:1,fontWeight:600},align:"left"},1===f.status?"":"(ไม่ได้ใช้งานแล้ว)",`${f.fullname} ${f.lastname} ( ${f.displayname} )`),n.a.createElement(u.a,{align:"left",color:"textSecondary"},f.statusmassage),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(u.a,{align:"left",variant:"body2",color:"textSecondary",style:{marginRight:16}},"สมัครเมื่อวันที่"),n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},a(f.registerdate))),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(u.a,{align:"left",variant:"body2",color:"textSecondary",style:{marginRight:16}},"เบอร์โทรศัพท์"),n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700,marginRight:24}},r(`0${f.tel}`)))),n.a.createElement(u.a,{align:"left"},"เงินคงเหลือ"),n.a.createElement(u.a,{variant:"h6",style:{width:100,marginRight:16,...f.frequencyform>3&&{color:E.a[600],fontWeight:700}},align:"right"},i(f.balance)),n.a.createElement(u.a,null,"บาท")),n.a.createElement(g.a,null),n.a.createElement("div",{className:t.itemPaper},n.a.createElement("div",{style:{width:88}}),n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement("div",{className:t.itemDescription},n.a.createElement(u.a,{align:"left",variant:"body2",color:"textSecondary",style:{width:100}},"ชื่อกิจการ"),n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},f.business_name)),n.a.createElement("div",{className:t.itemDescription},n.a.createElement(u.a,{align:"left",variant:"body2",color:"textSecondary",style:{width:100}},"ประเภทกิจการ"),n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},f.business_type)),n.a.createElement("div",{className:t.itemDescription},n.a.createElement(u.a,{align:"left",variant:"body2",color:"textSecondary",style:{width:100}},"สถานที่"),n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},f.location)),n.a.createElement("div",{className:t.itemDescription},n.a.createElement(u.a,{align:"left",variant:"body2",color:"textSecondary",style:{width:100}},"ขนาดองค์กร"),n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},f.org_size)),n.a.createElement("div",{className:t.itemDescription},n.a.createElement(u.a,{align:"left",variant:"body2",color:"textSecondary",style:{width:100}},"รถที่ใช้ขนส่ง"),n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},f.transport.transport.filter(e=>"etc"!==e).map(e=>n.a.createElement(u.a,{key:e,align:"left",variant:"body2",style:{fontWeight:700}},e)),"none"!==f.transport.etc&&n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},f.transport.etc),0===f.transport.transport.filter(e=>"etc"!==e).length&&"none"!==f.transport.etc&&n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},"ไม่มีรถที่ใช้ขนส่ง"))),n.a.createElement("div",{className:t.itemDescription},n.a.createElement(u.a,{align:"left",variant:"body2",color:"textSecondary",style:{width:100}},"เอกสาร"),n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},f.document.document.filter(e=>"etc"!==e).map(e=>n.a.createElement(u.a,{key:e,align:"left",variant:"body2",style:{fontWeight:700}},e)),"none"!==f.document.etc&&n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},f.document.etc),0===f.document.document.filter(e=>"etc"!==e).length&&"none"!==f.document.etc&&n.a.createElement(u.a,{align:"left",variant:"body2",style:{fontWeight:700}},"ไม่มีเอกสาร"))))))},O=e=>{const t=W(),{csrf:a,setCsrf:r,_xhrPost:i,_dateToString:o,stringToPhone:c,phoneFormatToNumber:m}=Object(l.useContext)(s.a),{data:d,setEditing:p,getBaseDetail:h,match:E}=e,{info:v}=d,{customerid:x}=E.params,[w,k]=Object(l.useState)({...v,tel:c(`0${v.tel}`)});async function O(e){const{params:t}=E,l={action:"base_edit",customerid:x,status:e},n=await i({csrf:a,url:"acustomersystem",body:l});r(n.csrf),h(),p(!1)}return n.a.createElement("div",null,n.a.createElement("div",{style:{display:"flex",marginBottom:12,alignItems:"baseline"}},n.a.createElement(u.a,{style:{width:100}},"สถานะบัญชี"),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(y.a,Object.assign({label:"เปิดการใช้งาน",style:{marginRight:4,...1===v.status&&{color:"white"}}},0===v.status&&{variant:"outlined"},1===v.status&&{color:"primary"},{onClick:()=>O(1)})),n.a.createElement(y.a,Object.assign({label:"ปิดการใช้งาน",style:{...0===v.status&&{color:"white"}}},1===v.status&&{variant:"outlined"},0===v.status&&{color:"primary"},{onClick:()=>O(0)})))),n.a.createElement(g.a,{style:{margin:"16px 0"}}),n.a.createElement(f.a,{className:t.textField,fullWidth:!0,label:"ชื่อที่แสดง",value:w.displayname,onChange:e=>k({...w,displayname:e.target.value})}),n.a.createElement(f.a,{className:t.textField,fullWidth:!0,label:"ชื่อ",value:w.fullname,onChange:e=>k({...w,fullname:e.target.value})}),n.a.createElement(f.a,{className:t.textField,fullWidth:!0,label:"นามสกุล",value:w.lastname,onChange:e=>k({...w,lastname:e.target.value})}),n.a.createElement(g.a,{style:{margin:"16px 0"}}),n.a.createElement(f.a,{className:t.textField,fullWidth:!0,label:"เบอร์โทรศัพท์",InputProps:{inputComponent:j},value:w.tel,onChange:e=>k({...w,tel:e.target.value})}),n.a.createElement(g.a,{style:{margin:"12px 0"}}),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(C.default,{buttonColor:b.a,variant:"outlined",style:{flex:1,margin:8},onClick:()=>{k({...d,tel:`0${v.tel}`}),p(!1)}},"ยกเลิก"),n.a.createElement(C.default,{buttonColor:b.a,variant:"contained",style:{flex:1,margin:8},onClick:async function(){const{params:e}=E,t={action:"base_edit",customerid:x},l=["displayname","fullname","lastname","business_name"];for(var n=0;n<l.length;n++)w[l[n]]!==d[l[n]]&&Object.assign(t,{[l[n]]:w[l[n]]});w.tel!==`0${v.tel}`&&Object.assign(t,{tel:m(w.tel)});const o=await i({csrf:a,url:"acustomersystem",body:t});r(o.csrf),h(),p(!1)},disabled:function(){const e=["displayname","fullname","lastname","business_name"],t=[];for(var a=0;a<e.length;a++)w[e[a]]!==d[e[a]]&&t.push(w[e[a]]);return m(w.tel)!==`0${v.tel}`&&t.push(w[e[a]]),0===t.length}()},"บันทึก")))};t.default=e=>{const t=W(),{match:a,history:r}=e,{csrf:i,setCsrf:o,_xhrPost:c,_onLocalhostFn:d}=Object(l.useContext)(s.a),[u,g]=Object(l.useState)(null),[y,f]=Object(l.useState)(!1);async function p(){const{params:e}=a,t=await c({csrf:i,url:"aloadcustomer",body:{action:"base_detail",customerid:parseInt(e.customerid)}});o(t.csrf),g(t.data)}return Object(l.useEffect)(()=>{p(),async function(){const{params:e}=a,t=await c({csrf:i,url:"aloadcustomer",body:{action:"accessformlist",customerid:parseInt(e.customerid)}});o(t.csrf)}()},[]),n.a.createElement("div",null,n.a.createElement(m.a,{onClick:()=>r.replace("/admin/customer_list")},n.a.createElement(h.a,null)),n.a.createElement("div",{className:t.itemGrid},u&&n.a.createElement(k,Object.assign({},{detail:u,setEditing:f}))),n.a.createElement(w,{open:y,onClose:()=>f(!1),title:"แก้ไขข้อมูล"},u&&n.a.createElement(O,Object.assign({data:u},{setEditing:f,getBaseDetail:p,match:a}))))}}}]);