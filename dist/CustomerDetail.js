(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(10),s=a(20),r=a(145);t.default=({children:e,variant:t,buttonColor:a,light:n=!1,...o})=>{const c=Object(s.a)();function m(e){switch(e){case"text":return{color:a?a[600]:c.palette.text.primary,"&:hover":{backgroundColor:a?a[n?100:50]:c.palette.action.hover}};case"contained":return{color:a?c.palette.getContrastText(a[n?700:600]):c.palette.text.primary,backgroundColor:a?a[n?600:500]:c.palette.background.default,"&:hover":{backgroundColor:a?a[n?800:700]:c.palette.action.hover}};case"outlined":return{color:a?a[600]:c.palette.text.primary,border:`1px solid ${a?a[600]:c.palette.text.primary}`,"&:hover":{backgroundColor:a?a[n?100:50]:c.palette.action.hover}};default:return{color:c.palette.text.primary,"&:hover":{backgroundColor:c.palette.action.hover}}}}const u=Object(i.a)(e=>({root:{...m(t)}}))(r.a);return l.a.createElement(u,Object.assign({},o,{variant:t}),e)}},131:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(60),s=a(189),r=a(168),o=a(139),c=a(190),m=a(161),u=a(176),d=a(191),g=a(145),p=a(166),y=a(177),f=a(38),b=a(124);const E=Object(i.a)(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},avatar:{width:"auto",height:"auto",padding:12,marginBottom:8},deleteIcon:{fontSize:56,color:"white"}}));t.default=e=>{const t=E(),{open:a=!1,onClose:n,children:i,title:v,type:h,headIcon:C=p.a,headIconColor:x=f.a,maxWidth:O="xs",dividers:j=!1,submitButtonColor:S=f.a,submitText:k="ลบ",cancelText:B="ยกเลิก",onCancel:_=n,onSubmit:w,other:D}=e;return l.a.createElement(s.a,Object.assign({scroll:"body",open:a,onClose:n,maxWidth:O,fullWidth:!0},D),l.a.createElement(r.a,null,l.a.createElement(o.a,{className:t.closeButton,onClick:n},l.a.createElement(y.a,null))),l.a.createElement(c.a,{dividers:j},l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement(m.a,{className:t.avatar,style:{backgroundColor:x[500]}},l.a.createElement(C,{className:t.deleteIcon}))),l.a.createElement(u.a,{variant:"h6",align:"center"},v),l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},i)),l.a.createElement(d.a,{style:{justifyContent:"center",margin:"16px 0"}},l.a.createElement(g.a,{size:"large",style:{marginRight:8},color:"primary",onClick:_},B),l.a.createElement(b.default,{size:"large",variant:"contained",buttonColor:S,onClick:w},k)))}},169:function(e,t,a){"use strict";var n=a(0),l=a.n(n),i=a(104),s=a(28),r=a(377),o=a(149);const c=Object(i.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=c(),{province:a,setProvince:i,setDistrict:m,setSubdistrict:u}=e,{csrf:d,setCsrf:g,_xhrGetP:p}=Object(n.useContext)(s.a),[y,f]=l.a.useState(!1),[b,E]=l.a.useState([]),v=y&&0===b.length;return l.a.useEffect(()=>{let e=!0;if(v)return(async()=>{const t=await p("https://easyrecycle.ml/user/location?type=provinces");g(t.csrf),e&&E(t.data)})(),()=>{e=!1}},[v]),l.a.useEffect(()=>{y||E([])},[y]),l.a.createElement(r.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:y,onOpen:()=>{f(!0)},onClose:()=>{f(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:b,loading:v,onChange:function(e,t){i(t),m(null),u(null)},noOptionsText:"ไม่มีจังหวัดที่คุณค้นหา",renderInput:e=>l.a.createElement(o.a,Object.assign({},e,{label:"จังหวัด",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},170:function(e,t,a){"use strict";var n=a(0),l=a.n(n),i=a(104),s=a(28),r=a(377),o=a(149);const c=Object(i.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=c(),{district:a,province:i,setDistrict:m,setSubdistrict:u}=e,{csrf:d,setCsrf:g,_xhrGetP:p}=Object(n.useContext)(s.a),[y,f]=l.a.useState(!1),[b,E]=l.a.useState([]),v=y&&0===b.length;return l.a.useEffect(()=>{let e=!0;if(v)return(async()=>{const t=await p(`https://easyrecycle.ml/user/location?type=districts&provincesid=${i.id}`);g(t.csrf),e&&E(t.data)})(),()=>{e=!1}},[v,i]),l.a.useEffect(()=>{y||E([])},[y]),l.a.createElement(r.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:y,onOpen:()=>{f(!0)},onClose:()=>{f(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:b,loading:v,onChange:function(e,t){m(t),u(null)},noOptionsText:"ไม่มีเขต/อำเภอที่คุณค้นหา",renderInput:e=>l.a.createElement(o.a,Object.assign({},e,{label:"เขต/อำเภอ",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},171:function(e,t,a){"use strict";var n=a(0),l=a.n(n),i=a(104),s=a(28),r=a(377),o=a(149);const c=Object(i.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=c(),{subdistrict:a,district:i,setSubdistrict:m}=e,{csrf:u,setCsrf:d,_xhrGetP:g}=Object(n.useContext)(s.a),[p,y]=l.a.useState(!1),[f,b]=l.a.useState([]),E=p&&0===f.length;return l.a.useEffect(()=>{let e=!0;if(E)return(async()=>{const t=await g(`https://easyrecycle.ml/user/location?type=subdistricts&districtsid=${i.id}`);d(t.csrf),e&&b(t.data)})(),()=>{e=!1}},[E,i]),l.a.useEffect(()=>{p||b([])},[p]),l.a.createElement(r.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:p,onOpen:()=>{y(!0)},onClose:()=>{y(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:f,loading:E,onChange:function(e,t){m(t)},noOptionsText:"ไม่มีตำบลที่คุณค้นหา",renderInput:e=>l.a.createElement(o.a,Object.assign({},e,{label:"ตำบล",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},597:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(26),s=a.n(i),r=a(104),o=a(28),c=a(145),m=a(103),u=a(139),d=a(161),g=a(176),p=a(151),y=a(149),f=a(629),b=a(147),E=a(379),v=a(257),h=a(378),C=a(608),x=a(216),O=a(304),j=a(160),S=a(275),k=a(38),B=a(39),_=a(162),w=a.n(_),D=a(124),W=a(131),P=a(169),z=a(170),N=a(171);const $=s()({loader:()=>Promise.all([a.e(0),a.e(37)]).then(a.bind(null,134)),loading:()=>null}),F=Object(r.a)(e=>({paper:{padding:8},itemGrid:{margin:e.spacing(1,0),minWidth:800,padding:12},itemPaper:{position:"relative",padding:16,display:"flex",alignItems:"center"},avatar:{width:72,height:72,marginRight:16},textField:{marginBottom:12},itemDescription:{display:"flex",marginBottom:8},docsItem:{padding:0,minWidth:"auto",textDecoration:"none","&:hover":{textDecoration:"underline"}},editButton:{padding:6,marginBottom:6,marginLeft:8},dateText:{width:"50%"}}));function I(e){const{inputRef:t,...a}=e;return l.a.createElement(w.a,Object.assign({},a,{ref:e=>{t(e?e.inputElement:null)},mask:["(",/[0-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],placeholderChar:" "}))}const R={id_card:"บัตรประชาชน",house_regist:"สำเนาทะเบียนบ้าน",access:"ใบอนุญาติค้าของเก่า",cert_book:"หนังสือรับรองบริษัท",doc_20:"ภพ. 20",doc_105:"ใบรง. 4 ลำดับที่ 105",doc_106:"ใบรง. 4 ลำดับที่ 106"},T=({data:e,customerid:t,getBaseDetail:a})=>{const i=F(),s=e.split(".")[0],{sess:r,_xhrPost:m,csrf:u,setCsrf:d}=Object(n.useContext)(o.a),[g,p]=Object(n.useState)(!1),[y,f]=Object(n.useState)(!1);function b(){f(!1)}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:()=>p(!0)},l.a.createElement(c.a,{variant:"text",color:"primary",className:i.docsItem},R[s])),l.a.createElement($,{open:g,onClose:()=>p(!1),title:R[s],maxWidth:"md"},l.a.createElement("div",{style:{marginBottom:16}},l.a.createElement(D.default,{buttonColor:k.a,variant:"contained",onClick:function(){f(!0)}},"ลบเอกสาร")),l.a.createElement("img",{style:{width:"100%",maxHeight:"calc(100% - 64px)"},src:`https://easyrecycle.ml/customer/${t}/${e}`,alt:R[s]})),l.a.createElement(W.default,{type:"delete",open:y,onClose:b,onCancel:b,onSubmit:async function(){const e={action:"deldocs",customerid:t,docstype:s},n=await m({csrf:u,url:"acustomersystem",body:e});d(n.csrf),"success"===n.data.status&&(a(),b())},title:"คุณแน่ใจหรือไม่ว่าต้องการจะลบเอกสาร ?"},l.a.createElement("img",{style:{width:"100%"},src:`https://easyrecycle.ml/customer/${t}/${e}`,alt:R[s]})))},L=e=>{const t=F(),{_dateToString:a,stringToPhone:i,_thousandSeperater:s,_parseLocation:r}=Object(n.useContext)(o.a),{detail:c,setEditing:y,inputForm:f}=e,b=c.info,E=c.docs;return l.a.createElement(m.a,{elevation:1===b.status?3:0,style:{...0===b.status&&{backgroundColor:"inherit",opacity:.7}}},l.a.createElement("div",{className:t.itemPaper},f&&l.a.createElement(u.a,{style:{position:"absolute",top:0,right:0},onClick:()=>y(!0)},l.a.createElement(O.a,null)),l.a.createElement(d.a,{className:t.avatar,src:b.picture}),l.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},l.a.createElement(g.a,{style:{flex:1,fontWeight:600},align:"left"},1===b.status?"":"(ไม่ได้ใช้งานแล้ว)",`${b.fullname} ${b.lastname} ( ${b.displayname} )`),l.a.createElement(g.a,{align:"left",color:"textSecondary"},b.statusmassage),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{marginRight:16}},"สมัครเมื่อวันที่"),l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},a(b.registerdate))),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{marginRight:16}},"เบอร์โทรศัพท์"),l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700,marginRight:24}},i(`0${b.tel}`)))),l.a.createElement(g.a,{align:"left"},"เงินคงเหลือ"),l.a.createElement(g.a,{variant:"h6",style:{width:100,marginRight:16,...b.frequencyform>3&&{color:k.a[600],fontWeight:700}},align:"right"},s(b.balance)),l.a.createElement(g.a,null,"บาท")),l.a.createElement(p.a,null),l.a.createElement("div",{className:t.itemPaper},l.a.createElement("div",{style:{width:88}}),l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("div",{className:t.itemDescription},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{minWidth:100}},"ชื่อกิจการ"),l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},b.business_name)),l.a.createElement("div",{className:t.itemDescription},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{minWidth:100}},"ประเภทกิจการ"),l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},b.business_type)),l.a.createElement("div",{className:t.itemDescription},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{minWidth:100}},"สถานที่"),l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},r(b.location).label)),l.a.createElement("div",{className:t.itemDescription},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{minWidth:100}},"ขนาดองค์กร"),l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},b.org_size)),l.a.createElement("div",{className:t.itemDescription},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{minWidth:100}},"รถที่ใช้ขนส่ง"),l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},b.transport.transport.filter(e=>"etc"!==e).map(e=>l.a.createElement(g.a,{key:e,align:"left",variant:"body2",style:{fontWeight:700}},e)),"none"!==b.transport.etc&&l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},b.transport.etc),0===b.transport.transport.filter(e=>"etc"!==e).length&&"none"!==b.transport.etc&&l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},"ไม่มีรถที่ใช้ขนส่ง"))),l.a.createElement("div",{className:t.itemDescription},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{minWidth:100}},"เอกสาร"),l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},b.document.document.filter(e=>"etc"!==e).map(e=>l.a.createElement(g.a,{key:e,align:"left",variant:"body2",style:{fontWeight:700}},e)),"none"!==b.document.etc&&l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},b.document.etc),0===b.document.document.filter(e=>"etc"!==e).length&&"none"!==b.document.etc&&l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},"ไม่มีเอกสาร"))),l.a.createElement("div",{className:t.itemDescription},l.a.createElement(g.a,{align:"left",variant:"body2",color:"textSecondary",style:{minWidth:100}},"ไฟล์"),E&&(E.filter(e=>"webp"!==e.split(".")[1]&&"topup"!==e&&"log.txt"!==e).length>0?l.a.createElement("div",null,E.filter(e=>"webp"!==e.split(".")[1]&&"topup"!==e&&"log.txt"!==e).map((t,a)=>l.a.createElement(T,Object.assign({key:t,data:t},e)))):l.a.createElement(g.a,{align:"left",variant:"body2",style:{fontWeight:700}},"ไม่มีไฟล์"))))))},K=e=>{const t=F(),{value:a,label:i,customerid:s,getBaseDetail:r,keys:c}=e,{csrf:m,setCsrf:d,_xhrPost:p,_onEnter:f}=Object(n.useContext)(o.a),[b,E]=Object(n.useState)(a),[v,h]=Object(n.useState)(!1);async function C(){const e={action:"base_edit",customerid:s,[c]:b},t=await p({csrf:m,url:"acustomersystem",body:e});d(t.csrf),h(!1),r()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(g.a,{variant:"h6"},i,l.a.createElement(u.a,{className:t.editButton,onClick:()=>h(e=>!e)},l.a.createElement(j.a,{fontSize:"small"}))),v?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(y.a,{style:{marginRight:16},fullWidth:!0,autoFocus:v,value:b,onChange:e=>E(e.target.value),onKeyPress:f(C)}),l.a.createElement(D.default,{disabled:b===a,variant:"contained",buttonColor:B.a,onClick:C},"บันทึก"),l.a.createElement(D.default,{variant:"text",buttonColor:B.a,onClick:()=>{h(!1),E(a)}},"ยกเลิก")):l.a.createElement(g.a,{style:{whiteSpace:"pre-line"}},a))},G=e=>{const t=F(),{value:a,customerid:i,getBaseDetail:s,keys:r}=e,{csrf:c,setCsrf:m,_xhrPost:d,_onEnter:p,stringToPhone:f,phoneFormatToNumber:b}=Object(n.useContext)(o.a),[E,v]=Object(n.useState)(f(`0${a}`)),[h,C]=Object(n.useState)(!1);async function x(){const e={action:"base_edit",customerid:i,[r]:b(E)},t=await d({csrf:c,url:"acustomersystem",body:e});m(t.csrf),C(!1),s()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(g.a,{variant:"h6"},"เบอร์โทรศัพท์",l.a.createElement(u.a,{className:t.editButton,onClick:()=>C(e=>!e)},l.a.createElement(j.a,{fontSize:"small"}))),h?l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(y.a,{style:{marginRight:16},fullWidth:!0,autoFocus:h,value:E,onChange:e=>v(e.target.value),onKeyPress:p(x),InputProps:{inputComponent:I}}),l.a.createElement(D.default,{disabled:b(E)!==`0${a}`,variant:"contained",buttonColor:B.a,onClick:x},"บันทึก"),l.a.createElement(D.default,{variant:"text",buttonColor:B.a,onClick:()=>{C(!1),v(a)}},"ยกเลิก")):l.a.createElement(g.a,{style:{whiteSpace:"pre-line"}},a))},J=e=>{const t=F(),{value:a,label:i,customerid:s,getBaseDetail:r,keys:c,inputForm:m}=e,{csrf:d,setCsrf:p,_xhrPost:y}=Object(n.useContext)(o.a),[C,x]=Object(n.useState)(!1),[O,S]=Object(n.useState)(a);return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(g.a,{variant:"h6"},i,l.a.createElement(u.a,{className:t.editButton,onClick:()=>x(e=>!e)},l.a.createElement(j.a,{fontSize:"small"}))),l.a.createElement(g.a,null,a),l.a.createElement($,{open:C,onClose:()=>{x(!1),S(a)},title:`แก้ไข${i}`},l.a.createElement(f.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},l.a.createElement(b.a,{component:"legend"},i),l.a.createElement(E.a,{value:O,onChange:e=>S(e.target.value)},m.business_type.map((e,t)=>l.a.createElement(v.a,{key:e,value:e,control:l.a.createElement(h.a,{color:"primary"}),label:e})))),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(D.default,{variant:"text",buttonColor:B.a,onClick:()=>{x(!1),S(a)},style:{margin:8}},"ยกเลิก"),l.a.createElement(D.default,{disabled:O===a,variant:"contained",buttonColor:B.a,onClick:async function(){const e={action:"base_edit",customerid:s,[c]:O},t=await y({csrf:d,url:"acustomersystem",body:e});p(t.csrf),x(!1),r()},style:{margin:8}},"บันทึก"))))},q=e=>{const t=F(),{value:a,label:i,customerid:s,getBaseDetail:r,keys:c,etcKeys:m,inputForm:d}=e,{csrf:p,setCsrf:E,_xhrPost:h,_onEnter:x}=Object(n.useContext)(o.a),[O,S]=Object(n.useState)(!1),[k,_]=Object(n.useState)(a[c]),[w,W]=Object(n.useState)("none"===a.etc?"":a.etc),P=e=>{const t=[...k];e.target.checked?(t.push(e.target.value),_(t),W(w)):(_(t.filter(t=>t!==(""===e.target.value?"etc":e.target.value))),W(w))};function z(){S(!1),_(a.transport),W("none"===a.etc?"":a.etc)}async function N(){const e={action:"base_edit",customerid:s,[c]:k,...k.some(e=>"etc"===e)&&{[m]:w}},t=await h({csrf:p,url:"acustomersystem",body:e});E(t.csrf),S(!1),r()}return l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(g.a,{variant:"h6"},i,l.a.createElement(u.a,{className:t.editButton,onClick:()=>S(e=>!e)},l.a.createElement(j.a,{fontSize:"small"}))),a[c].filter(e=>"etc"!==e).map(e=>l.a.createElement(g.a,{key:e},e)),"none"!==a.etc&&l.a.createElement(g.a,null,a.etc),0===a[c].filter(e=>"etc"!==e).length&&"none"===a.etc&&l.a.createElement(g.a,null,`ไม่มี${i}`),l.a.createElement($,{open:O,onClose:z,title:`แก้ไข${i}`},l.a.createElement(f.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},l.a.createElement(b.a,{component:"legend"},i),d[c].map((e,t)=>l.a.createElement(v.a,{key:e,value:e,control:l.a.createElement(C.a,{checked:k.some(t=>t===e),color:"primary",onChange:P}),label:e})),k.some(e=>"etc"===e)?l.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},l.a.createElement(C.a,{checked:k.some(e=>"etc"===e),color:"primary",onChange:P}),l.a.createElement(y.a,{fullWidth:!0,autoFocus:"none"!==w,name:m,label:"อื่นๆ",size:"small",value:w,onChange:e=>W(e.target.value),onKeyPress:x(N)})):l.a.createElement(v.a,{value:"etc",control:l.a.createElement(C.a,{checked:k.some(e=>"etc"===e),color:"primary",onChange:P}),label:"อื่นๆ"})),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(D.default,{variant:"text",buttonColor:B.a,onClick:z,style:{margin:8}},"ยกเลิก"),l.a.createElement(D.default,{variant:"contained",buttonColor:B.a,onClick:N,style:{margin:8}},"บันทึก"))))},A=e=>{const t=F(),{csrf:a,setCsrf:i,_xhrPost:s,_parseLocation:r}=Object(n.useContext)(o.a),{value:c,customerid:m,getBaseDetail:d}=e,[p,y]=Object(n.useState)(!1),[f,b]=Object(n.useState)(c),[E,v]=Object(n.useState)(r(c).province),[h,C]=Object(n.useState)(r(c).district),[x,O]=Object(n.useState)(r(c).subdistrict),S={province:E,setProvince:v,district:h,setDistrict:C,subdistrict:x,setSubdistrict:O};return l.a.useEffect(()=>{(E||h||x)&&b(JSON.stringify({province:E,district:h,subdistrict:x}))},[E,h,x]),l.a.createElement("div",{style:{marginBottom:12}},l.a.createElement(g.a,{variant:"h6"},"สถานที่",l.a.createElement(u.a,{className:t.editButton,onClick:()=>{y(e=>!e),b(c),v(r(c).province),C(r(c).district),O(r(c).subdistrict)}},l.a.createElement(j.a,{fontSize:"small"}))),(E||h||x)&&l.a.createElement(g.a,null,E.name,h?` > ${h.name}`:"",x?` > ${x.name} (${x.zip_code})`:""),p&&l.a.createElement("div",{style:{display:"flex",marginTop:12}},l.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},l.a.createElement(P.a,Object.assign({},S)),E&&l.a.createElement(z.a,Object.assign({},S)),E&&h&&l.a.createElement(N.a,Object.assign({},S))),l.a.createElement("div",{style:{marginLeft:16,marginBottom:"auto"}},l.a.createElement(D.default,{disabled:f===c,variant:"contained",buttonColor:B.a,onClick:async function(){const e={action:"base_edit",customerid:m,location:f},t=await s({csrf:a,url:"acustomersystem",body:e});i(t.csrf),y(!1),d()}},"บันทึก"),l.a.createElement(D.default,{variant:"text",buttonColor:B.a,onClick:function(){y(!1),b(c),v(r(c).province),C(r(c).district),O(r(c).subdistrict)}},"ยกเลิก"))))},H=e=>{F();const{csrf:t,setCsrf:a,_xhrPost:i}=Object(n.useContext)(o.a),{data:s,setEditing:r,getBaseDetail:c,match:m,inputForm:u}=e,{info:d}=s,{customerid:y}=m.params;async function f(e){const{params:n}=m,l={action:"base_edit",customerid:y,status:e},s=await i({csrf:t,url:"acustomersystem",body:l});a(s.csrf),c(),r(!1)}return l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",marginBottom:12,alignItems:"baseline"}},l.a.createElement(g.a,{style:{minWidth:100}},"สถานะบัญชี"),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(x.a,Object.assign({label:"เปิดการใช้งาน",style:{marginRight:4,...1===d.status&&{color:"white"}}},0===d.status&&{variant:"outlined"},1===d.status&&{color:"primary"},{onClick:()=>f(1)})),l.a.createElement(x.a,Object.assign({label:"ปิดการใช้งาน",style:{...0===d.status&&{color:"white"}}},1===d.status&&{variant:"outlined"},0===d.status&&{color:"primary"},{onClick:()=>f(0)})))),l.a.createElement(p.a,{style:{margin:"16px 0"}}),l.a.createElement(K,Object.assign({value:d.displayname,label:"ชื่อที่แสดง",keys:"displayname"},{customerid:y,getBaseDetail:c})),l.a.createElement(K,Object.assign({value:d.fullname,label:"ชื่อ",keys:"fullname"},{customerid:y,getBaseDetail:c})),l.a.createElement(K,Object.assign({value:d.lastname,label:"นามสกุล",keys:"lastname"},{customerid:y,getBaseDetail:c})),l.a.createElement(K,Object.assign({value:d.statusmassage,label:"ข้อความสถานะ",keys:"statusmassage"},{customerid:y,getBaseDetail:c})),l.a.createElement(G,Object.assign({value:d.tel,keys:"tel"},{customerid:y,getBaseDetail:c})),l.a.createElement(p.a,{style:{margin:"16px 0"}}),l.a.createElement(K,Object.assign({value:d.business_name,label:"ชื่อกิจการ",keys:"business_name"},{customerid:y,getBaseDetail:c})),l.a.createElement(J,Object.assign({value:d.business_type,label:"ประเภทกิจการ",keys:"business_type"},{customerid:y,getBaseDetail:c,inputForm:u})),l.a.createElement(J,Object.assign({value:d.org_size,label:"ขนาดองค์กร",keys:"org_size"},{customerid:y,getBaseDetail:c,inputForm:u})),l.a.createElement(A,Object.assign({value:d.location},{customerid:y,getBaseDetail:c})),l.a.createElement(q,Object.assign({value:d.transport,label:"รถที่ใช้ขนส่ง",keys:"transport",etcKeys:"transetc"},{customerid:y,getBaseDetail:c,inputForm:u})),l.a.createElement(q,Object.assign({value:d.document,label:"เอกสาร",keys:"document",etcKeys:"docsetc"},{customerid:y,getBaseDetail:c,inputForm:u})))};t.default=e=>{const t=F(),{match:a,history:i}=e,{params:s}=a,r=parseInt(s.customerid),{csrf:c,setCsrf:m,_xhrPost:d,_onLocalhostFn:g}=Object(n.useContext)(o.a),[p,y]=Object(n.useState)(null),[f,b]=Object(n.useState)(!1),[E,v]=Object(n.useState)(null);async function h(){const e=await d({csrf:c,url:"aloadcustomer",body:{action:"base_detail",customerid:r}});y(e.data),async function(e){const t=await d({csrf:e,url:"aloadcustomer",body:{action:"customer_register"}});m(t.csrf),v(t.data)}(e.csrf)}return Object(n.useEffect)(()=>{h()},[]),l.a.createElement("div",null,l.a.createElement(u.a,{onClick:()=>i.replace("/admin/customer_list")},l.a.createElement(S.a,null)),l.a.createElement("div",{className:t.itemGrid},p&&l.a.createElement(L,Object.assign({inputForm:E},{detail:p,setEditing:b,customerid:r,getBaseDetail:h}))),l.a.createElement($,{open:f,onClose:()=>b(!1),title:"แก้ไขข้อมูล"},p&&E&&l.a.createElement(H,Object.assign({data:p,inputForm:E},{setEditing:b,getBaseDetail:h,match:a}))))}}}]);