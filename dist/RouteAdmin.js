(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{213:function(e,t){},637:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),o=n(190),i=n.n(o),l=n(26),c=n.n(l),r=n(104),u=n(31),d=n.p+"src/img/adminbg.jpeg";const f=c()({loader:()=>Promise.all([n.e(0),n.e(1),n.e(3),n.e(69),n.e(14)]).then(n.bind(null,626)),loading:()=>null}),m=c()({loader:()=>Promise.all([n.e(7),n.e(33)]).then(n.bind(null,627)),loading:()=>null}),b=c()({loader:()=>n.e(11).then(n.bind(null,628)),loading:()=>null}),p=Object(r.a)(e=>({}));t.default=()=>{p();const{csrf:e,setCsrf:t,enQSnackbar:n,closeSnackbar:o,_xhrPost:l,_xhrGet:c,_onLocalhost:r}=Object(s.useContext)(u.a),[y,g]=Object(s.useState)(null),[w,k]=Object(s.useState)(null),[h,x]=a.a.useState(0),j={...Object(s.useContext)(u.a),sess:y,getSess:O,ic_bg:d,handleLogout:E,notifications:w,setNotifications:k,notiPage:h,setNotiPage:x,realtimeAccess:function(){i()("https://easyrecycle.ml",{transports:["websocket","polling"]}).emit("noti",{action:"noti",linetoken:y&&y.userid,type:y.type,startindex:0,lastindex:10*(h+1)})},realtimeTopupAccept:function(e){const t=i()("https://easyrecycle.ml",{transports:["websocket","polling"]}),{linetoken:n}=e;t.emit("noti",{action:"noti",linetoken:n,type:"customer",startindex:0,lastindex:10*(h+1)})},realtimeEndOfSale:function(e){const t=i()("https://easyrecycle.ml",{transports:["websocket","polling"]}),{linetoken:n}=e;t.emit("noti",{action:"noti",linetoken:n,type:"business",startindex:0,lastindex:10*(h+1)})},readNotifications:async function(){const n=await l({csrf:e,url:"ausersystem",body:{action:"readnoti"}});t(n.csrf),S(y)}};async function E(){const e=await c("logout");t(e.csrf),O()}async function O(){const e=await c("asession");t(e.csrf),"not member"===e.data.status?E():(g(e.data),S(e.data))}async function S(n){const s=await l({csrf:e,url:"aloadusersystem",body:{action:"noti",adminid:n.userId,startindex:0,lastindex:10*(h+1)}});t(s.csrf),k(s.data)}return Object(s.useEffect)(()=>{y&&"not member"!==y.status&&(i()("https://easyrecycle.ml",{transports:["websocket","polling"]}).on(`noti-${y.userid}`,e=>{e&&console.log(e)}),S(y))},[y,h]),Object(s.useEffect)(()=>{O()},[]),a.a.createElement(u.a.Provider,{value:j},a.a.createElement("div",null,y?"need login before"===y.status?a.a.createElement(f,null):a.a.createElement(m,null):a.a.createElement(b,null)))}}}]);