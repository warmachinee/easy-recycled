(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["CustomerList"],{

/***/ "./src/component/Utils/Progress.tsx":
/*!******************************************!*\
  !*** ./src/component/Utils/Progress.tsx ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/styles */ \"./node_modules/@material-ui/styles/esm/index.js\");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n\r\n\r\n\r\nconst useStyles = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_1__[\"makeStyles\"])(theme => ({}));\r\nconst Progress = () => {\r\n    const classes = useStyles();\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { display: \"flex\", justifyContent: \"center\", margin: \"24px 0\" } },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_2__[\"CircularProgress\"], { color: \"primary\" })));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Progress);\r\n\n\n//# sourceURL=webpack:///./src/component/Utils/Progress.tsx?");

/***/ }),

/***/ "./src/component/Utils/SearchRealtime.tsx":
/*!************************************************!*\
  !*** ./src/component/Utils/SearchRealtime.tsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n/* harmony import */ var _material_ui_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/icons */ \"./node_modules/@material-ui/icons/esm/index.js\");\n\r\n\r\n\r\nconst SearchRealtime = (props) => {\r\n    const { search, setSearch, label, padding, onChange } = props;\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { padding: padding ? padding : 16, width: \"40%\", minWidth: 120 } },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_1__[\"TextField\"], { fullWidth: true, variant: \"outlined\", size: \"small\", label: label, value: search, InputProps: {\r\n                startAdornment: (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_1__[\"InputAdornment\"], { position: \"start\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons__WEBPACK_IMPORTED_MODULE_2__[\"Search\"], null))),\r\n                endAdornment: search !== \"\" && (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_1__[\"InputAdornment\"], { position: \"start\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_1__[\"IconButton\"], { onClick: () => {\r\n                            onChange(\"\");\r\n                            setSearch(\"\");\r\n                        }, style: { padding: 4 } },\r\n                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons__WEBPACK_IMPORTED_MODULE_2__[\"Clear\"], null)))),\r\n            }, onChange: (e) => onChange(e.target.value) })));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (SearchRealtime);\r\n\n\n//# sourceURL=webpack:///./src/component/Utils/SearchRealtime.tsx?");

/***/ }),

/***/ "./src/page/Admin/Customer/CustomerList.tsx":
/*!**************************************************!*\
  !*** ./src/page/Admin/Customer/CustomerList.tsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! socket.io-client */ \"./node_modules/socket.io-client/lib/index.js\");\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(socket_io_client__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-loadable */ \"./node_modules/react-loadable/lib/index.js\");\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_loadable__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/styles */ \"./node_modules/@material-ui/styles/esm/index.js\");\n/* harmony import */ var _AppContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../AppContext */ \"./src/AppContext.tsx\");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n/* harmony import */ var _component_Utils_Progress__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../component/Utils/Progress */ \"./src/component/Utils/Progress.tsx\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/esm/react-router-dom.js\");\n/* harmony import */ var _material_ui_lab_Pagination__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @material-ui/lab/Pagination */ \"./node_modules/@material-ui/lab/esm/Pagination/index.js\");\n/* harmony import */ var _component_Utils_SearchRealtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../component/Utils/SearchRealtime */ \"./src/component/Utils/SearchRealtime.tsx\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst CustomerDetail = react_loadable__WEBPACK_IMPORTED_MODULE_2___default()({\r\n    loader: () => Promise.all(/*! import() | CustomerDetail */[__webpack_require__.e(\"vendors~BusinessDetail~BusinessProfile~BusinessRegister~CustomerDetail~CustomerRegister~UserProfile\"), __webpack_require__.e(\"CustomerDetail\")]).then(__webpack_require__.bind(null, /*! ./CustomerDetail */ \"./src/page/Admin/Customer/CustomerDetail.tsx\")),\r\n    loading: () => null,\r\n});\r\nconst useStyles = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_3__[\"makeStyles\"])((theme) => ({\r\n    paper: { padding: 8 },\r\n    itemGrid: { margin: theme.spacing(1, 0), minWidth: 800, width: \"100%\" },\r\n    itemPaper: {\r\n        position: \"relative\",\r\n        padding: 16,\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n    },\r\n    avatar: { width: 48, height: 48, marginRight: 16 },\r\n}));\r\nconst CustomersItem = (props) => {\r\n    const classes = useStyles();\r\n    const { _thousandSeperater } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_4__[\"AppContext\"]);\r\n    const { match, data, history, customerType } = props;\r\n    const checkStatus = data.status ? data.status : customerType;\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"ButtonBase\"], { className: classes.itemGrid, onClick: () => history.replace(`${match.path}/${data.customerid}`) },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Paper\"], { className: classes.itemPaper, elevation: checkStatus === 1 ? 3 : 0, style: {\r\n                ...(checkStatus === 0 && {\r\n                    backgroundColor: \"inherit\",\r\n                    opacity: 0.7,\r\n                }),\r\n            } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Avatar\"], { className: classes.avatar, src: data.picture }),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Typography\"], { style: { flex: 1, fontWeight: 600 }, align: \"left\" },\r\n                checkStatus === 1 ? \"\" : \"(ไม่ได้ใช้งานแล้ว)\",\r\n                `${data.displayname} ( ${data.fullname} ${data.lastname} )`),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Typography\"], { align: \"left\" }, \"\\u0E40\\u0E07\\u0E34\\u0E19\\u0E04\\u0E07\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\"),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Typography\"], { variant: \"h6\", style: { width: 100, marginRight: 16 }, align: \"right\" }, _thousandSeperater(data.balance)),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Typography\"], null, \"\\u0E1A\\u0E32\\u0E17\"))));\r\n};\r\nconst DefaultComponent = (props) => {\r\n    const classes = useStyles();\r\n    const { location, match, history } = props;\r\n    const { sess, csrf, setCsrf, _xhrPost, _onLocalhostFn } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_4__[\"AppContext\"]);\r\n    const [customers, setCustomers] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const [customerPage, setCustomerPage] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(getHash());\r\n    const [customerType, setCustomerType] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(10);\r\n    const [search, setSearch] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");\r\n    function getHash() {\r\n        const hash = location.hash;\r\n        if (hash === \"\") {\r\n            return 1;\r\n        }\r\n        else {\r\n            return parseInt(hash.split(\"#\")[1]);\r\n        }\r\n    }\r\n    const paginationChange = (event, value) => {\r\n        history.replace(`${match.path}#${value}`);\r\n        setCustomerPage(value);\r\n    };\r\n    const handleChange = (event) => {\r\n        setCustomerType(event.target.value);\r\n        getBaseList(event.target.value);\r\n    };\r\n    async function getBaseList(status) {\r\n        const sendObj = {\r\n            action: \"base_list\",\r\n            startindex: (customerPage - 1) * 10,\r\n            lastindex: customerPage * 10,\r\n            ...(status !== 10 && { status }),\r\n        };\r\n        if (status === 0) {\r\n            setCustomers(null);\r\n        }\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"aloadcustomer\",\r\n            body: sendObj,\r\n        });\r\n        setCsrf(res.csrf);\r\n        setCustomers(res.data);\r\n    }\r\n    Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\r\n        getBaseList(customerType);\r\n    }, [customerPage]);\r\n    function realtimeSearch(value) {\r\n        setSearch(value);\r\n        if (value === \"\") {\r\n            location.hash = \"#\";\r\n            setCustomerType(10);\r\n            getBaseList(10);\r\n        }\r\n        else {\r\n            const socket = socket_io_client__WEBPACK_IMPORTED_MODULE_1___default()(\"https://easyrecycle.ml\", {\r\n                transports: [\"websocket\", \"polling\"],\r\n            });\r\n            const sendObj = {\r\n                action: \"customer\",\r\n                adminid: sess.userid,\r\n                inputtext: value,\r\n            };\r\n            socket.emit(\"adminsearch\", sendObj);\r\n        }\r\n    }\r\n    function realtimeResult() {\r\n        const socket = socket_io_client__WEBPACK_IMPORTED_MODULE_1___default()(\"https://easyrecycle.ml\", {\r\n            transports: [\"websocket\", \"polling\"],\r\n        });\r\n        socket.on(`customer-${sess.userid}`, (messageNew) => {\r\n            if (messageNew && messageNew.status === \"success\") {\r\n                const thisData = messageNew.result;\r\n                setCustomers(thisData);\r\n            }\r\n        });\r\n    }\r\n    Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\r\n        realtimeResult();\r\n    }, []);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { padding: 12 } },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { display: \"flex\", marginBottom: 24 } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Typography\"], { variant: \"h5\", style: { marginRight: 16 } }, \"\\u0E23\\u0E32\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E25\\u0E39\\u0E01\\u0E04\\u0E49\\u0E32\"),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"FormControl\"], { size: \"small\" },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Select\"], { value: customerType, onChange: handleChange, variant: \"outlined\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"MenuItem\"], { value: 10 }, \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"),\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"MenuItem\"], { value: 1 }, \"\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19\\u0E2D\\u0E22\\u0E39\\u0E48\"),\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"MenuItem\"], { value: 0 }, \"\\u0E44\\u0E21\\u0E48\\u0E44\\u0E14\\u0E49\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19\\u0E41\\u0E25\\u0E49\\u0E27\")))),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_component_Utils_SearchRealtime__WEBPACK_IMPORTED_MODULE_9__[\"default\"], Object.assign({ label: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E25\\u0E39\\u0E01\\u0E04\\u0E49\\u0E32\" }, { search, setSearch }, { onChange: realtimeSearch, padding: \"16px 0\" })),\r\n        customers ? ((\"list\" in customers ? customers.list : customers).length > 0 ? ((\"list\" in customers ? customers.list : customers).map((d) => (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CustomersItem, Object.assign({ key: d.customerid, data: d }, { customers, customerType }, props))))) : (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"Typography\"], { style: { margin: \"24px 0\" }, align: \"center\", variant: \"h4\", color: \"textSecondary\" }, \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"))) : (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_component_Utils_Progress__WEBPACK_IMPORTED_MODULE_6__[\"default\"], null)),\r\n        customers &&\r\n            \"count\" in customers &&\r\n            Math.ceil(customers.count / 10) > 1 && (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { marginTop: 16, display: \"flex\", justifyContent: \"center\" } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_lab_Pagination__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { count: Math.ceil(customers.count / 10), page: customerPage, variant: \"outlined\", shape: \"rounded\", onChange: paginationChange })))));\r\n};\r\nconst CustomerList = ({ match }) => {\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null,\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_7__[\"Route\"], { exact: true, path: match.path, component: DefaultComponent }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_7__[\"Route\"], { path: `${match.path}/:customerid`, component: CustomerDetail })));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_7__[\"withRouter\"])((props) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CustomerList, Object.assign({}, props))));\r\n\n\n//# sourceURL=webpack:///./src/page/Admin/Customer/CustomerList.tsx?");

/***/ })

}]);