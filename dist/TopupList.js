(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{124:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(10),i=a(20),s=a(145);t.default=({children:e,variant:t,buttonColor:a,light:l=!1,...c})=>{const o=Object(i.a)();function u(e){switch(e){case"text":return{color:a?a[600]:o.palette.text.primary,"&:hover":{backgroundColor:a?a[l?100:50]:o.palette.action.hover}};case"contained":return{color:a?o.palette.getContrastText(a[l?700:600]):o.palette.text.primary,backgroundColor:a?a[l?600:500]:o.palette.background.default,"&:hover":{backgroundColor:a?a[l?800:700]:o.palette.action.hover}};case"outlined":return{color:a?a[600]:o.palette.text.primary,border:`1px solid ${a?a[600]:o.palette.text.primary}`,"&:hover":{backgroundColor:a?a[l?100:50]:o.palette.action.hover}};default:return{color:o.palette.text.primary,"&:hover":{backgroundColor:o.palette.action.hover}}}}const p=Object(r.a)(e=>({root:{...u(t)}}))(s.a);return n.a.createElement(p,Object.assign({},c,{variant:t}),e)}},134:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(60),i=a(189),s=a(168),c=a(139),o=a(190),u=a(191),p=a(177);const d=Object(r.a)(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}));t.default=e=>{const t=d(),{open:a=!1,onClose:l,children:r,title:m,actions:b,maxWidth:y="xs",fullScreen:f=!1,dividers:g=!0,contentStyle:h,other:E}=e;return n.a.createElement(i.a,Object.assign({scroll:"paper",open:a,onClose:l,maxWidth:y,fullWidth:!0,fullScreen:f},E),n.a.createElement(s.a,null,m,n.a.createElement(c.a,{className:t.closeButton,onClick:l},n.a.createElement(p.a,null))),n.a.createElement(o.a,{dividers:g,style:{...h}},r),b&&n.a.createElement(u.a,null,b))}},302:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(104),i=a(303),s=a(145);const c=Object(r.a)(e=>({}));t.default=e=>{const{slip:t,setSlip:a,setSlipDisplay:l,label:r,fullWidth:o=!1}=e;c();return n.a.createElement("div",{style:{...o&&{width:"100%"}}},n.a.createElement("input",{accept:"image/*",style:{display:"none"},id:"contained-button-file",type:"file",onChange:function(e){if(e.target.files&&e.target.files.length>0){const n=e.target.files[0];n.size;if(a(n),l){var t=new FileReader;t.readAsDataURL(n),t.onloadend=function(){l(t.result)}}}else a(null),l&&l(null)}}),n.a.createElement("label",{htmlFor:"contained-button-file"},n.a.createElement(s.a,{startIcon:n.a.createElement(i.a,{fontSize:"large",style:{...!t&&{color:"white"}}}),variant:"contained",color:t?"default":"primary",style:{...o&&{width:"100%"},...!t&&{color:"white"}},size:"large",component:"span"},r)))}},572:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(104),i=a(28),s=a(176),c=a(158),o=a(151),u=a(573),p=a(39),d=a(38),m=a(26),b=a.n(m),y=a(134),f=a(302),g=a(124),h=a(419);const E=b()({loader:()=>a.e(26).then(a.bind(null,426)),loading:()=>null}),v=Object(r.a)(e=>({topupItem:{padding:12}})),j=({topupList:e,onClickDetail:t})=>n.a.createElement("div",null,e.map((e,a)=>n.a.createElement(k,Object.assign({key:e.requestid,data:e},{onClickDetail:t})))),k=({data:e,onClickDetail:t})=>{const a=v(),{_dateToString:r,_thousandSeperater:m}=Object(l.useContext)(i.a);return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{button:!0,className:a.topupItem,onClick:()=>t(e)},n.a.createElement(s.a,{style:{marginRight:16},variant:"body2"},r(e.createdate)),function(t){switch(t){case 0:return n.a.createElement(s.a,{style:{...1===e.bill&&{color:u.a[600]}},variant:"body2"},1===e.bill?"รอดำเนินการ":"กรุณาอัพโหลดสลิป");case 1:return n.a.createElement(s.a,{style:{color:p.a[600]},variant:"body2"},"สำเร็จ");case-1:return n.a.createElement(s.a,{style:{color:d.a[600]},variant:"body2"},"ไม่สำเร็จ");default:return null}}(e.status),n.a.createElement(s.a,{variant:"h6",style:{flex:1,marginRight:8},align:"right"},m(e.value)),n.a.createElement(h.a,null)),n.a.createElement(o.a,null))},C=e=>{v();const{sess:t}=Object(l.useContext)(i.a),{topupDetail:a,slip:r,setSlip:c,uploadSlip:u,slipDisplay:d,setSlipDisplay:m}=e,{getTopupImg:b}=Object(l.useContext)(i.a);return n.a.createElement("div",null,0===a.status&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(f.default,Object.assign({fullWidth:!0,label:"อัพโหลดสลิป"},{slip:r,setSlip:c,setSlipDisplay:m})),r&&n.a.createElement(g.default,{onClick:()=>{c(null),m(null)}},"รีเซ็ต")),r&&n.a.createElement(s.a,{variant:"caption"},r.name),n.a.createElement(o.a,{style:{margin:"24px 0"}})),1===a.bill?n.a.createElement("img",{style:{width:"100%"},alt:t.userid,src:d||b({customerid:t.userid,requestid:a.requestid,type:"jpg"})}):n.a.createElement(s.a,{align:"center",style:{margin:"24px 0"}},"ยังไม่ได้อัพโหลดสลิป"),0===a.status&&n.a.createElement(g.default,{style:{width:"100%"},variant:"contained",buttonColor:p.a,onClick:u,disabled:null===r},"อัพโหลด"))},O=n.a.memo(({location:e,booleanDispatch:t})=>{v();const{csrf:a,setCsrf:r,profileData:c,_xhrPost:u,_fetchFile:p,booleanReducer:d,addSnackbar:m}=Object(l.useContext)(i.a),[b,f]=Object(l.useState)(null),[g,h]=Object(l.useState)(null),[{detail:k},O]=Object(l.useReducer)(d,{detail:!1}),[S,x]=Object(l.useState)(null),[w,D]=Object(l.useState)(null),[R,q]=Object(l.useState)(null);async function F(){const e=await u({csrf:a,url:"loadusersystem",body:{action:"topuplist",linetoken:c.userId,type:"customer"}});r(e.csrf),h(e.data),f(e.data)}return Object(l.useEffect)(()=>{F()},[]),Object(l.useEffect)(()=>{t({type:`${"#topup_list"===e.hash}`,key:"topupList"})},[e]),n.a.createElement("div",null,n.a.createElement(o.a,null),g?g.length>0?n.a.createElement(j,Object.assign({},{topupList:g,onClickDetail:function(e){x(e),O({type:"true",key:"detail"})}})):n.a.createElement(s.a,{style:{margin:"24px 0"},align:"center",variant:"h4",color:"textSecondary"},"ไม่มีรายการ"):n.a.createElement(E,Object.assign({},{backDrop:b,setBackDrop:f})),n.a.createElement(y.default,{open:k,onClose:()=>O({type:"false",key:"detail"}),title:"รายละเอียดการเติมเงิน"},S&&n.a.createElement(C,Object.assign({},{topupDetail:S,slip:w,setSlip:D,uploadSlip:async function(){const e=await p({url:"usersystem",csrf:a,headers:{action:"receipt",type:"customer",requestid:S.requestid},body:{receiptimage:w}});r(e.csrf),"success"===e.data.status?(m({message:"อัพโหลดสลิปสำเร็จ",variant:"success"}),O({type:"false",key:"detail"}),F(),x(null),D(null)):m({message:"อัพโหลดสลิปไม่สำเร็จ",variant:"success"})},slipDisplay:R,setSlipDisplay:q}))))});t.default=O}}]);