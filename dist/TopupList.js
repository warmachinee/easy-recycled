(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{125:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(10),c=a(20),o=a(133);t.default=({children:e,variant:t,buttonColor:a,light:l=!1,...i})=>{const s=Object(c.a)();function u(e){switch(e){case"text":return{color:a?a[600]:s.palette.text.primary,"&:hover":{backgroundColor:a?a[l?100:50]:s.palette.action.hover}};case"contained":return{color:a?s.palette.getContrastText(a[l?700:600]):s.palette.text.primary,backgroundColor:a?a[l?600:500]:s.palette.background.default,"&:hover":{backgroundColor:a?a[l?800:700]:s.palette.action.hover}};case"outlined":return{color:a?a[600]:s.palette.text.primary,border:`1px solid ${a?a[600]:s.palette.text.primary}`,"&:hover":{backgroundColor:a?a[l?100:50]:s.palette.action.hover}};default:return{color:s.palette.text.primary,"&:hover":{backgroundColor:s.palette.action.hover}}}}const d=Object(r.a)(e=>({root:{...u(t)}}))(o.a);return n.a.createElement(d,Object.assign({},i,{variant:t}),e)}},134:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(60),c=a(201),o=a(178),i=a(137),s=a(202),u=a(203),d=a(170);const p=Object(r.a)(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}));t.default=e=>{const t=p(),{open:a=!1,onClose:l,children:r,title:m,actions:b,maxWidth:f="xs",fullScreen:y=!1,dividers:g=!0,contentStyle:h,other:E}=e;return n.a.createElement(c.a,Object.assign({scroll:"paper",open:a,onClose:l,maxWidth:f,fullWidth:!0,fullScreen:y},E),n.a.createElement(o.a,null,m,n.a.createElement(i.a,{className:t.closeButton,onClick:l},n.a.createElement(d.a,null))),n.a.createElement(s.a,{dividers:g,style:{...h}},r),b&&n.a.createElement(u.a,null,b))}},255:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(104),c=a(256),o=a(133);const i=Object(r.a)(e=>({}));t.default=e=>{const{slip:t,setSlip:a,setSlipDisplay:l,label:r,fullWidth:s=!1}=e;i();return n.a.createElement("div",{style:{...s&&{width:"100%"}}},n.a.createElement("input",{accept:"image/*",style:{display:"none"},id:"contained-button-file",type:"file",onChange:function(e){if(e.target.files&&e.target.files.length>0){const n=e.target.files[0];n.size;if(a(n),l){var t=new FileReader;t.readAsDataURL(n),t.onloadend=function(){l(t.result)}}}else a(null),l&&l(null)}}),n.a.createElement("label",{htmlFor:"contained-button-file"},n.a.createElement(o.a,{startIcon:n.a.createElement(c.a,{fontSize:"large",style:{...!t&&{color:"white"}}}),variant:"contained",color:t?"default":"primary",style:{...s&&{width:"100%"},...!t&&{color:"white"}},size:"large",component:"span"},r)))}},528:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(104),c=a(31),o=a(162),i=a(154),s=a(142),u=a(529),d=a(39),p=a(38),m=a(26),b=a.n(m),f=a(134),y=a(255),g=a(125),h=a(377);const E=b()({loader:()=>a.e(25).then(a.bind(null,382)),loading:()=>null}),v=Object(r.a)(e=>({topupItem:{padding:12}})),C=({topupList:e,onClickDetail:t})=>n.a.createElement("div",null,e.map((e,a)=>n.a.createElement(j,Object.assign({key:e.requestid,data:e},{onClickDetail:t})))),j=({data:e,onClickDetail:t})=>{const a=v(),{_dateToString:r,_thousandSeperater:m}=Object(l.useContext)(c.a);return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{button:!0,className:a.topupItem,onClick:()=>t(e)},n.a.createElement(o.a,{style:{marginRight:16},variant:"body2"},r(e.createdate)),function(t){switch(t){case 0:return n.a.createElement(o.a,{style:{...1===e.bill&&{color:u.a[600]}},variant:"body2"},1===e.bill?"รอดำเนินการ":"กรุณาอัพโหลดสลิป");case 1:return n.a.createElement(o.a,{style:{color:d.a[600]},variant:"body2"},"สำเร็จ");case-1:return n.a.createElement(o.a,{style:{color:p.a[600]},variant:"body2"},"ไม่สำเร็จ");default:return null}}(e.status),n.a.createElement(o.a,{variant:"h6",style:{flex:1,marginRight:8},align:"right"},m(e.value)),n.a.createElement(h.a,null)),n.a.createElement(s.a,null))},k=e=>{v();const{sess:t}=Object(l.useContext)(c.a),{topupDetail:a,slip:r,setSlip:i,uploadSlip:u}=e,{getTopupImg:p}=Object(l.useContext)(c.a);return n.a.createElement("div",null,0===a.status&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(y.default,Object.assign({fullWidth:!0,label:"อัพโหลดสลิป"},{slip:r,setSlip:i})),r&&n.a.createElement(g.default,{onClick:()=>i(null)},"รีเซ็ต")),r&&n.a.createElement(o.a,{variant:"caption"},r.name),n.a.createElement(s.a,{style:{margin:"24px 0"}})),1===a.bill?n.a.createElement("img",{style:{width:"100%"},alt:t.userid,src:p({customerid:t.userid,requestid:a.requestid,type:"jpg"})}):n.a.createElement(o.a,{align:"center",style:{margin:"24px 0"}},"ยังไม่ได้อัพโหลดสลิป"),0===a.status&&n.a.createElement(g.default,{style:{width:"100%"},variant:"contained",buttonColor:d.a,onClick:u,disabled:null===r},"อัพโหลด"))},O=n.a.memo(({location:e,booleanDispatch:t})=>{v();const{csrf:a,setCsrf:r,profileData:i,_xhrPost:u,_fetchFile:d,booleanReducer:p}=Object(l.useContext)(c.a),[m,b]=Object(l.useState)(null),[y,g]=Object(l.useState)(null),[{detail:h},j]=Object(l.useReducer)(p,{detail:!1}),[O,w]=Object(l.useState)(null),[x,S]=Object(l.useState)(null);async function D(){const e=await u({csrf:a,url:"loadusersystem",body:{action:"topuplist",linetoken:i.userId,type:"customer"}});r(e.csrf),g(e.data),b(e.data)}return Object(l.useEffect)(()=>{/localhost/.test(window.location.href)?g([{requestid:1,value:500,bill:500,createdate:new Date,status:0},{requestid:2,value:150,bill:150,createdate:new Date,status:1},{requestid:3,value:1e3,bill:1e3,createdate:new Date,status:2}]):D()},[]),Object(l.useEffect)(()=>{t({type:`${"#topup_list"===e.hash}`,key:"topupList"})},[e]),n.a.createElement("div",null,n.a.createElement(s.a,null),y?y.length>0?n.a.createElement(C,Object.assign({},{topupList:y,onClickDetail:function(e){w(e),j({type:"true",key:"detail"})}})):n.a.createElement(o.a,{style:{margin:"24px 0"},align:"center",variant:"h4",color:"textSecondary"},"ไม่มีรายการ"):n.a.createElement(E,Object.assign({},{backDrop:m,setBackDrop:b})),n.a.createElement(f.default,{open:h,onClose:()=>j({type:"false",key:"detail"}),title:"รายละเอียดการเติมเงิน"},O&&n.a.createElement(k,Object.assign({},{topupDetail:O,slip:x,setSlip:S,uploadSlip:async function(){const e=await d({url:"usersystem",csrf:a,headers:{action:"receipt",type:"customer",requestid:O.requestid},body:{receiptimage:x}});r(e.csrf),"success"===e.data.status&&(j({type:"false",key:"detail"}),D(),w(null),S(null))}}))))});t.default=O}}]);