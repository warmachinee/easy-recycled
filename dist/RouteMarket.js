(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{123:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(1),o=a(0),r=a.n(o),i=a(59);function l(e,t){var a=r.a.memo(r.a.forwardRef((function(t,a){return r.a.createElement(i.a,Object(n.a)({ref:a},t),e)})));return a.muiName=i.a.muiName,a}},137:function(e,t,a){"use strict";var n=a(1),o=a(2),r=a(0),i=a.n(r),l=(a(3),a(7)),c=a(10),s=a(18),d=a(599),u=a(25),p=i.a.forwardRef((function(e,t){var a=e.edge,r=void 0!==a&&a,c=e.children,s=e.classes,p=e.className,h=e.color,m=void 0===h?"default":h,b=e.disabled,g=void 0!==b&&b,f=e.disableFocusRipple,y=void 0!==f&&f,v=e.size,O=void 0===v?"medium":v,j=Object(o.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return i.a.createElement(d.a,Object(n.a)({className:Object(l.a)(s.root,p,"default"!==m&&s["color".concat(Object(u.a)(m))],g&&s.disabled,"small"===O&&s["size".concat(Object(u.a)(O))],{start:s.edgeStart,end:s.edgeEnd}[r]),centerRipple:!0,focusRipple:!y,disabled:g,ref:t},j),i.a.createElement("span",{className:s.label},c))}));t.a=Object(c.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(s.d)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(s.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(s.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(p)},162:function(e,t,a){"use strict";var n=a(1),o=a(2),r=a(0),i=a.n(r),l=(a(3),a(7)),c=a(10),s=a(25),d={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},u=i.a.forwardRef((function(e,t){var a=e.align,r=void 0===a?"inherit":a,c=e.classes,u=e.className,p=e.color,h=void 0===p?"initial":p,m=e.component,b=e.display,g=void 0===b?"initial":b,f=e.gutterBottom,y=void 0!==f&&f,v=e.noWrap,O=void 0!==v&&v,j=e.paragraph,w=void 0!==j&&j,x=e.variant,k=void 0===x?"body1":x,E=e.variantMapping,S=void 0===E?d:E,C=Object(o.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),R=m||(w?"p":S[k]||d[k])||"span";return i.a.createElement(R,Object(n.a)({className:Object(l.a)(c.root,u,"inherit"!==k&&c[k],"initial"!==h&&c["color".concat(Object(s.a)(h))],O&&c.noWrap,y&&c.gutterBottom,w&&c.paragraph,"inherit"!==r&&c["align".concat(Object(s.a)(r))],"initial"!==g&&c["display".concat(Object(s.a)(g))]),ref:t},C))}));t.a=Object(c.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(u)},170:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(123);t.a=Object(r.a)(o.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},199:function(e,t){},227:function(e,t,a){"use strict";var n=a(1),o=a(2),r=a(0),i=a.n(r),l=(a(3),a(7)),c=a(25),s=a(10),d=a(184),u=a(19),p=a(162),h=i.a.forwardRef((function(e,t){var a=e.classes,r=e.className,s=e.color,h=void 0===s?"primary":s,m=e.component,b=void 0===m?"a":m,g=e.onBlur,f=e.onFocus,y=e.TypographyClasses,v=e.underline,O=void 0===v?"hover":v,j=e.variant,w=void 0===j?"inherit":j,x=Object(o.a)(e,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),k=Object(d.a)(),E=k.isFocusVisible,S=k.onBlurVisible,C=k.ref,R=i.a.useState(!1),L=R[0],N=R[1],I=Object(u.a)(t,C);return i.a.createElement(p.a,Object(n.a)({className:Object(l.a)(a.root,a["underline".concat(Object(c.a)(O))],r,L&&a.focusVisible,"button"===b&&a.button),classes:y,color:h,component:b,onBlur:function(e){L&&(S(),N(!1)),g&&g(e)},onFocus:function(e){E(e)&&N(!0),f&&f(e)},ref:I,variant:w},x))}));t.a=Object(s.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(h)},377:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(123);t.a=Object(r.a)(o.a.createElement("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"}),"AttachMoney")},581:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(26),i=a.n(r),l=a(185),c=a.n(l),s=a(104),d=a(137),u=a(227),p=a(162),h=a(170),m=a(377),b=a(31),g=a(22);i()({loader:()=>Promise.all([a.e(1),a.e(15)]).then(a.bind(null,125)),loading:()=>null});const f=i()({loader:()=>a.e(42).then(a.bind(null,566)),loading:()=>null}),y=i.a.Map({loader:{MarketList:()=>a.e(55).then(a.bind(null,383))},render(e,t){let a=e.MarketList.default;return o.a.createElement(g.a,Object.assign({},t,{render:()=>o.a.createElement(a,Object.assign({},t))}))},loading:()=>null}),v=i()({loader:()=>Promise.all([a.e(0),a.e(6),a.e(7),a.e(41)]).then(a.bind(null,567)),loading:()=>null}),O=Object(s.a)(e=>({offset:e.mixins.toolbar,profileCard:{display:"flex",flexDirection:"column",justifyContent:"center",margin:36,padding:16,width:200},title:{flexGrow:1}})),j=window.liff,w=({match:e,location:t,history:a})=>{const r=O(),{csrf:i,setCsrf:l,setDense:s,enQSnackbar:w,closeSnackbar:x,_xhrPost:k,_xhrGet:E,_onLocalhost:S,_thousandSeperater:C}=Object(n.useContext)(b.a),[R,L]=Object(n.useState)(null),[N,I]=Object(n.useState)(null),[z,B]=Object(n.useState)(null),[M,P]=Object(n.useState)(null),[A,T]=Object(n.useState)(null),[D,F]=Object(n.useState)(null),V={...Object(n.useContext)(b.a),sess:z,getSess:J,profileData:R,addSnackbar:function({message:e,variant:t}){w({message:e,variant:t,action:H})},handleLogout:W,checkSession:$,passedFormid:A,marketList:D,getMarketPlace:G};async function W(){const e=await E("logout");l(e.csrf),j.isLoggedIn()&&j.logout(),window.location.reload()}async function $(){const e=await E("logout");l(e.csrf),_()}function _(){j.init({liffId:"1653861118-Pa7l4bay"},async()=>{j.isLoggedIn()?j.getProfile().then(e=>{L(e),J(e)}).catch(e=>console.error(e)):j.login()})}async function J(e){B(null),P(null);const t=await k({csrf:i,url:"session",body:{linetoken:e.userId,type:"customer"}});l(t.csrf),B(t.data),P(t.data),"not member"===t.data.status&&(a.replace("/"),window.location.reload()),t.data&&t.data.userid&&async function(e){const t=await k({csrf:i,url:"loadusersystem",body:{action:"info",linetoken:e.userId,type:"customer"}});l(t.csrf),"status"in t.data&&$(),I(t.data)}(e)}async function G(){const e=await k({csrf:i,url:"loadusersystem",body:{action:"boardlist",linetoken:R&&R.userId,type:"customer"}});l(e.csrf),"status"in e.data&&"this is not user account or have been delete account"===e.data.status?$():F(e.data)}Object(n.useEffect)(()=>{R&&(A&&new URLSearchParams(t.search).get("formid")?a.replace(`/market/${A}`):G())},[R]),Object(n.useEffect)(()=>{var e;e=D,c()("https://easyrecycle.ml",{transports:["websocket","polling"]}).on("boardlist",t=>{if(t){const{formid:a,accessremain:n}=t;if(e){F(null);const t=e;t.filter(e=>e.formid===a)[0].accessremain=n,F(t),0===n&&G()}}})},[D]),Object(n.useEffect)(()=>{_();const e=new URLSearchParams(t.search).get("formid");e&&T(e),s(!0)},[]);const H=e=>o.a.createElement(d.a,{onClick:()=>x(e)},o.a.createElement(h.a,{style:{color:"white"}}));return o.a.createElement(b.a.Provider,{value:V},o.a.createElement("div",null,o.a.createElement(f,Object.assign({},{userInfo:N,handleLogout:W})),o.a.createElement("div",{className:r.offset}),N&&!("status"in N)&&o.a.createElement("div",{style:{display:"flex",padding:"12px 16px 0 16px",alignItems:"center"}},o.a.createElement(u.a,{href:"/"},o.a.createElement(p.a,{style:{marginRight:16},variant:"h6"},"บัญชีของฉัน")),o.a.createElement(p.a,{variant:"h6",style:{marginLeft:24,marginRight:8,fontWeight:700,flex:1},align:"right"},C(N.info.balance)),o.a.createElement(m.a,null)),o.a.createElement(y,{exact:!0,path:e.path}),o.a.createElement(g.a,{exact:!0,path:`${e.path}/:formid`,component:v})))};t.default=Object(g.f)(e=>o.a.createElement(w,Object.assign({},e)))}}]);