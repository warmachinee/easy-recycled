(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a(20),s=a(137);t.default=({children:e,variant:t,buttonColor:a,light:n=!1,...i})=>{const c=Object(l.a)();function u(e){switch(e){case"text":return{color:a?a[600]:c.palette.text.primary,"&:hover":{backgroundColor:a?a[n?100:50]:c.palette.action.hover}};case"contained":return{color:a?c.palette.getContrastText(a[n?700:600]):c.palette.text.primary,backgroundColor:a?a[n?600:500]:c.palette.background.default,"&:hover":{backgroundColor:a?a[n?800:700]:c.palette.action.hover}};case"outlined":return{color:a?a[600]:c.palette.text.primary,border:`1px solid ${a?a[600]:c.palette.text.primary}`,"&:hover":{backgroundColor:a?a[n?100:50]:c.palette.action.hover}};default:return{color:c.palette.text.primary,"&:hover":{backgroundColor:c.palette.action.hover}}}}const m=Object(o.a)(e=>({root:{...u(t)}}))(s.a);return r.a.createElement(m,Object.assign({},i,{variant:t}),e)}},201:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(104),l=a(31),s=a(600),i=a(151);const c=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=c(),{district:a,province:o,setDistrict:u,setSubdistrict:m}=e,{csrf:d,setCsrf:p,_xhrGetP:f}=Object(n.useContext)(l.a),[b,g]=r.a.useState(!1),[v,y]=r.a.useState([]),h=b&&0===v.length;return r.a.useEffect(()=>{let e=!0;if(h)return(async()=>{const t=await f(`https://easyrecycle.ml/user/location?type=districts&provincesid=${o.id}`);p(t.csrf),e&&y(t.data)})(),()=>{e=!1}},[h,o]),r.a.useEffect(()=>{b||y([])},[b]),r.a.createElement(s.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:b,onOpen:()=>{g(!0)},onClose:()=>{g(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:v,loading:h,onChange:function(e,t){u(t),m(null)},noOptionsText:"ไม่มีเขต/อำเภอที่คุณค้นหา",renderInput:e=>r.a.createElement(i.a,Object.assign({},e,{label:"เขต/อำเภอ",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},202:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(104),l=a(31),s=a(600),i=a(151);const c=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=c(),{subdistrict:a,district:o,setSubdistrict:u}=e,{csrf:m,setCsrf:d,_xhrGetP:p}=Object(n.useContext)(l.a),[f,b]=r.a.useState(!1),[g,v]=r.a.useState([]),y=f&&0===g.length;return r.a.useEffect(()=>{let e=!0;if(y)return(async()=>{const t=await p(`https://easyrecycle.ml/user/location?type=subdistricts&districtsid=${o.id}`);d(t.csrf),e&&v(t.data)})(),()=>{e=!1}},[y,o]),r.a.useEffect(()=>{f||v([])},[f]),r.a.createElement(s.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:f,onOpen:()=>{b(!0)},onClose:()=>{b(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:g,loading:y,onChange:function(e,t){u(t)},noOptionsText:"ไม่มีตำบลที่คุณค้นหา",renderInput:e=>r.a.createElement(i.a,Object.assign({},e,{label:"ตำบล",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},203:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(104),l=a(31),s=a(600),i=a(151);const c=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=c(),{province:a,setProvince:o,setDistrict:u,setSubdistrict:m}=e,{csrf:d,setCsrf:p,_xhrGetP:f}=Object(n.useContext)(l.a),[b,g]=r.a.useState(!1),[v,y]=r.a.useState([]),h=b&&0===v.length;return r.a.useEffect(()=>{let e=!0;if(h)return(async()=>{const t=await f("https://easyrecycle.ml/user/location?type=provinces");p(t.csrf),e&&y(t.data)})(),()=>{e=!1}},[h]),r.a.useEffect(()=>{b||y([])},[b]),r.a.createElement(s.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:b,onOpen:()=>{g(!0)},onClose:()=>{g(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:v,loading:h,onChange:function(e,t){o(t),u(null),m(null)},noOptionsText:"ไม่มีจังหวัดที่คุณค้นหา",renderInput:e=>r.a.createElement(i.a,Object.assign({},e,{label:"จังหวัด",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},398:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(123);t.a=Object(o.a)(r.a.createElement("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeft")},399:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(123);t.a=Object(o.a)(r.a.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight")},570:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),s=a(104),i=a(40),c=a(165),u=a(20),m=a(605),d=a(137),p=a(622),f=a(149),b=a(633),g=a(175),v=a(143),y=a(151),h=a(150),E=a(353),x=a(245),O=a(352),C=a(138),j=a(601),k=a(296),S=a(192),w=a(398),_=a(399),I=a(171),z=a(571),B=a(31),P=a(124),D=a(38),F=a(39),L=a(599),A=a(203),N=a(201),W=a(202);const T=l()({loader:()=>Promise.all([a.e(9),a.e(49)]).then(a.bind(null,246)),loading:()=>null}),R=l()({loader:()=>a.e(63).then(a.bind(null,584)),loading:()=>null}),M=l()({loader:()=>Promise.all([a.e(0),a.e(37)]).then(a.bind(null,133)),loading:()=>null}),$=l()({loader:()=>Promise.all([a.e(0),a.e(6),a.e(25)]).then(a.bind(null,135)),loading:()=>null}),G=Object(s.a)(e=>({stepperRoot:{flexGrow:1},buttonGroup:{display:"flex",padding:8,position:"fixed",bottom:0,width:"100%",boxSizing:"border-box",backgroundColor:e.palette.background.default},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"}})),q=()=>r.a.createElement(c.a,{variant:"h6",style:{fontWeight:600},align:"center"},"ข้อมูลขายวัสดุเหลือใช้"),J=e=>{const t=G(),a=Object(u.a)(),{businessForm:n,activeStep:o,setActiveStep:l}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{variant:"dots",steps:4,position:"static",activeStep:o,nextButton:r.a.createElement(d.a,{size:"small",onClick:()=>{l(e=>e+1)},disabled:3===o},"Next","rtl"===a.direction?r.a.createElement(w.a,null):r.a.createElement(_.a,null)),backButton:0!==o?r.a.createElement(d.a,{size:"small",onClick:()=>{l(e=>e-1)}},"rtl"===a.direction?r.a.createElement(_.a,null):r.a.createElement(w.a,null),"Back"):r.a.createElement("div",{style:{width:66.31}})}),r.a.createElement("div",{className:t.stepperRoot,style:{padding:"16px 16px 68px 16px",overflow:"auto"}},r.a.createElement(K,Object.assign({},e))))},K=({activeStep:e,...t})=>{switch(e){case 0:return r.a.createElement(X,Object.assign({},t));case 1:return r.a.createElement(Z,Object.assign({},t));case 2:return r.a.createElement(H,Object.assign({},t));case 3:return r.a.createElement(Q,Object.assign({},t));default:return r.a.createElement("div",null,"default")}},V=e=>{const{label:t,value:a,onChange:n,menuArr:o}=e,l=r.a.useRef(null),[s,i]=r.a.useState(0);return r.a.useEffect(()=>{i(l.current.offsetWidth)},[]),r.a.createElement(p.a,{fullWidth:!0,variant:"outlined",size:"small"},r.a.createElement(f.a,{ref:l},t),r.a.createElement(b.a,{labelWidth:s,value:a,onChange:n},o.map((e,t)=>r.a.createElement(g.a,{key:t,value:t},e))))},X=({editting:e,goodsDetail:t,businessForm:a,form:n,setForm:o,onEndSale:l})=>r.a.createElement("div",null,e&&t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"จำนวนการเข้าชม"),r.a.createElement(c.a,{variant:"h6"},`${t.accessremain}/${t.accesstotal}`)),0===t.endofsale&&r.a.createElement(P.default,{variant:"contained",buttonColor:D.a,style:{flexGrow:1.5,margin:"16px 0"},onClick:()=>l({action:"delete"})},"จบการขาย"),r.a.createElement(v.a,{style:{margin:"16px 0"}})),r.a.createElement(y.a,{fullWidth:!0,name:"business_name",label:"ชื่อกิจการ",value:n.business_name,style:{marginBottom:16},variant:"outlined",size:"small",onChange:e=>o({...n,business_name:e.target.value})}),r.a.createElement(c.a,{variant:"h6"},"เงื่อนไขการขาย"),r.a.createElement(y.a,{fullWidth:!0,name:"sale_condition",value:n.sale_condition,style:{marginBottom:16,marginTop:16},variant:"outlined",multiline:!0,size:"small",rowsMax:"10",onChange:e=>o({...n,sale_condition:e.target.value})}),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},r.a.createElement(h.a,{component:"legend"},"ผู้ให้ข้อมูล"),r.a.createElement(E.a,{name:"position",value:n.position,onChange:e=>{o({...n,position:parseInt(e.target.value)})}},a.position.map((e,t)=>r.a.createElement(x.a,{key:e,value:t,control:r.a.createElement(O.a,{color:"primary"}),label:e})))))),Z=({editting:e,businessForm:t,form:a,setForm:o,album:l,setAlbum:s,albumDisplay:i,setAlbumDisplay:u})=>{G();const{_dateToString:m,_parseLocation:d}=Object(n.useContext)(B.a),[p,f]=Object(n.useState)([]),[b,g]=Object(n.useState)("0"),[y,h]=Object(n.useState)("0"),[E,x]=Object(n.useState)(null),[O,j]=Object(n.useState)(null),[k,S]=Object(n.useState)(null),w={province:E,setProvince:x,district:O,setDistrict:j,subdistrict:k,setSubdistrict:S};function _({value:e,type:a}){return("product"===a?t.product:t.productvalue)[parseInt(e)]}return Object(n.useEffect)(()=>{const e=[];a.product.forEach((t,n)=>{e.push({product:a.product[n],amount:a.productvalue[n]})}),f(e),x(d(a.location).province),j(d(a.location).district),S(d(a.location).subdistrict)},[]),Object(n.useEffect)(()=>{(E||O||k)&&o({...a,location:JSON.stringify({province:E,district:O,subdistrict:k})})},[E,O,k]),r.a.createElement("div",null,r.a.createElement(c.a,{variant:"h6"},"วัสดุเหลือใช้ที่ต้องการจัดจำหน่าย"),r.a.createElement(c.a,null,"เลือกเฉพาะสินค้าที่ต้องการจำหน่าย กรณีพาเลทไม้เปลี่ยนจากหน่วย kg เป็น ตัว (pcs)"),p.map((e,t)=>r.a.createElement("div",{style:{display:"flex",alignItems:"center"},key:t},r.a.createElement(c.a,{variant:"body2",style:{flex:1}},e.product),r.a.createElement(c.a,{variant:"body2",style:{flex:1}},e.amount),r.a.createElement(C.a,{onClick:()=>function(e){const t=[...p];f(t.filter((t,a)=>a!==e)),o({...a,product:t.filter((t,a)=>a!==e).map(e=>e.product),productvalue:t.filter((t,a)=>a!==e).map(e=>e.amount)})}(t)},r.a.createElement(I.a,null)))),r.a.createElement("div",{style:{display:"flex",margin:"16px 0"}},r.a.createElement("div",{style:{flex:1}},r.a.createElement(V,{label:"วัสดุ",value:b,onChange:e=>{g(e.target.value)},menuArr:t.product}),r.a.createElement("div",{style:{height:8}}),r.a.createElement(V,{label:"ปริมาณ",value:y,onChange:e=>{h(e.target.value)},menuArr:t.productvalue})),r.a.createElement("div",{style:{width:8}}),r.a.createElement(P.default,{size:"large",variant:"contained",buttonColor:F.a,onClick:function(){const e=[...p];e.push({product:_({type:"product",value:b}),amount:_({type:"amount",value:y})}),f(e),o({...a,product:e.map(e=>e.product),productvalue:e.map(e=>e.amount)}),g("0"),h("0")},disabled:a.product.some(e=>e===_({type:"product",value:b}))&&a.productvalue.some(e=>e===_({type:"amount",value:y}))},"เพิ่ม")),r.a.createElement("div",{style:{marginTop:16,display:"flex"}},r.a.createElement(R,Object.assign({fullWidth:!0,label:"อัพโหลดอัลบัมสินค้า"},{album:l,setAlbum:s,albumDisplay:i,setAlbumDisplay:u})),l&&l.length>0&&l.length<=10&&r.a.createElement(P.default,{buttonColor:F.a,onClick:()=>{s(null),u(null)}},"รีเซ็ต")),l&&(l.length>10?r.a.createElement(c.a,{style:{color:D.a[600],marginTop:8},align:"center"},"ห้ามเกิน 10 รูป"):r.a.createElement(c.a,{style:{marginTop:8},align:"center"},"รูปทั้งหมด ",l.length)),i&&i.length<=10&&r.a.createElement(T,Object.assign({},{editting:e},{files:i})),r.a.createElement(v.a,{style:{margin:"16px 0"}}),r.a.createElement(c.a,{variant:"h6"},"เขตพิ้นที่รับเศษวัสดุเหลือใช้"),(E||O||k)&&r.a.createElement(c.a,null,E.name,O?` > ${O.name}`:"",k?` > ${k.name} (${k.zip_code})`:""),r.a.createElement("div",{style:{height:12}}),r.a.createElement(A.a,Object.assign({},w)),E&&r.a.createElement(N.a,Object.assign({},w)),E&&O&&r.a.createElement(W.a,Object.assign({},w)),r.a.createElement(c.a,{variant:"h6",style:{marginBottom:12}},"วันนัดดูสินค้า และ วันเปิดประมูล"),r.a.createElement(L.a,{clearable:!0,fullWidth:!0,inputVariant:"outlined",label:"วันนัดดูสินค้า",clearLabel:"รีเซ็ต",okLabel:"ตกลง",cancelLabel:"ยกเลิก",value:a.appointment,minDateMessage:"",onChange:e=>o({...a,appointment:e}),labelFunc:()=>a.appointment?m(new Date(a.appointment)):"เลือกวันที่",style:{marginBottom:12}}),r.a.createElement(L.a,{clearable:!0,fullWidth:!0,inputVariant:"outlined",label:"วันเปิดประมูล",clearLabel:"รีเซ็ต",okLabel:"ตกลง",cancelLabel:"ยกเลิก",value:a.auctiondate,minDateMessage:"",onChange:e=>o({...a,auctiondate:e}),labelFunc:()=>a.auctiondate?m(new Date(a.auctiondate)):"เลือกวันที่",style:{marginBottom:12}}))},H=({businessForm:e,form:t,setForm:a})=>{const n=e=>{const n=[...t.transport],r=t.transport.some(e=>"etc"===e);e.target.checked?(n.push(e.target.value),a({...t,transport:n,...t.transport.some(e=>"etc"!==e)&&{transetc:""}})):a({...t,transport:n.filter(t=>t!==(r?"etc":e.target.value)),...t.transport.some(e=>"etc"!==e)&&{transetc:""}})},o=e=>{const n=[...t.document],r=t.document.some(e=>"etc"===e);e.target.checked?(n.push(e.target.value),a({...t,document:n,...t.document.some(e=>"etc"!==e)&&{docsetc:""}})):a({...t,document:n.filter(t=>t!==(r?"etc":e.target.value)),...t.document.some(e=>"etc"!==e)&&{docsetc:""}})};return r.a.createElement("div",null,e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},r.a.createElement(h.a,{component:"legend"},"รถที่ต้องการใช้ขนส่ง"),e.transport.map((e,a)=>r.a.createElement(x.a,{key:e,value:e,control:r.a.createElement(j.a,{checked:t.transport.some(t=>t===e),color:"primary",onChange:n}),label:e})),t.transport.some(e=>"etc"===e)?r.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},r.a.createElement(j.a,{checked:t.transport.some(e=>"etc"===e),color:"primary",onChange:n}),r.a.createElement(y.a,{fullWidth:!0,autoFocus:t.transport.some(e=>"etc"===e),name:"transetc",label:"อื่นๆ",size:"small",value:t.transetc,onChange:e=>a({...t,transetc:e.target.value})})):r.a.createElement(x.a,{value:"etc",control:r.a.createElement(j.a,{checked:t.transport.some(e=>"etc"===e),color:"primary",onChange:n}),label:"อื่นๆ"})),r.a.createElement(p.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},r.a.createElement(h.a,{component:"legend"},"เอกสารที่ต้องการควบคู่กับการซื้อขายวัสดุเหลือใช้"),e.document.map((e,a)=>r.a.createElement(x.a,{key:e,value:e,control:r.a.createElement(j.a,{checked:t.document.some(t=>t===e),color:"primary",onChange:o}),label:e})),t.document.some(e=>"etc"===e)?r.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},r.a.createElement(j.a,{checked:t.document.some(e=>"etc"===e),color:"primary",onChange:o}),r.a.createElement(y.a,{fullWidth:!0,autoFocus:t.document.some(e=>"etc"===e),name:"docsetc",label:"อื่นๆ",size:"small",value:t.docsetc,onChange:e=>a({...t,docsetc:e.target.value})})):r.a.createElement(x.a,{value:"etc",control:r.a.createElement(j.a,{checked:t.document.some(e=>"etc"===e),color:"primary",onChange:o}),label:"อื่นๆ"}))))},Q=({editting:e,businessForm:t,form:a,setForm:o,setActiveStep:l,albumDisplay:s,checked:i,setChecked:u})=>{const{_dateToString:m,_parseLocation:d}=Object(n.useContext)(B.a),[p,f]=Object(n.useState)(!1),b=()=>r.a.createElement("div",{style:{marginBottom:12}});return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(j.a,{color:"primary",checked:i,onChange:e=>u(e.target.checked),style:{marginRight:16}}),r.a.createElement(P.default,{style:{padding:0},buttonColor:F.a,variant:"text",onClick:()=>f(!0)},"ยอมรับเงื่อนไขและข้อตกลง")),s&&s.length<=10&&r.a.createElement(T,Object.assign({},{editting:e},{files:s})),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"ชื่อกิจการ"),""===a.business_name?r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},r.a.createElement(k.a,{style:{color:D.a[600]},onClick:()=>l(0)},"กรุณากรอกข้อมูล")):r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},a.business_name),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"ผู้ให้ข้อมูล"),r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},t.position[a.position]),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"ขนาดองค์กร"),r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},t.org_size[a.org_size]),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"วัสดุเหลือใช้ที่ต้องการจัดจำหน่าย"),a.product.length>0?a.product.map((e,t)=>r.a.createElement("div",{key:t,style:{display:"flex"}},r.a.createElement(c.a,{style:{flex:1}},e),r.a.createElement(c.a,{style:{flex:1}},a.productvalue[t]))):r.a.createElement(k.a,{style:{color:D.a[600]},onClick:()=>l(1)},"ไม่มีวัสดุ"),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"เขตพิ้นที่รับเศษวัสดุเหลือใช้"),""===d(a.location).label?r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},r.a.createElement(k.a,{style:{color:D.a[600]},onClick:()=>l(1)},"กรุณากรอกข้อมูล")):r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},d(a.location).label),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"วันนัดดูสินค้า"),r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},m(a.appointment)),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"วันเปิดประมูล"),r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},m(a.auctiondate)),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"รถที่ต้องการใช้ขนส่ง"),a.transport.length>0?a.transport.map(e=>r.a.createElement(c.a,{key:e,style:{flex:1}},"etc"===e?""===a.transetc?"อื่นๆ":a.transetc:e)):r.a.createElement(k.a,{style:{color:D.a[600]},onClick:()=>l(2)},"ไม่มีรถที่ใช้ขนส่ง"),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"เอกสารที่ต้องการควบคู่กับการซื้อขายวัสดุเหลือใช้"),a.document.length>0?a.document.map(e=>r.a.createElement(c.a,{key:e,style:{flex:1}},"etc"===e?""===a.docsetc?"อื่นๆ":a.docsetc:e)):r.a.createElement(k.a,{style:{color:D.a[600]},onClick:()=>l(2)},"ไม่มีเอกสาร"),r.a.createElement(b,null),r.a.createElement(c.a,{variant:"h6",style:{flex:1}},"เงื่อนไขการขาย"),""===a.sale_condition?r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1}},r.a.createElement(k.a,{style:{color:D.a[600]},onClick:()=>l(0)},"กรุณากรอกข้อมูล")):r.a.createElement(c.a,{gutterBottom:!0,style:{flex:1,whiteSpace:"pre-line"}},a.sale_condition),r.a.createElement(b,null),r.a.createElement(M,{open:p,onClose:()=>f(!1),title:"เงื่อนไขและข้อตกลง"},t&&r.a.createElement(c.a,{style:{marginBottom:16,whiteSpace:"pre-line"}},t.form_condition[0])))},U=r.a.memo(({history:e,match:t,editting:a})=>{const o=G(),{csrf:l,setCsrf:s,sess:c,addSnackbar:u,_xhrPost:m,_fetchFile:p,_fetchFileMultiple:f,profileData:b,_dateToAPI:g,getFormImg:v,useConfirmDeleteItem:y,realtimeAccess:h,realtimeEndOfSale:E,_parseLocation:x}=Object(n.useContext)(B.a),[O,C]=Object(n.useState)("/business/create"===window.location.pathname),[j,k]=r.a.useState(0),[w,_]=Object(n.useState)({business_name:"",position:0,sale_condition:"",org_size:0,product:[],productvalue:[],appointment:new Date,auctiondate:new Date,location:"",document:[],docsetc:"",transport:[],transetc:""}),[I,D]=Object(n.useState)(null),[L,A]=Object(n.useState)(null),[N,W]=Object(n.useState)(!1),[{confirmState:T,item:R},M]=y(),[K,V]=Object(n.useState)(null),[X,Z]=Object(n.useState)(null);async function H(){const e=await m({csrf:l,url:"loadregister",body:{action:"business_form",type:"business"}});if(s(e.csrf),A(e.data),a&&t){const{formid:a}=t.params;a&&(async function(e,t){const a=await m({csrf:l,url:"loadform",body:{action:"detail",formid:e,linetoken:b.userId}});s(a.csrf),function(e,t){const{business_name:a,sale_condition:n,appointment:r,auctiondate:o,location:l,product:s,document:i,transport:c}=e,u={business_name:a,sale_condition:n,org_size:0,appointment:r,auctiondate:o,location:l};Object.assign(u,{position:"",product:[],productvalue:[],document:[],docsetc:"",transport:[],transetc:""}),-1!==t.position.indexOf(e.position)&&Object.assign(u,{position:t.position.indexOf(e.position)});s.length>0&&Object.assign(u,{product:s.map(e=>e.product),productvalue:s.map(e=>e.value)});i.document&&i.document.length>0&&Object.assign(u,{document:i.document});c.transport&&c.transport.length>0&&Object.assign(u,{transport:c.transport});"none"!==i.etc&&Object.assign(u,{docsetc:i.etc});"none"!==c.etc&&Object.assign(u,{transetc:c.etc});_(u)}(a.data,t),D(a.data)}(parseInt(a),e.data),async function(e){const t=await m({csrf:l,url:"loadform",body:{action:"album",formid:e,linetoken:b.userId}});s(t.csrf),t.data&&t.data.filelist.length>0&&Z(t.data.filelist.map(t=>v({userid:c.userid,formid:e,file:t})))}(parseInt(a)))}}return Object(n.useEffect)(()=>{H(),a&&C(!0)},[]),r.a.createElement(S.a,{open:O,onClose:()=>C(!1),fullScreen:!0},r.a.createElement(q,null),r.a.createElement(J,Object.assign({},{businessForm:L,activeStep:j,setActiveStep:k,form:w,setForm:_,editting:a,goodsDetail:I,onEndSale:M,album:K,setAlbum:V,albumDisplay:X,setAlbumDisplay:Z,checked:N,setChecked:W})),r.a.createElement("div",{className:o.buttonGroup},r.a.createElement(i.b,{to:"/business",style:{textDecoration:"none",flexGrow:1,margin:8}},r.a.createElement(d.a,{style:{width:"100%"},color:"primary",variant:"outlined"},"ยกเลิก")),a?r.a.createElement(P.default,{variant:"contained",buttonColor:F.a,style:{flexGrow:1.5,margin:8},onClick:async function(){const{business_name:a,sale_condition:n,position:r,appointment:o,auctiondate:i,location:c,document:d,transport:p,docsetc:v,transetc:y,product:h,productvalue:E}=w,{formid:x}=t.params,O={action:"edit",linetoken:b.userId,formid:parseInt(x),transport:p,document:d,product:h,productvalue:E,...""!==v&&{docsetc:v},...""!==y&&{transetc:y}};I.business_name!==a&&Object.assign(O,{business_name:a}),I.sale_condition!==n&&Object.assign(O,{sale_condition:n}),L.position.indexOf(I.position)!==parseInt(r)&&Object.assign(O,{position:L.position[r]}),g(I.appointment)!==g(o)&&Object.assign(O,{appointment:g(o)}),g(I.auctiondate)!==g(i)&&Object.assign(O,{auctiondate:g(i)}),I.location!==c&&Object.assign(O,{location:c});const C=await m({csrf:l,url:"formsystem",body:O});s(C.csrf),"success"===C.data.product?(u({message:"แก้ไขสำเร็จ",variant:"success"}),K?K.length<=10?async function(t,a){const n=await f({url:"formsystem",csrf:a,headers:{action:"album",linetoken:b.userId,formid:t},body:{albumimage:K}});switch(V(null),s(n.csrf),n.data.status){case"success":u({message:"อัพโหลดอัลบัมสำเร็จ",variant:"success"}),e.push("/business");break;case"please delete your picture before":u({message:"กรูณาลบอัลบัมเก่าก่อนอัพโหลด",variant:"error"})}}(parseInt(x),C.csrf):u({message:"กรุณาอัพโหลดไม่เกิน 10 รูป",variant:"error"}):e.push("/business")):u({message:"แก้ไขไม่สำเร็จ",variant:"error"})}},"บันทึก"):3===j&&r.a.createElement(P.default,{variant:"contained",buttonColor:F.a,style:{flexGrow:1.5,margin:8},onClick:async function(){const{business_name:t,position:a,sale_condition:n,org_size:r,product:o,productvalue:i,appointment:c,auctiondate:d,location:p,document:v,transport:y,docsetc:h,transetc:E}=w,x={action:"create",linetoken:b.userId,business_name:t,position:L.position[a],sale_condition:n,product:o,productvalue:i,appointment:g(c),auctiondate:g(d),location:p,transport:y,document:v,...""!==h&&{docsetc:h},...""!==E&&{transetc:E}},O=await m({csrf:l,url:"formsystem",body:x});s(O.csrf),"success"===O.data.status?K?K.length<=10?async function(t,a){const n=await f({url:"formsystem",csrf:a,headers:{action:"album",linetoken:b.userId,formid:t},body:{albumimage:K}});switch(V(null),s(n.csrf),n.data.status){case"success":u({message:"สร้างสำเร็จ",variant:"success"}),e.push("/business");break;case"please delete your picture before":u({message:"กรูณาลบอัลบัมเก่าก่อนอัพโหลด",variant:"error"})}}(O.data.formid,O.csrf):u({message:"กรุณาอัพโหลดไม่เกิน 10 รูป",variant:"error"}):(u({message:"สร้างสำเร็จ",variant:"success"}),e.push("/business")):u({message:"สร้างไม่สำเร็จ",variant:"error"})},disabled:""===w.business_name||""===w.sale_condition||0===w.product.length||""===x(w.location).label||0===w.transport.length||0===w.document.length||X&&X.length>0||!N},"สร้าง")),r.a.createElement($,{open:T,onClose:()=>M({action:"cancel"}),onCancel:()=>M({action:"cancel"}),onSubmit:async function(){const{formid:a}=t.params,n=await m({csrf:l,url:"formsystem",body:{action:"endofsale",linetoken:b.userId,formid:parseInt(a)}});s(n.csrf),E(b),"success"===n.data.status&&u({message:"จบการขายสำเร็จ",variant:"success"}),e.push("/business")},title:"คุณแน่ใจหรือไม่ว่าต้องการจะจบการขายนี้ ?",submitText:"จบการขาย",headIcon:z.a}))});t.default=U},571:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(123);t.a=Object(o.a)(r.a.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel")},605:function(e,t,a){"use strict";var n=a(1),r=a(53),o=a(2),l=a(0),s=a.n(l),i=(a(3),a(7)),c=a(10),u=a(103),m=a(25),d=a(18),p=a(20),f=s.a.forwardRef((function(e,t){var a=e.classes,r=e.className,l=e.color,c=void 0===l?"primary":l,u=e.value,d=e.valueBuffer,f=e.variant,b=void 0===f?"indeterminate":f,g=Object(o.a)(e,["classes","className","color","value","valueBuffer","variant"]),v=Object(p.a)(),y={},h={bar1:{},bar2:{}};if("determinate"===b||"buffer"===b)if(void 0!==u){y["aria-valuenow"]=Math.round(u);var E=u-100;"rtl"===v.direction&&(E=-E),h.bar1.transform="translateX(".concat(E,"%)")}else 0;if("buffer"===b)if(void 0!==d){var x=(d||0)-100;"rtl"===v.direction&&(x=-x),h.bar2.transform="translateX(".concat(x,"%)")}else 0;return s.a.createElement("div",Object(n.a)({className:Object(i.a)(a.root,a["color".concat(Object(m.a)(c))],r,{determinate:a.determinate,indeterminate:a.indeterminate,buffer:a.buffer,query:a.query}[b]),role:"progressbar"},y,{ref:t},g),"buffer"===b?s.a.createElement("div",{className:Object(i.a)(a.dashed,a["dashedColor".concat(Object(m.a)(c))])}):null,s.a.createElement("div",{className:Object(i.a)(a.bar,a["barColor".concat(Object(m.a)(c))],("indeterminate"===b||"query"===b)&&a.bar1Indeterminate,{determinate:a.bar1Determinate,buffer:a.bar1Buffer}[b]),style:h.bar1}),"determinate"===b?null:s.a.createElement("div",{className:Object(i.a)(a.bar,("indeterminate"===b||"query"===b)&&a.bar2Indeterminate,"buffer"===b?[a["color".concat(Object(m.a)(c))],a.bar2Buffer]:a["barColor".concat(Object(m.a)(c))]),style:h.bar2}))})),b=Object(c.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(d.i)(t,.62):Object(d.a)(t,.5)},a=t(e.palette.primary.main),n=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4},colorPrimary:{backgroundColor:a},colorSecondary:{backgroundColor:n},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0px -23px"},"50%":{opacity:0,backgroundPosition:"0px -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(f),g=s.a.forwardRef((function(e,t){var a=e.activeStep,l=void 0===a?0:a,c=e.backButton,d=e.classes,p=e.className,f=e.LinearProgressProps,g=e.nextButton,v=e.position,y=void 0===v?"bottom":v,h=e.steps,E=e.variant,x=void 0===E?"dots":E,O=Object(o.a)(e,["activeStep","backButton","classes","className","LinearProgressProps","nextButton","position","steps","variant"]);return s.a.createElement(u.a,Object(n.a)({square:!0,elevation:0,className:Object(i.a)(d.root,d["position".concat(Object(m.a)(y))],p),ref:t},O),c,"text"===x&&s.a.createElement(s.a.Fragment,null,l+1," / ",h),"dots"===x&&s.a.createElement("div",{className:d.dots},Object(r.a)(new Array(h)).map((function(e,t){return s.a.createElement("div",{key:t,className:Object(i.a)(d.dot,t===l&&d.dotActive)})}))),"progress"===x&&s.a.createElement(b,Object(n.a)({className:d.progress,variant:"determinate",value:Math.ceil(l/(h-1)*100)},f)),g)}));t.a=Object(c.a)((function(e){return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.default,padding:8},positionBottom:{position:"fixed",bottom:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionTop:{position:"fixed",top:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionStatic:{},dots:{display:"flex",flexDirection:"row"},dot:{backgroundColor:e.palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},dotActive:{backgroundColor:e.palette.primary.main},progress:{width:"50%"}}}),{name:"MuiMobileStepper"})(g)}}]);