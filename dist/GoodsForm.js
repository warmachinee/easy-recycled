(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a(20),c=a(145);t.default=({children:e,variant:t,buttonColor:a,light:n=!1,...s})=>{const i=Object(l.a)();function m(e){switch(e){case"text":return{color:a?a[600]:i.palette.text.primary,"&:hover":{backgroundColor:a?a[n?100:50]:i.palette.action.hover}};case"contained":return{color:a?i.palette.getContrastText(a[n?700:600]):i.palette.text.primary,backgroundColor:a?a[n?600:500]:i.palette.background.default,"&:hover":{backgroundColor:a?a[n?800:700]:i.palette.action.hover}};case"outlined":return{color:a?a[600]:i.palette.text.primary,border:`1px solid ${a?a[600]:i.palette.text.primary}`,"&:hover":{backgroundColor:a?a[n?100:50]:i.palette.action.hover}};default:return{color:i.palette.text.primary,"&:hover":{backgroundColor:i.palette.action.hover}}}}const u=Object(o.a)(e=>({root:{...m(t)}}))(c.a);return r.a.createElement(u,Object.assign({},s,{variant:t}),e)}},169:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(104),l=a(28),c=a(377),s=a(149);const i=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=i(),{province:a,setProvince:o,setDistrict:m,setSubdistrict:u}=e,{csrf:d,setCsrf:p,_xhrGetP:b}=Object(n.useContext)(l.a),[f,g]=r.a.useState(!1),[y,v]=r.a.useState([]),E=f&&0===y.length;return r.a.useEffect(()=>{let e=!0;if(E)return(async()=>{const t=await b("https://easyrecycle.ml/user/location?type=provinces");p(t.csrf),e&&v(t.data)})(),()=>{e=!1}},[E]),r.a.useEffect(()=>{f||v([])},[f]),r.a.createElement(c.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:f,onOpen:()=>{g(!0)},onClose:()=>{g(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:y,loading:E,onChange:function(e,t){o(t),m(null),u(null)},noOptionsText:"ไม่มีจังหวัดที่คุณค้นหา",renderInput:e=>r.a.createElement(s.a,Object.assign({},e,{label:"จังหวัด",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},170:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(104),l=a(28),c=a(377),s=a(149);const i=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=i(),{district:a,province:o,setDistrict:m,setSubdistrict:u}=e,{csrf:d,setCsrf:p,_xhrGetP:b}=Object(n.useContext)(l.a),[f,g]=r.a.useState(!1),[y,v]=r.a.useState([]),E=f&&0===y.length;return r.a.useEffect(()=>{let e=!0;if(E)return(async()=>{const t=await b(`https://easyrecycle.ml/user/location?type=districts&provincesid=${o.id}`);p(t.csrf),e&&v(t.data)})(),()=>{e=!1}},[E,o]),r.a.useEffect(()=>{f||v([])},[f]),r.a.createElement(c.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:f,onOpen:()=>{g(!0)},onClose:()=>{g(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:y,loading:E,onChange:function(e,t){m(t),u(null)},noOptionsText:"ไม่มีเขต/อำเภอที่คุณค้นหา",renderInput:e=>r.a.createElement(s.a,Object.assign({},e,{label:"เขต/อำเภอ",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},171:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(104),l=a(28),c=a(377),s=a(149);const i=Object(o.a)(e=>({option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}));t.a=e=>{const t=i(),{subdistrict:a,district:o,setSubdistrict:m}=e,{csrf:u,setCsrf:d,_xhrGetP:p}=Object(n.useContext)(l.a),[b,f]=r.a.useState(!1),[g,y]=r.a.useState([]),v=b&&0===g.length;return r.a.useEffect(()=>{let e=!0;if(v)return(async()=>{const t=await p(`https://easyrecycle.ml/user/location?type=subdistricts&districtsid=${o.id}`);d(t.csrf),e&&y(t.data)})(),()=>{e=!1}},[v,o]),r.a.useEffect(()=>{b||y([])},[b]),r.a.createElement(c.a,{style:{width:"100%",marginBottom:12},classes:{option:t.option},open:b,onOpen:()=>{f(!0)},onClose:()=>{f(!1)},value:a,getOptionSelected:(e,t)=>e.name===t.name,getOptionLabel:e=>e.name,options:g,loading:v,onChange:function(e,t){m(t)},noOptionsText:"ไม่มีตำบลที่คุณค้นหา",renderInput:e=>r.a.createElement(s.a,Object.assign({},e,{label:"ตำบล",variant:"outlined",size:"small",inputProps:{...e.inputProps,autoComplete:"new-password"}}))})}},423:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(123);t.a=Object(o.a)(r.a.createElement("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeft")},424:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(123);t.a=Object(o.a)(r.a.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight")},578:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),c=a(104),s=a(40),i=a(176),m=a(20),u=a(613),d=a(145),p=a(629),b=a(146),f=a(638),g=a(188),y=a(151),v=a(149),E=a(147),h=a(379),x=a(257),O=a(378),C=a(139),j=a(608),k=a(425),S=a(189),w=a(423),_=a(424),I=a(177),B=a(579),z=a(28),F=a(124),P=a(38),A=a(39),D=a(607),L=a(169),N=a(170),W=a(171);const R=l()({loader:()=>Promise.all([a.e(7),a.e(49)]).then(a.bind(null,186)),loading:()=>null}),T=l()({loader:()=>a.e(63).then(a.bind(null,592)),loading:()=>null}),M=l()({loader:()=>Promise.all([a.e(0),a.e(37)]).then(a.bind(null,134)),loading:()=>null}),$=l()({loader:()=>Promise.all([a.e(0),a.e(25)]).then(a.bind(null,131)),loading:()=>null}),G=Object(c.a)(e=>({stepperRoot:{flexGrow:1},buttonGroup:{display:"flex",padding:8,position:"fixed",bottom:0,width:"100%",boxSizing:"border-box",backgroundColor:e.palette.background.default},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"}})),q=()=>r.a.createElement(i.a,{variant:"h6",style:{fontWeight:600},align:"center"},"ข้อมูลขายวัสดุเหลือใช้"),J=e=>{const t=G(),a=Object(m.a)(),{businessForm:n,activeStep:o,setActiveStep:l}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{variant:"dots",steps:4,position:"static",activeStep:o,nextButton:r.a.createElement(d.a,{size:"small",onClick:()=>{l(e=>e+1)},disabled:3===o},"Next","rtl"===a.direction?r.a.createElement(w.a,null):r.a.createElement(_.a,null)),backButton:0!==o?r.a.createElement(d.a,{size:"small",onClick:()=>{l(e=>e-1)}},"rtl"===a.direction?r.a.createElement(_.a,null):r.a.createElement(w.a,null),"Back"):r.a.createElement("div",{style:{width:66.31}})}),r.a.createElement("div",{className:t.stepperRoot,style:{padding:"16px 16px 68px 16px",overflow:"auto"}},r.a.createElement(K,Object.assign({},e))))},K=({activeStep:e,...t})=>{switch(e){case 0:return r.a.createElement(X,Object.assign({},t));case 1:return r.a.createElement(Z,Object.assign({},t));case 2:return r.a.createElement(H,Object.assign({},t));case 3:return r.a.createElement(Q,Object.assign({},t));default:return r.a.createElement("div",null,"default")}},V=e=>{const{label:t,value:a,onChange:n,menuArr:o}=e,l=r.a.useRef(null),[c,s]=r.a.useState(0);return r.a.useEffect(()=>{s(l.current.offsetWidth)},[]),r.a.createElement(p.a,{fullWidth:!0,variant:"outlined",size:"small"},r.a.createElement(b.a,{ref:l},t),r.a.createElement(f.a,{labelWidth:c,value:a,onChange:n},o.map((e,t)=>r.a.createElement(g.a,{key:t,value:t},e))))},X=({editting:e,goodsDetail:t,businessForm:a,form:n,setForm:o,onEndSale:l})=>r.a.createElement("div",null,e&&t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"จำนวนการเข้าชม"),r.a.createElement(i.a,{variant:"h6"},`${t.accessremain}/${t.accesstotal}`)),0===t.endofsale&&r.a.createElement(F.default,{variant:"contained",buttonColor:P.a,style:{flexGrow:1.5,margin:"16px 0"},onClick:()=>l({action:"delete"})},"จบการขาย"),r.a.createElement(y.a,{style:{margin:"16px 0"}})),r.a.createElement(v.a,{fullWidth:!0,name:"business_name",label:"ชื่อกิจการ",value:n.business_name,style:{marginBottom:16},variant:"outlined",size:"small",onChange:e=>o({...n,business_name:e.target.value})}),r.a.createElement(p.a,{component:"fieldset",fullWidth:!0,style:{marginBottom:16,marginTop:16}},r.a.createElement(E.a,{component:"legend"},"เงื่อนไขการขาย Scarp"),r.a.createElement(h.a,{value:n.sale_condition,onChange:e=>o({...n,sale_condition:e.target.value})},r.a.createElement(x.a,{value:"เช็คราคา Scarp",control:r.a.createElement(O.a,{color:"primary"}),label:"เช็คราคา Scarp"}),r.a.createElement(x.a,{value:"ขายด่วน",control:r.a.createElement(O.a,{color:"primary"}),label:"ขายด่วน"}),r.a.createElement(x.a,{value:"ขาย (เฉพาะครั้งนี้)",control:r.a.createElement(O.a,{color:"primary"}),label:"ขาย (เฉพาะครั้งนี้)"}),r.a.createElement(x.a,{value:"ขาย (สัญญา 3 เดือน)",control:r.a.createElement(O.a,{color:"primary"}),label:"ขาย (สัญญา 3 เดือน)"}),r.a.createElement(x.a,{value:"ขาย (สัญญา 6 เดือน)",control:r.a.createElement(O.a,{color:"primary"}),label:"ขาย (สัญญา 6 เดือน)"}),r.a.createElement(x.a,{value:"ขาย (สัญญา 1 ปี)",control:r.a.createElement(O.a,{color:"primary"}),label:"ขาย (สัญญา 1 ปี)"}))),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},r.a.createElement(E.a,{component:"legend"},"ผู้ให้ข้อมูล"),r.a.createElement(h.a,{name:"position",value:n.position,onChange:e=>{o({...n,position:parseInt(e.target.value)})}},a.position.map((e,t)=>r.a.createElement(x.a,{key:e,value:t,control:r.a.createElement(O.a,{color:"primary"}),label:e})))))),Z=({editting:e,businessForm:t,form:a,setForm:o,album:l,setAlbum:c,albumDisplay:s,setAlbumDisplay:m,rawAlbum:u,loadBusinessForm:d,thisFormId:p})=>{G();const{_dateToString:b,_parseLocation:f}=Object(n.useContext)(z.a),[g,v]=Object(n.useState)([]),[E,h]=Object(n.useState)("0"),[x,O]=Object(n.useState)("0"),[j,k]=Object(n.useState)(null),[S,w]=Object(n.useState)(null),[_,B]=Object(n.useState)(null),M={province:j,setProvince:k,district:S,setDistrict:w,subdistrict:_,setSubdistrict:B};function $({value:e,type:a}){return("product"===a?t.product:t.productvalue)[parseInt(e)]}return Object(n.useEffect)(()=>{const t=[];a.product.forEach((e,n)=>{t.push({product:a.product[n],amount:a.productvalue[n]})}),v(t),e&&(k(f(a.location).province),w(f(a.location).district),B(f(a.location).subdistrict))},[]),Object(n.useEffect)(()=>{(j||S||_)&&o({...a,location:JSON.stringify({province:j,district:S,subdistrict:_})})},[j,S,_]),r.a.createElement("div",null,r.a.createElement(i.a,{variant:"h6"},"วัสดุเหลือใช้ที่ต้องการจัดจำหน่าย"),r.a.createElement(i.a,null,"เลือกเฉพาะสินค้าที่ต้องการจำหน่าย กรณีพาเลทไม้เปลี่ยนจากหน่วย kg เป็น ตัว (pcs)"),g.map((e,t)=>r.a.createElement("div",{style:{display:"flex",alignItems:"center"},key:t},r.a.createElement(i.a,{variant:"body2",style:{flex:1}},e.product),r.a.createElement(i.a,{variant:"body2",style:{flex:1}},e.amount),r.a.createElement(C.a,{onClick:()=>function(e){const t=[...g];v(t.filter((t,a)=>a!==e)),o({...a,product:t.filter((t,a)=>a!==e).map(e=>e.product),productvalue:t.filter((t,a)=>a!==e).map(e=>e.amount)})}(t)},r.a.createElement(I.a,null)))),r.a.createElement("div",{style:{display:"flex",margin:"16px 0"}},r.a.createElement("div",{style:{flex:1}},r.a.createElement(V,{label:"วัสดุ",value:E,onChange:e=>{h(e.target.value)},menuArr:t.product}),r.a.createElement("div",{style:{height:8}}),r.a.createElement(V,{label:"ปริมาณ",value:x,onChange:e=>{O(e.target.value)},menuArr:t.productvalue})),r.a.createElement("div",{style:{width:8}}),r.a.createElement(F.default,{size:"large",variant:"contained",buttonColor:A.a,onClick:function(){const e=[...g];e.push({product:$({type:"product",value:E}),amount:$({type:"amount",value:x})}),v(e),o({...a,product:e.map(e=>e.product),productvalue:e.map(e=>e.amount)}),h("0"),O("0")},disabled:a.product.some(e=>e===$({type:"product",value:E}))&&a.productvalue.some(e=>e===$({type:"amount",value:x}))},"เพิ่ม")),r.a.createElement("div",{style:{marginTop:16,display:"flex"}},r.a.createElement(T,Object.assign({fullWidth:!0,label:"อัพโหลดอัลบัมสินค้า"},{album:l,setAlbum:c,albumDisplay:s,setAlbumDisplay:m,editting:e})),l&&l.length>0&&r.a.createElement(F.default,{buttonColor:A.a,onClick:()=>{c(null),m(null)}},"รีเซ็ต")),l&&(l.length>10?r.a.createElement(i.a,{style:{color:P.a[600],marginTop:8},align:"center"},"ห้ามเกิน 10 รูป"):r.a.createElement(i.a,{style:{marginTop:8},align:"center"},"รูปทั้งหมด ",l.length)),s&&s.length>0&&r.a.createElement(R,Object.assign({},{editting:e,rawAlbum:u,loadBusinessForm:d,thisFormId:p},{files:s.slice(0,10)})),r.a.createElement(y.a,{style:{margin:"16px 0"}}),r.a.createElement(i.a,{variant:"h6"},"เขตพื้นที่รับเศษวัสดุเหลือใช้"),(j||S||_)&&r.a.createElement(i.a,null,j.name,S?` > ${S.name}`:"",_?` > ${_.name} (${_.zip_code})`:""),r.a.createElement("div",{style:{height:12}}),r.a.createElement(L.a,Object.assign({},M)),j&&r.a.createElement(N.a,Object.assign({},M)),j&&S&&r.a.createElement(W.a,Object.assign({},M)),r.a.createElement(i.a,{variant:"h6",style:{marginBottom:12}},"วันนัดดูสินค้า และ วันเปิดประมูล"),r.a.createElement(D.a,{clearable:!0,fullWidth:!0,inputVariant:"outlined",label:"วันนัดดูสินค้า",clearLabel:"รีเซ็ต",okLabel:"ตกลง",cancelLabel:"ยกเลิก",value:a.appointment,minDateMessage:"",onChange:e=>o({...a,appointment:e}),labelFunc:()=>a.appointment?b(new Date(a.appointment)):"เลือกวันที่",style:{marginBottom:12}}),r.a.createElement(D.a,{clearable:!0,fullWidth:!0,inputVariant:"outlined",label:"วันเปิดประมูล",clearLabel:"รีเซ็ต",okLabel:"ตกลง",cancelLabel:"ยกเลิก",value:a.auctiondate,minDateMessage:"",onChange:e=>o({...a,auctiondate:e}),labelFunc:()=>a.auctiondate?b(new Date(a.auctiondate)):"เลือกวันที่",style:{marginBottom:12}}))},H=({businessForm:e,form:t,setForm:a})=>{const n=e=>{const n=[...t.transport],r=t.transport.some(e=>"etc"===e);e.target.checked?(n.push(e.target.value),a({...t,transport:n,...t.transport.some(e=>"etc"!==e)&&{transetc:""}})):a({...t,transport:n.filter(t=>t!==(r?"etc":e.target.value)),...t.transport.some(e=>"etc"!==e)&&{transetc:""}})},o=e=>{const n=[...t.document],r=t.document.some(e=>"etc"===e);e.target.checked?(n.push(e.target.value),a({...t,document:n,...t.document.some(e=>"etc"!==e)&&{docsetc:""}})):a({...t,document:n.filter(t=>t!==(r?"etc":e.target.value)),...t.document.some(e=>"etc"!==e)&&{docsetc:""}})};return r.a.createElement("div",null,e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},r.a.createElement(E.a,{component:"legend"},"รถที่ต้องการใช้ขนส่ง"),e.transport.map((e,a)=>r.a.createElement(x.a,{key:e,value:e,control:r.a.createElement(j.a,{checked:t.transport.some(t=>t===e),color:"primary",onChange:n}),label:e})),t.transport.some(e=>"etc"===e)?r.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},r.a.createElement(j.a,{checked:t.transport.some(e=>"etc"===e),color:"primary",onChange:n}),r.a.createElement(v.a,{fullWidth:!0,autoFocus:t.transport.some(e=>"etc"===e),name:"transetc",label:"อื่นๆ",size:"small",value:t.transetc,onChange:e=>a({...t,transetc:e.target.value})})):r.a.createElement(x.a,{value:"etc",control:r.a.createElement(j.a,{checked:t.transport.some(e=>"etc"===e),color:"primary",onChange:n}),label:"อื่นๆ"})),r.a.createElement(p.a,{component:"fieldset",style:{marginBottom:16},fullWidth:!0},r.a.createElement(E.a,{component:"legend"},"เอกสารที่ต้องการควบคู่กับการซื้อขายวัสดุเหลือใช้"),e.document.map((e,a)=>r.a.createElement(x.a,{key:e,value:e,control:r.a.createElement(j.a,{checked:t.document.some(t=>t===e),color:"primary",onChange:o}),label:e})),t.document.some(e=>"etc"===e)?r.a.createElement("div",{style:{cursor:"pointer",display:"inline-flex",alignItems:"center",marginLeft:-11,marginRight:16,verticalAlign:"middle"}},r.a.createElement(j.a,{checked:t.document.some(e=>"etc"===e),color:"primary",onChange:o}),r.a.createElement(v.a,{fullWidth:!0,autoFocus:t.document.some(e=>"etc"===e),name:"docsetc",label:"อื่นๆ",size:"small",value:t.docsetc,onChange:e=>a({...t,docsetc:e.target.value})})):r.a.createElement(x.a,{value:"etc",control:r.a.createElement(j.a,{checked:t.document.some(e=>"etc"===e),color:"primary",onChange:o}),label:"อื่นๆ"}))))},Q=({editting:e,businessForm:t,form:a,setForm:o,setActiveStep:l,albumDisplay:c,checked:s,setChecked:m})=>{const{_dateToString:u,_parseLocation:d}=Object(n.useContext)(z.a),[p,b]=Object(n.useState)(!1),f=()=>r.a.createElement("div",{style:{marginBottom:12}});return r.a.createElement("div",null,!e&&r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(j.a,{color:"primary",checked:s,onChange:e=>m(e.target.checked),style:{marginRight:16}}),r.a.createElement(F.default,{style:{padding:0},buttonColor:A.a,variant:"text",onClick:()=>b(!0)},"ยอมรับเงื่อนไขและข้อตกลง")),c&&c.length>0&&r.a.createElement(R,Object.assign({},{editting:e},{files:c.slice(0,10)})),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"ชื่อกิจการ"),""===a.business_name?r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},r.a.createElement(k.a,{style:{color:P.a[600]},onClick:()=>l(0)},"กรุณากรอกข้อมูล")):r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},a.business_name),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"ผู้ให้ข้อมูล"),r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},t.position[a.position]),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"ขนาดองค์กร"),r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},t.org_size[a.org_size]),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"วัสดุเหลือใช้ที่ต้องการจัดจำหน่าย"),a.product.length>0?a.product.map((e,t)=>r.a.createElement("div",{key:t,style:{display:"flex"}},r.a.createElement(i.a,{style:{flex:1}},e),r.a.createElement(i.a,{style:{flex:1}},a.productvalue[t]))):r.a.createElement(k.a,{style:{color:P.a[600]},onClick:()=>l(1)},"ไม่มีวัสดุ"),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"เขตพื้นที่รับเศษวัสดุเหลือใช้"),""===d(a.location).label||"จังหวัด > เขต/อำเภอ > ตำบล (1)"===d(a.location).label?r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},r.a.createElement(k.a,{style:{color:P.a[600]},onClick:()=>l(1)},"กรุณากรอกข้อมูล")):r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},d(a.location).label),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"วันนัดดูสินค้า"),r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},u(a.appointment)),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"วันเปิดประมูล"),r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},u(a.auctiondate)),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"รถที่ต้องการใช้ขนส่ง"),a.transport.length>0?a.transport.map(e=>r.a.createElement(i.a,{key:e,style:{flex:1}},"etc"===e?""===a.transetc?"อื่นๆ":a.transetc:e)):r.a.createElement(k.a,{style:{color:P.a[600]},onClick:()=>l(2)},"ไม่มีรถที่ใช้ขนส่ง"),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"เอกสารที่ต้องการควบคู่กับการซื้อขายวัสดุเหลือใช้"),a.document.length>0?a.document.map(e=>r.a.createElement(i.a,{key:e,style:{flex:1}},"etc"===e?""===a.docsetc?"อื่นๆ":a.docsetc:e)):r.a.createElement(k.a,{style:{color:P.a[600]},onClick:()=>l(2)},"ไม่มีเอกสาร"),r.a.createElement(f,null),r.a.createElement(i.a,{variant:"h6",style:{flex:1}},"เงื่อนไขการขาย Scarp"),""===a.sale_condition?r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1}},r.a.createElement(k.a,{style:{color:P.a[600]},onClick:()=>l(0)},"กรุณากรอกข้อมูล")):r.a.createElement(i.a,{gutterBottom:!0,style:{flex:1,whiteSpace:"pre-line"}},a.sale_condition),r.a.createElement(f,null),r.a.createElement(M,{open:p,onClose:()=>b(!1),title:"เงื่อนไขและข้อตกลง"},t&&r.a.createElement(i.a,{style:{marginBottom:16,whiteSpace:"pre-line"}},t.form_condition[0])))},U=r.a.memo(({history:e,match:t,editting:a})=>{const o=G(),{csrf:l,setCsrf:c,sess:i,addSnackbar:m,_xhrPost:u,_fetchFile:p,_fetchFileMultiple:b,profileData:f,_dateToAPI:g,getFormImg:y,useConfirmDeleteItem:v,realtimeAccess:E,realtimeEndOfSale:h,_parseLocation:x}=Object(n.useContext)(z.a),[O,C]=Object(n.useState)("/business/create"===window.location.pathname),[j,k]=r.a.useState(0),[w,_]=Object(n.useState)({business_name:"",position:0,sale_condition:"เช็คราคา Scarp",org_size:0,product:[],productvalue:[],appointment:new Date,auctiondate:new Date,location:"",document:[],docsetc:"",transport:[],transetc:""}),[I,P]=Object(n.useState)(null),[D,L]=Object(n.useState)(null),[N,W]=Object(n.useState)(!1),[{confirmState:R,item:T},M]=v(),[K,V]=Object(n.useState)(null),[X,Z]=Object(n.useState)(null),[H,Q]=Object(n.useState)(null),[U,Y]=Object(n.useState)(null);async function ee(){const e=await u({csrf:l,url:"loadregister",body:{action:"business_form",type:"business"}});if(c(e.csrf),L(e.data),a&&t){const{formid:a}=t.params;a&&(Y(parseInt(a)),async function(e,t){const a=await u({csrf:l,url:"loadform",body:{action:"detail",formid:e,linetoken:f.userId}});c(a.csrf),function(e,t){const{business_name:a,sale_condition:n,appointment:r,auctiondate:o,location:l,product:c,document:s,transport:i}=e,m={business_name:a,sale_condition:n,org_size:0,appointment:r,auctiondate:o,location:l};Object.assign(m,{position:"",product:[],productvalue:[],document:[],docsetc:"",transport:[],transetc:""}),-1!==t.position.indexOf(e.position)&&Object.assign(m,{position:t.position.indexOf(e.position)});c.length>0&&Object.assign(m,{product:c.map(e=>e.product),productvalue:c.map(e=>e.value)});s.document&&s.document.length>0&&Object.assign(m,{document:s.document});i.transport&&i.transport.length>0&&Object.assign(m,{transport:i.transport});"none"!==s.etc&&Object.assign(m,{docsetc:s.etc});"none"!==i.etc&&Object.assign(m,{transetc:i.etc});_(m)}(a.data,t),P(a.data)}(parseInt(a),e.data),async function(e){const t=await u({csrf:l,url:"loadform",body:{action:"album",formid:e,linetoken:f.userId}});c(t.csrf),t.data&&t.data.filelist.length>0&&(Z(t.data.filelist.map(t=>y({userid:i.userid,formid:e,file:t}))),Q(t.data.filelist))}(parseInt(a)))}}return Object(n.useEffect)(()=>{ee(),a&&C(!0)},[]),r.a.createElement(S.a,{open:O,onClose:()=>C(!1),fullScreen:!0},r.a.createElement(q,null),r.a.createElement(J,Object.assign({},{businessForm:D,activeStep:j,setActiveStep:k,form:w,setForm:_,editting:a,goodsDetail:I,onEndSale:M,album:K,setAlbum:V,albumDisplay:X,setAlbumDisplay:Z,rawAlbum:H,setRawAlbum:Q,checked:N,setChecked:W,loadBusinessForm:ee,thisFormId:U})),r.a.createElement("div",{className:o.buttonGroup},r.a.createElement(s.b,{to:"/business",style:{textDecoration:"none",flexGrow:1,margin:8}},r.a.createElement(d.a,{style:{width:"100%"},color:"primary",variant:"outlined"},"ยกเลิก")),a?r.a.createElement(F.default,{variant:"contained",buttonColor:A.a,style:{flexGrow:1.5,margin:8},onClick:async function(){const{business_name:a,sale_condition:n,position:r,appointment:o,auctiondate:s,location:i,document:d,transport:p,docsetc:y,transetc:v,product:E,productvalue:h}=w,{formid:x}=t.params,O={action:"edit",linetoken:f.userId,formid:parseInt(x),transport:p,document:d,product:E,productvalue:h,...""!==y&&{docsetc:y},...""!==v&&{transetc:v}};I.business_name!==a&&Object.assign(O,{business_name:a}),I.sale_condition!==n&&Object.assign(O,{sale_condition:n}),D.position.indexOf(I.position)!==parseInt(r)&&Object.assign(O,{position:D.position[r]}),g(I.appointment)!==g(o)&&Object.assign(O,{appointment:g(o)}),g(I.auctiondate)!==g(s)&&Object.assign(O,{auctiondate:g(s)}),I.location!==i&&Object.assign(O,{location:i});const C=await u({csrf:l,url:"formsystem",body:O});c(C.csrf),"success"===C.data.product?(m({message:"แก้ไขสำเร็จ",variant:"success"}),K?K.length<=10?async function(t,a){const n=await b({url:"formsystem",csrf:a,headers:{action:"album",linetoken:f.userId,formid:t},body:{albumimage:K.slice(0,10)}});switch(V(null),c(n.csrf),n.data.status){case"success":m({message:"อัพโหลดอัลบัมสำเร็จ",variant:"success"}),e.push("/business");break;case"please delete your picture before":m({message:"กรูณาลบอัลบัมเก่าก่อนอัพโหลด",variant:"error"})}}(parseInt(x),C.csrf):m({message:"กรุณาอัพโหลดไม่เกิน 10 รูป",variant:"error"}):e.push("/business")):m({message:"แก้ไขไม่สำเร็จ",variant:"error"})}},"บันทึก"):3===j&&r.a.createElement(F.default,{variant:"contained",buttonColor:A.a,style:{flexGrow:1.5,margin:8},onClick:async function(){const{business_name:t,position:a,sale_condition:n,org_size:r,product:o,productvalue:s,appointment:i,auctiondate:d,location:p,document:y,transport:v,docsetc:E,transetc:h}=w,x={action:"create",linetoken:f.userId,business_name:t,position:D.position[a],sale_condition:n,product:o,productvalue:s,appointment:g(i),auctiondate:g(d),location:p,transport:v,document:y,...""!==E&&{docsetc:E},...""!==h&&{transetc:h}},O=await u({csrf:l,url:"formsystem",body:x});c(O.csrf),"success"===O.data.status?K?K.length<=10?async function(t,a){const n=await b({url:"formsystem",csrf:a,headers:{action:"album",linetoken:f.userId,formid:t},body:{albumimage:K.slice(0,10)}});switch(V(null),c(n.csrf),n.data.status){case"success":m({message:"สร้างสำเร็จ",variant:"success"}),e.push("/business");break;case"please delete your picture before":m({message:"กรูณาลบอัลบัมเก่าก่อนอัพโหลด",variant:"error"})}}(O.data.formid,O.csrf):m({message:"กรุณาอัพโหลดไม่เกิน 10 รูป",variant:"error"}):(m({message:"สร้างสำเร็จ",variant:"success"}),e.push("/business")):m({message:"สร้างไม่สำเร็จ",variant:"error"})},disabled:""===w.business_name||""===w.sale_condition||0===w.product.length||""===x(w.location).label||"จังหวัด > เขต/อำเภอ > ตำบล (1)"===x(w.location).label||0===w.transport.length||0===w.document.length||!X||0===X.length||!N},"สร้าง")),r.a.createElement($,{open:R,onClose:()=>M({action:"cancel"}),onCancel:()=>M({action:"cancel"}),onSubmit:async function(){const{formid:a}=t.params,n=await u({csrf:l,url:"formsystem",body:{action:"endofsale",linetoken:f.userId,formid:parseInt(a)}});c(n.csrf),h(f),"success"===n.data.status&&m({message:"จบการขายสำเร็จ",variant:"success"}),e.push("/business")},title:"คุณแน่ใจหรือไม่ว่าต้องการจะจบการขายนี้ ?",submitText:"จบการขาย",headIcon:B.a}))});t.default=U},579:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(123);t.a=Object(o.a)(r.a.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel")},613:function(e,t,a){"use strict";var n=a(1),r=a(53),o=a(2),l=a(0),c=a.n(l),s=(a(3),a(7)),i=a(10),m=a(103),u=a(25),d=a(18),p=a(20),b=c.a.forwardRef((function(e,t){var a=e.classes,r=e.className,l=e.color,i=void 0===l?"primary":l,m=e.value,d=e.valueBuffer,b=e.variant,f=void 0===b?"indeterminate":b,g=Object(o.a)(e,["classes","className","color","value","valueBuffer","variant"]),y=Object(p.a)(),v={},E={bar1:{},bar2:{}};if("determinate"===f||"buffer"===f)if(void 0!==m){v["aria-valuenow"]=Math.round(m);var h=m-100;"rtl"===y.direction&&(h=-h),E.bar1.transform="translateX(".concat(h,"%)")}else 0;if("buffer"===f)if(void 0!==d){var x=(d||0)-100;"rtl"===y.direction&&(x=-x),E.bar2.transform="translateX(".concat(x,"%)")}else 0;return c.a.createElement("div",Object(n.a)({className:Object(s.a)(a.root,a["color".concat(Object(u.a)(i))],r,{determinate:a.determinate,indeterminate:a.indeterminate,buffer:a.buffer,query:a.query}[f]),role:"progressbar"},v,{ref:t},g),"buffer"===f?c.a.createElement("div",{className:Object(s.a)(a.dashed,a["dashedColor".concat(Object(u.a)(i))])}):null,c.a.createElement("div",{className:Object(s.a)(a.bar,a["barColor".concat(Object(u.a)(i))],("indeterminate"===f||"query"===f)&&a.bar1Indeterminate,{determinate:a.bar1Determinate,buffer:a.bar1Buffer}[f]),style:E.bar1}),"determinate"===f?null:c.a.createElement("div",{className:Object(s.a)(a.bar,("indeterminate"===f||"query"===f)&&a.bar2Indeterminate,"buffer"===f?[a["color".concat(Object(u.a)(i))],a.bar2Buffer]:a["barColor".concat(Object(u.a)(i))]),style:E.bar2}))})),f=Object(i.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(d.i)(t,.62):Object(d.a)(t,.5)},a=t(e.palette.primary.main),n=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4},colorPrimary:{backgroundColor:a},colorSecondary:{backgroundColor:n},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0px -23px"},"50%":{opacity:0,backgroundPosition:"0px -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(b),g=c.a.forwardRef((function(e,t){var a=e.activeStep,l=void 0===a?0:a,i=e.backButton,d=e.classes,p=e.className,b=e.LinearProgressProps,g=e.nextButton,y=e.position,v=void 0===y?"bottom":y,E=e.steps,h=e.variant,x=void 0===h?"dots":h,O=Object(o.a)(e,["activeStep","backButton","classes","className","LinearProgressProps","nextButton","position","steps","variant"]);return c.a.createElement(m.a,Object(n.a)({square:!0,elevation:0,className:Object(s.a)(d.root,d["position".concat(Object(u.a)(v))],p),ref:t},O),i,"text"===x&&c.a.createElement(c.a.Fragment,null,l+1," / ",E),"dots"===x&&c.a.createElement("div",{className:d.dots},Object(r.a)(new Array(E)).map((function(e,t){return c.a.createElement("div",{key:t,className:Object(s.a)(d.dot,t===l&&d.dotActive)})}))),"progress"===x&&c.a.createElement(f,Object(n.a)({className:d.progress,variant:"determinate",value:Math.ceil(l/(E-1)*100)},b)),g)}));t.a=Object(i.a)((function(e){return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.default,padding:8},positionBottom:{position:"fixed",bottom:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionTop:{position:"fixed",top:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionStatic:{},dots:{display:"flex",flexDirection:"row"},dot:{backgroundColor:e.palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},dotActive:{backgroundColor:e.palette.primary.main},progress:{width:"50%"}}}),{name:"MuiMobileStepper"})(g)}}]);