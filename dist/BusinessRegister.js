(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["BusinessRegister"],{

/***/ "./src/page/Business/BusinessRegister.tsx":
/*!************************************************!*\
  !*** ./src/page/Business/BusinessRegister.tsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/styles */ \"./node_modules/@material-ui/styles/esm/index.js\");\n/* harmony import */ var react_text_mask__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-text-mask */ \"./node_modules/react-text-mask/dist/reactTextMask.js\");\n/* harmony import */ var react_text_mask__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_text_mask__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n/* harmony import */ var _AppContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../AppContext */ \"./src/AppContext.tsx\");\n\r\n\r\n\r\n\r\n\r\nconst useStyles = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_1__[\"makeStyles\"])((theme) => ({\r\n    root: { padding: theme.spacing(1, 2) },\r\n    profileCard: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        padding: 16\r\n    },\r\n    avatar: { width: 100, height: 100, margin: \"8px auto\" },\r\n    displayName: { fontWeight: 600 },\r\n    status: {},\r\n    textField: { marginBottom: 8 }\r\n}));\r\nfunction TextMaskCustom(props) {\r\n    const { inputRef, ...other } = props;\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_text_mask__WEBPACK_IMPORTED_MODULE_2___default.a, Object.assign({}, other, { ref: (ref) => {\r\n            inputRef(ref ? ref.inputElement : null);\r\n        }, mask: [\r\n            \"(\",\r\n            /[0-9]/,\r\n            /\\d/,\r\n            /\\d/,\r\n            \")\",\r\n            \" \",\r\n            /\\d/,\r\n            /\\d/,\r\n            /\\d/,\r\n            \"-\",\r\n            /\\d/,\r\n            /\\d/,\r\n            /\\d/,\r\n            /\\d/\r\n        ], placeholderChar: \"\\u2000\" })));\r\n}\r\nconst ProfileCard = ({ form }) => {\r\n    const classes = useStyles();\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Paper\"], { className: classes.profileCard },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Avatar\"], { className: classes.avatar, src: form.picture }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { className: classes.displayName, align: \"center\" }, form.displayname),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { className: classes.status, gutterBottom: true, variant: \"body2\", align: \"center\" }, form.statusmassage)));\r\n};\r\nconst RegisterForm = ({ form, setForm, businessForm }) => {\r\n    const classes = useStyles();\r\n    const { csrf, setCsrf, phoneFormatToNumber, _xhrPost, profileData, getSess } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_4__[\"AppContext\"]);\r\n    function onFormChange(e) {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n    }\r\n    function handleKeyPress(e) {\r\n        if (e.key === \"Enter\") {\r\n            handleRegister();\r\n        }\r\n    }\r\n    async function handleRegister() {\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"register\",\r\n            body: {\r\n                linetoken: profileData.userId,\r\n                type: \"business\",\r\n                ...form,\r\n                tel: phoneFormatToNumber(form.tel)\r\n            }\r\n        });\r\n        console.log(res);\r\n        setCsrf(res.csrf);\r\n        getSess(profileData);\r\n    }\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null,\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { variant: \"h6\", style: { marginTop: 16 } }, \"\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01\"),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], { className: classes.textField, fullWidth: true, name: \"email\", label: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\", value: form.email, onChange: onFormChange, onKeyPress: handleKeyPress }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], { className: classes.textField, fullWidth: true, name: \"fullname\", label: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\", value: form.fullname, onChange: onFormChange, onKeyPress: handleKeyPress }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], { className: classes.textField, fullWidth: true, name: \"lastname\", label: \"\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\", value: form.lastname, onChange: onFormChange, onKeyPress: handleKeyPress }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], { className: classes.textField, fullWidth: true, name: \"tel\", label: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C\", InputProps: {\r\n                inputComponent: TextMaskCustom\r\n            }, value: form.tel, onChange: onFormChange, onKeyPress: handleKeyPress }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { variant: \"h6\" }, \"\\u0E40\\u0E07\\u0E37\\u0E48\\u0E2D\\u0E19\\u0E44\\u0E02\\u0E41\\u0E25\\u0E30\\u0E02\\u0E49\\u0E2D\\u0E15\\u0E01\\u0E25\\u0E07\"),\r\n        businessForm && (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { style: { marginBottom: 16 } }, businessForm.form_condition[0])),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], { disabled: form.email === \"\" ||\r\n                form.fullname === \"\" ||\r\n                form.lastname === \"\" ||\r\n                form.tel === \"\", color: \"primary\", variant: \"contained\", style: { width: \"100%\", marginTop: 8 }, onClick: handleRegister }, \"\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\")));\r\n};\r\nconst BusinessRegister = ({ profileData }) => {\r\n    const classes = useStyles();\r\n    const { csrf, setCsrf, _xhrPost } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_4__[\"AppContext\"]);\r\n    const [form, setForm] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const [businessForm, setBusinessForm] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    async function loadBusinessForm() {\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"loadregister\",\r\n            body: { action: \"business_form\", type: \"business\" }\r\n        });\r\n        setCsrf(res.csrf);\r\n        console.log(res.data);\r\n        setBusinessForm(res.data);\r\n    }\r\n    Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\r\n        if (profileData) {\r\n            setForm({\r\n                email: \"\",\r\n                fullname: \"\",\r\n                lastname: \"\",\r\n                displayname: profileData.displayName,\r\n                tel: \"\",\r\n                statusmassage: profileData.statusMessage,\r\n                picture: profileData.pictureUrl\r\n            });\r\n        }\r\n        loadBusinessForm();\r\n    }, [profileData]);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classes.root }, form && (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProfileCard, Object.assign({}, { form })),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RegisterForm, Object.assign({}, { form, setForm, businessForm }))))));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (BusinessRegister);\r\n\n\n//# sourceURL=webpack:///./src/page/Business/BusinessRegister.tsx?");

/***/ })

}]);