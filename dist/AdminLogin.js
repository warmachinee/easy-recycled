(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["AdminLogin"],{

/***/ "./src/page/Admin/AdminLogin.tsx":
/*!***************************************!*\
  !*** ./src/page/Admin/AdminLogin.tsx ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-loadable */ \"./node_modules/react-loadable/lib/index.js\");\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_loadable__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/styles */ \"./node_modules/@material-ui/styles/esm/index.js\");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n/* harmony import */ var _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core/colors */ \"./node_modules/@material-ui/core/esm/colors/index.js\");\n/* harmony import */ var _AppContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../AppContext */ \"./src/AppContext.tsx\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst AppButton = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => __webpack_require__.e(/*! import() | AppButton */ \"AppButton\").then(__webpack_require__.bind(null, /*! ../../AppComponent/AppButton */ \"./src/AppComponent/AppButton.tsx\")),\r\n    loading: () => null\r\n});\r\nconst cardWidth = 300;\r\nconst useStyles = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_2__[\"makeStyles\"])(theme => ({\r\n    root: {\r\n        height: \"100vh\",\r\n        backgroundColor: \"black\",\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundPosition: \"center\",\r\n        position: \"relative\"\r\n    },\r\n    card: {\r\n        padding: 24,\r\n        width: cardWidth,\r\n        borderRadius: 12,\r\n        opacity: 0.93,\r\n        backgroundColor: \"white\"\r\n    }\r\n}));\r\nconst CardGrid = ({ children }) => {\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: {\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"space-between\",\r\n            height: \"100%\"\r\n        } },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { flex: 1 } }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { display: \"flex\", justifyContent: \"center\" } }, children),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { flex: 1 } })));\r\n};\r\nconst AdminLogin = react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(() => {\r\n    const classes = useStyles();\r\n    const { _onEnter, getSess, _xhrPost, csrf, setCsrf, ic_bg } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_5__[\"AppContext\"]);\r\n    const [err, setErr] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({ username: false, password: false });\r\n    const [username, setUsername] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");\r\n    const [password, setPassword] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");\r\n    async function onLogin() {\r\n        const sendObj = {\r\n            username,\r\n            password\r\n        };\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"alogin\",\r\n            body: sendObj\r\n        });\r\n        setCsrf(res.csrf);\r\n        switch (res.data.status) {\r\n            case \"wrong username\":\r\n                setErr({ username: true, password: false });\r\n                break;\r\n            case \"wrong password\":\r\n                setErr({ username: false, password: true });\r\n                break;\r\n            case \"success\":\r\n                getSess();\r\n                break;\r\n            default:\r\n                setErr({ username: false, password: false });\r\n                break;\r\n        }\r\n    }\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classes.root, style: { backgroundImage: `url(${ic_bg})` } },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CardGrid, null,\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Paper\"], { elevation: 4, className: classes.card },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { align: \"center\", variant: \"h5\", style: { marginBottom: 24, fontWeight: 600 } }, \"Admin Login\"),\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], Object.assign({ autoFocus: true, fullWidth: true, variant: \"filled\", label: \"Username\" }, (err.username && {\r\n                    error: true,\r\n                    helperText: \"Wrong username\"\r\n                }), { style: { marginBottom: 16 }, onChange: e => setUsername(e.target.value), onKeyPress: _onEnter(username === \"\" || password === \"\" ? () => { } : onLogin) })),\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], Object.assign({ fullWidth: true, variant: \"filled\", label: \"Password\", type: \"password\" }, (err.password && {\r\n                    error: true,\r\n                    helperText: \"Wrong password\"\r\n                }), { onChange: e => setPassword(e.target.value), onKeyPress: _onEnter(username === \"\" || password === \"\" ? () => { } : onLogin) })),\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AppButton, { variant: \"contained\", buttonColor: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_4__[\"green\"], style: { marginTop: 16, width: \"100%\" }, size: \"large\", onClick: onLogin, disabled: username === \"\" || password === \"\" }, \"Login\")))));\r\n});\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (AdminLogin);\r\n\n\n//# sourceURL=webpack:///./src/page/Admin/AdminLogin.tsx?");

/***/ })

}]);