(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{123:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var o=a(1),n=a(0),r=a.n(n),i=a(59);function s(e,t){var a=r.a.memo(r.a.forwardRef((function(t,a){return r.a.createElement(i.a,Object(o.a)({ref:a},t),e)})));return a.muiName=i.a.muiName,a}},139:function(e,t,a){"use strict";var o=a(1),n=a(2),r=a(0),i=a.n(r),s=(a(3),a(7)),c=a(10),l=a(18),d=a(639),p=a(25),u=i.a.forwardRef((function(e,t){var a=e.edge,r=void 0!==a&&a,c=e.children,l=e.classes,u=e.className,m=e.color,g=void 0===m?"default":m,f=e.disabled,h=void 0!==f&&f,b=e.disableFocusRipple,y=void 0!==b&&b,v=e.size,x=void 0===v?"medium":v,O=Object(n.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return i.a.createElement(d.a,Object(o.a)({className:Object(s.a)(l.root,u,"default"!==g&&l["color".concat(Object(p.a)(g))],h&&l.disabled,"small"===x&&l["size".concat(Object(p.a)(x))],{start:l.edgeStart,end:l.edgeEnd}[r]),centerRipple:!0,focusRipple:!y,disabled:h,ref:t},O),i.a.createElement("span",{className:l.label},c))}));t.a=Object(c.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(l.d)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(l.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(l.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(u)},176:function(e,t,a){"use strict";var o=a(1),n=a(2),r=a(0),i=a.n(r),s=(a(3),a(7)),c=a(10),l=a(25),d={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},p=i.a.forwardRef((function(e,t){var a=e.align,r=void 0===a?"inherit":a,c=e.classes,p=e.className,u=e.color,m=void 0===u?"initial":u,g=e.component,f=e.display,h=void 0===f?"initial":f,b=e.gutterBottom,y=void 0!==b&&b,v=e.noWrap,x=void 0!==v&&v,O=e.paragraph,j=void 0!==O&&O,k=e.variant,w=void 0===k?"body1":k,S=e.variantMapping,C=void 0===S?d:S,E=Object(n.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),I=g||(j?"p":C[w]||d[w])||"span";return i.a.createElement(I,Object(o.a)({className:Object(s.a)(c.root,p,"inherit"!==w&&c[w],"initial"!==m&&c["color".concat(Object(l.a)(m))],x&&c.noWrap,y&&c.gutterBottom,j&&c.paragraph,"inherit"!==r&&c["align".concat(Object(l.a)(r))],"initial"!==h&&c["display".concat(Object(l.a)(h))]),ref:t},E))}));t.a=Object(c.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(p)},177:function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(123);t.a=Object(r.a)(n.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},202:function(e,t,a){"use strict";var o=a(1),n=a(2),r=a(5),i=a(0),s=a.n(i),c=(a(3),a(7)),l=a(10),d=s.a.forwardRef((function(e,t){var a=e.classes,r=e.className,i=e.component,l=void 0===i?"div":i,d=e.disableGutters,p=void 0!==d&&d,u=e.variant,m=void 0===u?"regular":u,g=Object(n.a)(e,["classes","className","component","disableGutters","variant"]);return s.a.createElement(l,Object(o.a)({className:Object(c.a)(a.root,a[m],r,!p&&a.gutters),ref:t},g))}));t.a=Object(l.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:Object(r.a)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(d)},224:function(e,t){},255:function(e,t,a){"use strict";var o=a(1),n=a(2),r=a(0),i=a.n(r),s=(a(3),a(7)),c=a(10),l=a(25),d=a(103),p=i.a.forwardRef((function(e,t){var a=e.classes,r=e.className,c=e.color,p=void 0===c?"primary":c,u=e.position,m=void 0===u?"fixed":u,g=Object(n.a)(e,["classes","className","color","position"]);return i.a.createElement(d.a,Object(o.a)({square:!0,component:"header",elevation:4,className:Object(s.a)(a.root,a["position".concat(Object(l.a)(m))],a["color".concat(Object(l.a)(p))],r,"fixed"===m&&"mui-fixed"),ref:t},g))}));t.a=Object(c.a)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static",transform:"translateZ(0)"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(p)},641:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(184),i=a.n(r),s=a(26),c=a.n(s),l=a(104),d=(a(255),a(202),a(139)),p=(a(176),a(123)),u=(Object(p.a)(n.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),a(177)),m=(a(39),a(28)),g=a(22);const f=c()({loader:()=>Promise.all([a.e(0),a.e(2),a.e(3),a.e(4),a.e(32)]).then(a.bind(null,625)),loading:()=>null}),h=c()({loader:()=>Promise.all([a.e(0),a.e(2),a.e(3),a.e(73),a.e(27)]).then(a.bind(null,631)),loading:()=>null}),b=(c()({loader:()=>a.e(26).then(a.bind(null,426)),loading:()=>null}),c()({loader:()=>Promise.all([a.e(1),a.e(16)]).then(a.bind(null,124)),loading:()=>null}),Object(l.a)(e=>({profileCard:{display:"flex",flexDirection:"column",justifyContent:"center",margin:36,padding:16,width:200},title:{flexGrow:1}}))),y=window.liff,v=()=>{const{csrf:e,setCsrf:t,setDense:a,enQSnackbar:r,closeSnackbar:s,_xhrPost:c,_xhrGet:l,_isDesktopBrowser:d,sess:p,profileData:u,backDrop:g,setBackDrop:b,checkSession:y,getInfo:v}=Object(o.useContext)(m.a),[x,O]=Object(o.useState)(null),[j,k]=n.a.useState(0),w={...Object(o.useContext)(m.a),notifications:x,setNotifications:O,notiPage:j,setNotiPage:k,readNotifications:async function(){const a=await c({csrf:e,url:"usersystem",body:{action:"readnoti",linetoken:u&&u.userId,type:"customer"}});t(a.csrf),S(u)},realtimeAccess:function(){i()("https://easyrecycle.ml",{transports:["websocket","polling"]}).emit("noti",{action:"noti",linetoken:u&&u.userId,type:"customer",startindex:0,lastindex:10*(j+1)})}};async function S(a){const o=await c({csrf:e,url:"loadusersystem",body:{action:"noti",linetoken:a.userId,type:"customer",startindex:0,lastindex:10*(j+1)}});t(o.csrf),"status"in o.data&&"this is not user account or have been delete account"===o.data.status||"need to login user account"===o.data.status?y():O(o.data)}return Object(o.useEffect)(()=>{var e;u&&p&&"not member"!==p.status&&(e=p,i()("https://easyrecycle.ml",{transports:["websocket","polling"]}).on(`noti-${e.userid}`,e=>{if(e&&"success"===e.status){const{list:t}=e.result;O(t);const{method:a}=t[0].activity;"approve topup"===a&&v()}}),S(u))},[p,u,j]),n.a.createElement(m.a.Provider,{value:w},n.a.createElement("div",null,p&&("not member"!==p.status?n.a.createElement(h,null):n.a.createElement(f,Object.assign({},{profileData:u})))))},x=({location:e,history:t,match:a})=>{b();const{csrf:r,setCsrf:i,setDense:s,enQSnackbar:c,closeSnackbar:l,_xhrPost:p,_xhrGet:g,_isDesktopBrowser:f,userInfo:h,setUserInfo:x,profileData:O,setProfileData:j,sess:k,setSess:w,backDrop:S,setBackDrop:C}=Object(o.useContext)(m.a),E={...Object(o.useContext)(m.a),sess:k,getSess:R,addSnackbar:function({message:e,variant:t}){c({message:e,variant:t,action:D})},handleLogout:async function(){const e=await g("logout");i(e.csrf),y.isLoggedIn()&&y.logout();window.location.reload()},checkSession:async function(){const e=await g("logout");i(e.csrf),window.location.reload()},getInfo:async function(){const e=await p({csrf:r,url:"loadusersystem",body:{action:"info",linetoken:O&&O.userId,type:"customer"}});i(e.csrf),x(e.data)},getProfile:I,liffLogin:N};function I(){y.getProfile().then(e=>{j(e),R(e)}).catch(e=>console.error(e))}function N(){y.init({liffId:"1653861118-DAld6Lv2"},async()=>{y.isLoggedIn()?I():y.login({redirectUri:"https://easyrecycle.ml/"})})}async function R(e){w(null),C(null);const t=await p({csrf:r,url:"session",body:{linetoken:e.userId,type:"customer"}});i(t.csrf),w(t.data),C(t.data)}Object(o.useEffect)(()=>{f()?t.replace("/admin"):O?C(!0):(N(),s(!0))},[]);const D=e=>n.a.createElement(d.a,{onClick:()=>l(e)},n.a.createElement(u.a,{style:{color:"white"}}));return n.a.createElement(m.a.Provider,{value:E},n.a.createElement(v,null))};t.default=Object(g.f)(e=>n.a.createElement(x,Object.assign({},e)))}}]);