(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["AdminHeader"],{

/***/ "./src/page/Admin/AdminHeader.tsx":
/*!****************************************!*\
  !*** ./src/page/Admin/AdminHeader.tsx ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-loadable */ \"./node_modules/react-loadable/lib/index.js\");\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_loadable__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/styles */ \"./node_modules/@material-ui/styles/esm/index.js\");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n/* harmony import */ var _material_ui_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/icons */ \"./node_modules/@material-ui/icons/esm/index.js\");\n/* harmony import */ var _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/colors */ \"./node_modules/@material-ui/core/esm/colors/index.js\");\n/* harmony import */ var _AppContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../AppContext */ \"./src/AppContext.tsx\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/esm/react-router-dom.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst ConfirmDialog = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | ConfirmDialog */[__webpack_require__.e(\"vendors~AddFab~AdminHeader~BusinessProfile~BusinessType~Condition~ConfirmDialog~Document~GeneralDial~983732dd\"), __webpack_require__.e(\"ConfirmDialog\")]).then(__webpack_require__.bind(null, /*! ../../component/Dialog/ConfirmDialog */ \"./src/component/Dialog/ConfirmDialog.tsx\")),\r\n    loading: () => null\r\n});\r\nconst AppButton = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => __webpack_require__.e(/*! import() | AppButton */ \"AppButton\").then(__webpack_require__.bind(null, /*! ../../AppComponent/AppButton */ \"./src/AppComponent/AppButton.tsx\")),\r\n    loading: () => null\r\n});\r\nconst NotiList = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => __webpack_require__.e(/*! import() | NotiList */ \"NotiList\").then(__webpack_require__.bind(null, /*! ./NotiList */ \"./src/page/Admin/NotiList.tsx\")),\r\n    loading: () => null\r\n});\r\nconst drawerWidth = 240;\r\nconst useStyles = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_2__[\"makeStyles\"])(theme => ({\r\n    title: { flexGrow: 1 },\r\n    appBar: { width: `calc(100% - ${drawerWidth}px)`, marginLeft: drawerWidth }\r\n}));\r\nconst AdminHeader = ({ match, history, location }) => {\r\n    const classes = useStyles();\r\n    const { csrf, setCsrf, _xhrPost, useConfirmDeleteItem, handleLogout, sess, _onLocalhostFn } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_6__[\"AppContext\"]);\r\n    const [{ confirmState }, onLogout] = useConfirmDeleteItem();\r\n    const [notifications, setNotifications] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const [anchorEl, setAnchorEl] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const [anchorElNoti, setAnchorElNoti] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const open = Boolean(anchorEl);\r\n    const notiOpen = Boolean(anchorElNoti);\r\n    const notiClick = (event) => {\r\n        setAnchorElNoti(event.currentTarget);\r\n    };\r\n    const notiClose = () => {\r\n        setAnchorElNoti(null);\r\n    };\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n    async function getNotifications() {\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"aloadusersystem\",\r\n            body: {\r\n                action: \"noti\",\r\n                adminid: sess.userId\r\n                // startindex: (notiPage - 1) * 10,\r\n                // lastindex: notiPage * 10\r\n            }\r\n        });\r\n        setCsrf(res.csrf);\r\n        console.log(res.data);\r\n        setNotifications(res.data);\r\n    }\r\n    Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\r\n        _onLocalhostFn(() => {\r\n            setNotifications({\r\n                list: [\r\n                    {\r\n                        activity: {\r\n                            method: \"edit form\",\r\n                            data: [{ boarddisplay: 1 }]\r\n                        },\r\n                        reflink: 4314742,\r\n                        read: 0,\r\n                        createdate: \"2020-03-26T13:57:45.000Z\"\r\n                    },\r\n                    {\r\n                        activity: {\r\n                            method: \"delete form\",\r\n                            data: { business_name: \"AAA1\" }\r\n                        },\r\n                        reflink: 2310081,\r\n                        read: 0,\r\n                        createdate: \"2020-03-25T21:35:18.000Z\"\r\n                    },\r\n                    {\r\n                        activity: {\r\n                            method: \"delete form\",\r\n                            data: { business_name: \"TPGSA\" }\r\n                        },\r\n                        reflink: 8069118,\r\n                        read: 0,\r\n                        createdate: \"2020-03-25T18:46:04.000Z\"\r\n                    },\r\n                    {\r\n                        activity: {\r\n                            method: \"edit topup\",\r\n                            data: [{ value: \"100\" }]\r\n                        },\r\n                        reflink: 347147812,\r\n                        read: 0,\r\n                        createdate: \"2020-03-24T14:54:12.000Z\"\r\n                    },\r\n                    {\r\n                        activity: {\r\n                            method: \"edit topup\",\r\n                            data: [{ value: \"90\" }]\r\n                        },\r\n                        reflink: 347147812,\r\n                        read: 0,\r\n                        createdate: \"2020-03-24T14:50:17.000Z\"\r\n                    },\r\n                    {\r\n                        activity: {\r\n                            method: \"edit topup\",\r\n                            data: [{ value: \"100\" }]\r\n                        },\r\n                        reflink: 347147812,\r\n                        read: 0,\r\n                        createdate: \"2020-03-24T14:45:57.000Z\"\r\n                    },\r\n                    {\r\n                        activity: {\r\n                            method: \"edit topup\",\r\n                            data: [{ topupstatus: 1 }]\r\n                        },\r\n                        reflink: 632217982,\r\n                        read: 0,\r\n                        createdate: \"2020-03-24T05:33:16.000Z\"\r\n                    },\r\n                    {\r\n                        activity: {\r\n                            method: \"edit topup\",\r\n                            data: [{ topupstatus: -1 }]\r\n                        },\r\n                        reflink: 181778193,\r\n                        read: 0,\r\n                        createdate: \"2020-03-24T05:33:04.000Z\"\r\n                    },\r\n                    {\r\n                        activity: {\r\n                            method: \"edit topup\",\r\n                            data: [{ topupstatus: -1 }]\r\n                        },\r\n                        reflink: 581613014,\r\n                        read: 0,\r\n                        createdate: \"2020-03-24T05:32:47.000Z\"\r\n                    }\r\n                ],\r\n                count: 13\r\n            });\r\n        }, () => {\r\n            if (sess && sess.status === \"need login before\") {\r\n                history.replace(match.path);\r\n            }\r\n            if (sess) {\r\n                getNotifications();\r\n            }\r\n        });\r\n    }, []);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"AppBar\"], { position: \"static\", color: \"inherit\", className: classes.appBar },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Toolbar\"], { style: { paddingRight: 0 } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { variant: \"h6\", className: classes.title, color: \"primary\" }, \"Admin\"),\r\n            notifications && (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"IconButton\"], { onClick: notiClick },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Badge\"], { badgeContent: notifications.list.filter((item) => item.read === 0).length, color: \"secondary\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons__WEBPACK_IMPORTED_MODULE_4__[\"Notifications\"], null)))),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"IconButton\"], { edge: \"start\", color: \"primary\", onClick: handleClick },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons__WEBPACK_IMPORTED_MODULE_4__[\"MoreVert\"], { style: { color: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__[\"grey\"][700] } })),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ConfirmDialog, { type: \"delete\", open: confirmState, onClose: () => onLogout({ action: \"cancel\" }), onCancel: () => onLogout({ action: \"cancel\" }), onSubmit: () => {\r\n                    handleClose();\r\n                    handleLogout();\r\n                }, title: \"\\u0E04\\u0E38\\u0E13\\u0E41\\u0E19\\u0E48\\u0E43\\u0E08\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48\\u0E27\\u0E48\\u0E32\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E08\\u0E30\\u0E25\\u0E07\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2D\\u0E2D\\u0E01\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48 ?\", submitText: \"\\u0E25\\u0E07\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2D\\u0E2D\\u0E01\", headIcon: _material_ui_icons__WEBPACK_IMPORTED_MODULE_4__[\"ExitToApp\"] }),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Menu\"], { anchorEl: anchorEl, open: open, onClose: handleClose },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"MenuItem\"], { onClick: () => onLogout({ action: \"delete\" }) }, \"\\u0E25\\u0E07\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2D\\u0E2D\\u0E01\"))),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Popover\"], { open: notiOpen, anchorEl: anchorElNoti, onClose: notiClose, anchorOrigin: {\r\n                vertical: \"bottom\",\r\n                horizontal: \"right\"\r\n            }, transformOrigin: {\r\n                vertical: \"top\",\r\n                horizontal: \"right\"\r\n            }, PaperProps: { style: { width: 360, maxHeight: \"60%\" } } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(NotiList, { data: notifications }))));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_7__[\"withRouter\"])(props => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AdminHeader, Object.assign({}, props))));\r\n\n\n//# sourceURL=webpack:///./src/page/Admin/AdminHeader.tsx?");

/***/ })

}]);