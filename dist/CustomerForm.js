(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["CustomerForm"],{

/***/ "./src/page/Admin/Customer/CustomerForm.tsx":
/*!**************************************************!*\
  !*** ./src/page/Admin/Customer/CustomerForm.tsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-loadable */ \"./node_modules/react-loadable/lib/index.js\");\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_loadable__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/styles */ \"./node_modules/@material-ui/styles/esm/index.js\");\n/* harmony import */ var _AppContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../AppContext */ \"./src/AppContext.tsx\");\n\r\n\r\n\r\n\r\nconst Condition = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | Condition */[__webpack_require__.e(\"vendors~AddFab~AdminHeader~AdminList~BusinessDetail~BusinessProfile~BusinessType~Condition~ConfirmDi~645c9302\"), __webpack_require__.e(\"Condition\")]).then(__webpack_require__.bind(null, /*! ./Form/Condition */ \"./src/page/Admin/Customer/Form/Condition.tsx\")),\r\n    loading: () => null\r\n});\r\nconst BusinessType = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | BusinessType */[__webpack_require__.e(\"vendors~AddFab~AdminHeader~AdminList~BusinessDetail~BusinessProfile~BusinessType~Condition~ConfirmDi~645c9302\"), __webpack_require__.e(\"BusinessType\")]).then(__webpack_require__.bind(null, /*! ./Form/BusinessType */ \"./src/page/Admin/Customer/Form/BusinessType.tsx\")),\r\n    loading: () => null\r\n});\r\nconst useStyles = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_2__[\"makeStyles\"])(theme => ({}));\r\nconst FormComponent = ({ form }) => {\r\n    const { customer_condition, business_type } = form;\r\n    const { sess } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_3__[\"AppContext\"]);\r\n    const per1 = sess.permission &&\r\n        sess.permission.permission.some((item) => item === 1);\r\n    const per2 = sess.permission &&\r\n        sess.permission.permission.some((item) => item === 2);\r\n    const per3 = sess.permission &&\r\n        sess.permission.permission.some((item) => item === 3);\r\n    const per4 = sess.permission &&\r\n        sess.permission.permission.some((item) => item === 4);\r\n    const per5 = sess.permission &&\r\n        sess.permission.permission.some((item) => item === 5);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, per4 && (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Condition, { data: customer_condition }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BusinessType, { data: business_type })))));\r\n};\r\nconst CustomerForm = () => {\r\n    const classes = useStyles();\r\n    const { csrf, setCsrf, _xhrPost, _onLocalhostFn } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_3__[\"AppContext\"]);\r\n    const [form, setForm] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const passingProps = {\r\n        ...Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_3__[\"AppContext\"]),\r\n        form,\r\n        handleFetch,\r\n        onInserForm,\r\n        onDeleteForm,\r\n        onEditForm\r\n    };\r\n    async function handleFetch() {\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"aloadcustomer\",\r\n            body: {\r\n                action: \"customer_register\"\r\n            }\r\n        });\r\n        console.log(res.data);\r\n        setCsrf(res.csrf);\r\n        setForm(res.data);\r\n    }\r\n    async function onInserForm({ state, setState, type }) {\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"ausersystem\",\r\n            body: {\r\n                action: \"setup\",\r\n                type,\r\n                setaction: \"insert\",\r\n                newtext: state\r\n            }\r\n        });\r\n        console.log(res.data);\r\n        setCsrf(res.csrf);\r\n        setState(\"\");\r\n        handleFetch();\r\n    }\r\n    async function onDeleteForm({ text, type }) {\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"ausersystem\",\r\n            body: {\r\n                action: \"setup\",\r\n                type,\r\n                setaction: \"delete\",\r\n                oldtext: text\r\n            }\r\n        });\r\n        console.log(res.data);\r\n        setCsrf(res.csrf);\r\n        handleFetch();\r\n    }\r\n    async function onEditForm({ oldtext, newtext, type, afterEdit }) {\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"ausersystem\",\r\n            body: {\r\n                action: \"setup\",\r\n                type,\r\n                setaction: \"edit\",\r\n                oldtext,\r\n                newtext\r\n            }\r\n        });\r\n        console.log(res.data);\r\n        setCsrf(res.csrf);\r\n        afterEdit();\r\n        handleFetch();\r\n    }\r\n    Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\r\n        _onLocalhostFn(() => {\r\n            setForm({\r\n                customer_condition: [\"<แก้ไข เงื่อนไขและข้อตกลง>\"],\r\n                business_type: [\r\n                    \"บุคคลธรรมดา\",\r\n                    \"รถรับซื้อของเก่า/ซาเล้ง\",\r\n                    \"ร้านรับซื้อของเก่า\",\r\n                    \"นิติบุคคล(บริษัท/หจก)\"\r\n                ],\r\n                org_size: [\r\n                    \"พนักงาน 1-5 คน\",\r\n                    \"พนักงาน 6-20 คน\",\r\n                    \"พนักงาน 21-40 คน\",\r\n                    \"พนักงาน 41-100 คน\",\r\n                    \"มากกว่า 100 คน\"\r\n                ],\r\n                document: [\r\n                    \"บิลเงินสด\",\r\n                    \"ใบอนุญาตค้าของเก่า\",\r\n                    \"ภพ.20\",\r\n                    \"หนังสือรับรองบริษัท\",\r\n                    \"ใบรง.4 ลำดับที่ 105 (คัดแยกขยะที่ไม่เป็นอันตราย)\",\r\n                    \"ใบรง.ลำดับที่ 106 (กำจัดขยะประเภทอันตราย)\"\r\n                ],\r\n                transport: [\r\n                    \"รถกะบะ Pickup\",\r\n                    \"รถบรรทุก 6 ล้อ\",\r\n                    \"รถบรรทุกติดเฮี๊ยบ(มือขยุ้ม)\",\r\n                    \"รถสไลด์(วางกะบะเหล็ก)\",\r\n                    \"แม็คโครปากคีบ/แม็คโครแม่เหล็ก\"\r\n                ]\r\n            });\r\n        }, handleFetch);\r\n    }, []);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AppContext__WEBPACK_IMPORTED_MODULE_3__[\"AppContext\"].Provider, { value: passingProps },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, form && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FormComponent, Object.assign({}, { form })))));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (CustomerForm);\r\n\n\n//# sourceURL=webpack:///./src/page/Admin/Customer/CustomerForm.tsx?");

/***/ })

}]);