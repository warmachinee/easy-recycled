(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["Topup"],{

/***/ "./src/page/Admin/Other/Topup.tsx":
/*!****************************************!*\
  !*** ./src/page/Admin/Other/Topup.tsx ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-loadable */ \"./node_modules/react-loadable/lib/index.js\");\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_loadable__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/styles */ \"./node_modules/@material-ui/styles/esm/index.js\");\n/* harmony import */ var _AppContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../AppContext */ \"./src/AppContext.tsx\");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n/* harmony import */ var _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/colors */ \"./node_modules/@material-ui/core/esm/colors/index.js\");\n/* harmony import */ var _material_ui_lab_Pagination__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/lab/Pagination */ \"./node_modules/@material-ui/lab/esm/Pagination/index.js\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/esm/react-router-dom.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Progress = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => __webpack_require__.e(/*! import() | Progress */ \"Progress\").then(__webpack_require__.bind(null, /*! ../../../component/Utils/Progress */ \"./src/component/Utils/Progress.tsx\")),\r\n    loading: () => null\r\n});\r\nconst GeneralDialog = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | GeneralDialog */[__webpack_require__.e(\"vendors~AddFab~AdminHeader~AdminList~BusinessDetail~BusinessProfile~BusinessType~Condition~ConfirmDi~645c9302\"), __webpack_require__.e(\"GeneralDialog\")]).then(__webpack_require__.bind(null, /*! ../../../component/Dialog/GeneralDialog */ \"./src/component/Dialog/GeneralDialog.tsx\")),\r\n    loading: () => null\r\n});\r\nconst TopupDetail = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | TopupDetail */[__webpack_require__.e(\"vendors~AddFab~AdminHeader~AdminList~BusinessDetail~BusinessProfile~BusinessType~Condition~ConfirmDi~645c9302\"), __webpack_require__.e(\"TopupDetail\")]).then(__webpack_require__.bind(null, /*! ./TopupDetail */ \"./src/page/Admin/Other/TopupDetail.tsx\")),\r\n    loading: () => null\r\n});\r\nconst useStyles = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_2__[\"makeStyles\"])(theme => ({ topupItem: { padding: 12 } }));\r\nconst TopupItemList = props => {\r\n    const { topupList, topupType, onClickDetail } = props;\r\n    const arr = topupType === 10\r\n        ? topupList.list\r\n        : topupList.list.filter((item) => item.status === topupType);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { minWidth: 600 } }, arr.length > 0 ? (arr.map((d, i) => (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TopupItem, Object.assign({ key: d.requestid, data: d }, { onClickDetail }))))) : (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { style: { margin: \"24px 0\" }, align: \"center\", variant: \"h4\", color: \"textSecondary\" }, \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"))));\r\n};\r\nconst TopupItem = ({ data, onClickDetail }) => {\r\n    const classes = useStyles();\r\n    const { _dateToString, _thousandSeperater } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_3__[\"AppContext\"]);\r\n    function getStatus(status) {\r\n        switch (status) {\r\n            case 0:\r\n                return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { style: { ...(data.bill === 1 && { color: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__[\"amber\"][600] }) } }, data.bill === 1 ? \"รอดำเนินการ\" : \"ยังไม่ได้อัพโหลดสลิป\"));\r\n            case 1:\r\n                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { style: { color: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__[\"green\"][600] } }, \"\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\");\r\n            case -1:\r\n                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { style: { color: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__[\"red\"][600] } }, \"\\u0E44\\u0E21\\u0E48\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\");\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"ListItem\"], { button: true, className: classes.topupItem, onClick: () => onClickDetail(data) },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { style: { marginRight: 24 } }, _dateToString(data.createdate)),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { style: { flex: 1 } }, `${data.fullname} ${data.lastname} (${data.displayname})`),\r\n            getStatus(data.status),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { variant: \"h6\", style: { width: 100 }, align: \"right\" },\r\n                _thousandSeperater(data.value),\r\n                \" \\u0E3F\")),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Divider\"], null)));\r\n};\r\nconst Topup = ({ location, history, match }) => {\r\n    const classes = useStyles();\r\n    const { csrf, setCsrf, _xhrPost, _onLocalhostFn, booleanReducer, getTopupImg } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_3__[\"AppContext\"]);\r\n    const [topupList, setTopupList] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const [topupType, setTopupType] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(10);\r\n    const [{ detail }, booleanDispatch] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useReducer\"])(booleanReducer, { detail: false });\r\n    const [topupDetail, setTopupDetail] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const [topupPage, setTopupPage] = react__WEBPACK_IMPORTED_MODULE_0___default.a.useState(getHash());\r\n    function getHash() {\r\n        const hash = location.hash;\r\n        if (hash === \"\") {\r\n            return 1;\r\n        }\r\n        else {\r\n            return parseInt(hash.split(\"#\")[1]);\r\n        }\r\n    }\r\n    const paginationChange = (event, value) => {\r\n        history.replace(`${match.path}#${value}`);\r\n        setTopupPage(value);\r\n    };\r\n    const handleChange = (event) => {\r\n        setTopupType(event.target.value);\r\n    };\r\n    function onClickDetail(detail) {\r\n        setTopupDetail(detail);\r\n        booleanDispatch({ type: \"true\", key: \"detail\" });\r\n    }\r\n    async function getTopupList() {\r\n        const res = await _xhrPost({\r\n            csrf,\r\n            url: \"aloadtopup\",\r\n            body: {\r\n                action: \"list\",\r\n                startindex: (topupPage - 1) * 10,\r\n                lastindex: topupPage * 10\r\n            }\r\n        });\r\n        console.log(res.data);\r\n        setCsrf(res.csrf);\r\n        setTopupList(res.data);\r\n    }\r\n    function getPercentStatus(i) {\r\n        switch (i % 3) {\r\n            case 0:\r\n                return 1;\r\n            case 1:\r\n                return 0;\r\n            case 2:\r\n                return -1;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\r\n        _onLocalhostFn(() => {\r\n            const json = [];\r\n            for (var i = 0; i < 100; i++) {\r\n                json.push({\r\n                    requestid: 58161301 + i,\r\n                    userid: 915450 + i,\r\n                    linetoken: \"U34854b16de48d84b63c751717c9d2771\",\r\n                    displayname: \"P.R.E.M.I.O.R\",\r\n                    fullname: \"Sippakorn\" + i,\r\n                    lastname: \"Suphapinyo\" + i,\r\n                    picture: \"https://profile.line-scdn.net/0hPyKQa5SXD1Z2KCciVYpwAUptATsBBgkeDh0UNVooWDJcT05USkhFY1F9AW9dEU8CShsUN1N7UmUJ\",\r\n                    value: 100,\r\n                    bill: 1,\r\n                    createdate: \"2020-03-22T14:47:21.000Z\",\r\n                    status: getPercentStatus(i)\r\n                });\r\n            }\r\n            setTopupList({\r\n                list: json,\r\n                count: json.length\r\n            });\r\n        }, getTopupList);\r\n    }, [topupPage]);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null,\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { display: \"flex\", marginBottom: 24 } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { variant: \"h5\", style: { marginRight: 16 } }, \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E40\\u0E15\\u0E34\\u0E21\\u0E40\\u0E07\\u0E34\\u0E19\"),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"FormControl\"], { size: \"small\" },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Select\"], { value: topupType, onChange: handleChange, variant: \"outlined\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"MenuItem\"], { value: 10 }, \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"),\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"MenuItem\"], { value: 0 }, \"\\u0E23\\u0E2D\\u0E14\\u0E33\\u0E40\\u0E19\\u0E34\\u0E19\\u0E01\\u0E32\\u0E23\"),\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"MenuItem\"], { value: 1 }, \"\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\"),\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"MenuItem\"], { value: -1 }, \"\\u0E44\\u0E21\\u0E48\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\")))),\r\n        topupList ? (topupList.list.length > 0 ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TopupItemList, Object.assign({}, {\r\n            topupList,\r\n            topupType,\r\n            onClickDetail,\r\n            paginationChange,\r\n            topupPage\r\n        }))) : (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"Typography\"], { style: { margin: \"24px 0\" }, align: \"center\", variant: \"h4\", color: \"textSecondary\" }, \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"))) : (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Progress, null)),\r\n        topupList && Math.ceil(topupList.count / 10) > 1 && (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { marginTop: 16, display: \"flex\", justifyContent: \"center\" } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_lab_Pagination__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { count: Math.ceil(topupList.count / 10), page: topupPage, variant: \"outlined\", shape: \"rounded\", onChange: paginationChange }))),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GeneralDialog, { open: detail, onClose: () => booleanDispatch({ type: \"false\", key: \"detail\" }), title: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E01\\u0E32\\u0E23\\u0E40\\u0E15\\u0E34\\u0E21\\u0E40\\u0E07\\u0E34\\u0E19\" }, topupDetail && (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TopupDetail, Object.assign({}, { topupDetail, booleanDispatch, getTopupList }))))));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_7__[\"withRouter\"])(props => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Topup, Object.assign({}, props))));\r\n\n\n//# sourceURL=webpack:///./src/page/Admin/Other/Topup.tsx?");

/***/ })

}]);